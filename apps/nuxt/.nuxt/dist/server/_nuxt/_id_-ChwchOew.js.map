{"version":3,"file":"_id_-ChwchOew.js","sources":["../../../../app/components/article/EditSingleArticleModal.vue","../../../../app/components/article/QuestionItem.vue","../../../../app/components/article/QuestionForm.vue","../../../../app/components/article/TypingWord.vue","../../../../app/components/article/TypingArticle.vue","../../../../app/pages/(articles)/practice-articles/[id].vue"],"sourcesContent":["<script setup lang=\"ts\">\n\nimport type {Article} from \"~/types/types.ts\";\nimport {useDisableEventListener} from \"~/hooks/event.ts\";\nimport EditArticle from \"~/components/article/EditArticle.vue\";\nimport {getDefaultArticle} from \"~/types/func.ts\";\nimport {defineAsyncComponent} from \"vue\";\n\nconst Dialog = defineAsyncComponent(() => import('~/components/dialog/Dialog.vue'))\n\ninterface IProps {\n  article?: Article\n  modelValue: boolean\n}\n\nconst props = defineProps({\n  article: { default: () => getDefaultArticle() },\n  modelValue: { type: Boolean, default: false }\n})\nconst emit = defineEmits([\"save\", \"update:modelValue\"])\n\nuseDisableEventListener(() => props.modelValue)\n\n</script>\n\n<template>\n  <Dialog\n      :header=\"false\"\n      :model-value=\"props.modelValue\"\n      @close=\"emit('update:modelValue',false)\"\n      :full-screen=\"true\"\n  >\n    <div class=\"wrapper\">\n      <EditArticle\n          :article=\"article\"\n          @save=\"val => emit('save',val)\"\n      />\n    </div>\n  </Dialog>\n</template>\n\n<style scoped lang=\"scss\">\n\n.wrapper {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  background: var(--color-primary);\n}\n</style>\n","<template>\n  <div ref=\"container\" class=\"question-item mb-4\">\n    <div class=\"mb-1 \"\n         :class=\"noChoseClass\"\n    ><span class=\"font-family\">{{ questionIndex }}</span>. {{ stem }}\n    </div>\n    <div\n        class=\"grid gap-1\"\n        :class=\"layoutClass\"\n    >\n      <label\n          v-for=\"(opt, i) in shuffledOptions\"\n          :key=\"i\"\n          class=\"option border rounded  cursor-pointer hover:bg-gray-300\"\n          :class=\"feedbackClass(i)\"\n      >\n        <input\n            :type=\"isMultiple ? 'checkbox' : 'radio'\"\n            :name=\"`question-${questionIndex}`\"\n            class=\"mr-2\"\n            :value=\"opt\"\n            v-model=\"userSelection\"\n            @change=\"onSelect\"\n        />\n        <span ref=\"optionRefs\">(<span class=\"italic\">{{ ['a', 'b', 'c', 'd'][i] }}</span>) {{ opt }}</span>\n      </label>\n    </div>\n\n    <div v-if=\"explanation && isSubmitted\" class=\"mt-2 text-xl text-gray-600\">\n      {{ $t('explanation') }}：{{ explanation }}\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport {computed, nextTick, onMounted, ref, watch} from 'vue'\nimport {shuffle} from \"~/utils/index.js\";\n\nconst props = defineProps({\n  stem: String,\n  options: Array,\n  correctAnswer: Array, // ['a', 'b']\n  explanation: String,\n  immediateFeedback: Boolean,\n  questionIndex: Number,\n  randomize: Boolean\n})\n\nconst emit = defineEmits(['answered'])\n\n// 将选项打乱并映射回原始下标\nconst originalOptions = props.options\nconst shuffledOptions = ref([])\nconst answerMap = ref([]) // 映射 shuffled[i] 对应原始 index（用于判分）\n\nconst isMultiple = computed(() => props.correctAnswer.length > 1)\nconst userSelection = ref(isMultiple.value ? [] : '')\nconst isSubmitted = ref(false)\nconst isCorrect = ref(null)\n\n// 初始化打乱选项\nconst initOptions = () => {\n  const indices = originalOptions.map((_, i) => i)\n  const shuffledIndices = props.randomize ? shuffle(indices) : indices\n  shuffledOptions.value = shuffledIndices.map(i => originalOptions[i])\n  answerMap.value = shuffledIndices\n}\n\ninitOptions()\n\nconst getLetter = (index) => ['a', 'b', 'c', 'd'][index]\nconst getOriginalLetter = (shuffledIndex) => getLetter(answerMap.value[shuffledIndex])\n\nconst onSelect = () => {\n  if (props.immediateFeedback) submit()\n  emitAnswer()\n}\n\nconst emitAnswer = () => {\n  const selectedLetters = isMultiple.value\n      ? userSelection.value.map(val => getOriginalLetter(shuffledOptions.value.indexOf(val)))\n      : [getOriginalLetter(shuffledOptions.value.indexOf(userSelection.value))]\n\n  const isAnswerCorrect =\n      selectedLetters.sort().join() === props.correctAnswer.sort().join()\n\n  emit('answered', {\n    index: props.questionIndex,\n    selected: selectedLetters,\n    isCorrect: isAnswerCorrect\n  })\n}\n\nconst submit = () => {\n  isSubmitted.value = true\n  const selectedLetters = isMultiple.value\n      ? userSelection.value.map(val => getOriginalLetter(shuffledOptions.value.indexOf(val)))\n      : [getOriginalLetter(shuffledOptions.value.indexOf(userSelection.value))]\n  isCorrect.value =\n      selectedLetters.sort().join() === props.correctAnswer.sort().join()\n}\n\nconst feedbackClass = (i) => {\n  if (!isSubmitted.value) return ''\n  const selected = isMultiple.value\n      ? userSelection.value.includes(shuffledOptions.value[i])\n      : userSelection.value === shuffledOptions.value[i]\n  const correct = props.correctAnswer.includes(getOriginalLetter(i))\n  if (correct) return 'bg-green-200'\n  if (selected && !correct) return 'bg-red-200'\n  return ''\n}\nconst noChoseClass = computed(() => {\n  if (!isSubmitted.value) return ''\n  const selected = isMultiple.value\n      ? userSelection.value.length\n      : userSelection.value\n  return !selected && 'bg-red-400'\n})\n\n// 父组件调用此方法统一评分\ndefineExpose({\n  submit,\n  getResult: () => {\n    const selectedLetters = isMultiple.value\n        ? userSelection.value.map(val => getOriginalLetter(shuffledOptions.value.indexOf(val)))\n        : [getOriginalLetter(shuffledOptions.value.indexOf(userSelection.value))]\n    return {\n      index: props.questionIndex,\n      selected: selectedLetters,\n      isCorrect: selectedLetters.sort().join() === props.correctAnswer.sort().join()\n    }\n  }\n})\n\nconst optionRefs = ref([])\nconst container = ref(null)\nconst layoutClass = ref('')\n\nconst calculateLayout = () => {\n  if (!container.value || optionRefs.value.length === 0) return\n\n  const containerWidth = container.value.clientWidth\n  const widths = optionRefs.value.map(el => el.getBoundingClientRect().width)\n\n  const totalWidth = widths.reduce((sum, w) => sum + w, 0)\n  // console.log(widths,totalWidth)\n\n  // 如果任意选项宽度超过容器一半\n  if (widths.some(w => w > containerWidth / 2)) {\n    layoutClass.value = 'grid-cols-1'\n    return\n  }\n\n  // 如果所有选项都可以在一行内放下\n  if (totalWidth + 80 * (widths.length - 1) <= containerWidth) {\n    layoutClass.value = 'grid-cols-4'\n    return\n  }\n\n  // 否则 2 列\n  layoutClass.value = 'grid-cols-2'\n}\n\n\nonMounted(async () => {\n  await nextTick()\n  calculateLayout()\n\n  const resizeObserver = new ResizeObserver(() => {\n    calculateLayout()\n  })\n\n  resizeObserver.observe(container.value)\n})\n\nwatch(() => props.options, async () => {\n  await nextTick()\n  calculateLayout()\n})\n</script>\n\n<style scoped>\n\n.option {\n  white-space: normal;\n  text-overflow: unset;\n  overflow: visible;\n  word-break: keep-all;\n  padding: 5px;\n  border-radius: 6px;\n  transition: all 0.2s ease;\n}\n</style>\n","<template>\n  <div class=\"question-form en-article-family\">\n    <div class=\"flex items-center justify-between\">\n      <div class=\"font-bold\">Multiple choice questions {{ $t('multiple_choice') }}</div>\n      <div v-if=\"false\">\n        <button\n            v-if=\"!started\"\n            class=\"bg-blue-600 text-white px-4 py-1 rounded\"\n            @click=\"startExam\"\n        >{{ $t('start') }}\n        </button>\n        <span v-if=\"started\" class=\"text-red-600 font-semibold font-family\">\n          {{ $t('countdown') }}：{{ timeLeft }} {{ $t('seconds') }}\n        </span>\n      </div>\n    </div>\n\n    <form @submit.prevent>\n      <QuestionItem\n          v-for=\"(q, i) in questions\"\n          :key=\"i\"\n          ref=\"questionRefs1\"\n          :question-index=\"i + 1\"\n          :stem=\"q.stem\"\n          :options=\"q.options\"\n          :correct-answer=\"q.correctAnswer\"\n          :explanation=\"q.explanation\"\n          :immediate-feedback=\"props.immediateFeedback\"\n          :randomize=\"props.randomize\"\n          @answered=\"onAnswered\"\n      />\n    </form>\n\n    <div class=\"center items-center gap-2  mt-10\">\n      <button\n          class=\"bg-green-600 text-white px-6 py-2 rounded\"\n          @click=\"submitAll\"\n      >{{ $t('submit_exam') }}\n      </button>\n      <span class=\"text-xl\">{{ $t('exam_color_hint') }}</span>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport {ref, useTemplateRef} from 'vue'\nimport QuestionItem from './QuestionItem.vue'\nimport Toast from '~/components/base/toast/Toast.ts'\n\ninterface IProps {\n  questions: Array,\n  duration: Number,\n  immediateFeedback: Boolean,\n  randomize: Boolean\n}\n\nconst props = defineProps({\n  questions: { default: [] },\n  duration: { default: 300 },\n  immediateFeedback: { default: false },\n  randomize: { default: false }\n})\n\nconst questionRefs = useTemplateRef('questionRefs1')\nconst started = ref(false)\nconst timeLeft = ref(props.duration || 300)\nlet timer = null\n\nconst startExam = () => {\n  started.value = true\n  timeLeft.value = props.duration || 300\n  timer = setInterval(() => {\n    timeLeft.value--\n    if (timeLeft.value <= 0) {\n      clearInterval(timer)\n      submitAll()\n    }\n  }, 1000)\n}\n\nconst onAnswered = (res) => {\n  console.log('Answered:', res)\n  // 可收集中间过程（非必须）\n}\n\nconst submitAll = () => {\n  console.log(questionRefs)\n  questionRefs.value.forEach((q) => q.submit())\n  const results = questionRefs.value.map((q) => q.getResult())\n  const correctCount = results.filter(r => r.isCorrect).length\n  const wrongCount = results.length - correctCount\n\n  console.log('最终结果：', results)\n  Toast.success(`共 ${results.length} 题，答对 ${correctCount}，答错 ${wrongCount}`)\n}\n</script>\n\n<style scoped>\n\n</style>\n","<script setup lang=\"tsx\">import { computed as _computed } from 'vue';\n\nimport {useSettingStore} from \"~/stores/setting.ts\";\nimport Space from \"~/components/article/Space.vue\";\n\nimport {PracticeArticleWordType} from \"~/types/enum.ts\";\nimport type {ArticleWord} from \"~/types/types.ts\";\n\nconst props = defineProps({\n  word: null,\n  isTyping: { type: Boolean }\n})\nconst settingStore = useSettingStore()\n\nfunction compare(a: string, b: string) {\n  return settingStore.ignoreCase ? a.toLowerCase() === b.toLowerCase() : a === b\n}\n\nconst isHide = _computed(() => {\n  if (settingStore.dictation && props.word.type === PracticeArticleWordType.Word) return 'hide'\n  return ''\n})\n\nconst list = _computed(() => {\n  let t = []\n  let right = ''\n  let wrong = ''\n  if (props.word.input.length) {\n    if (props.word.input.length === props.word.word.length) {\n      if (settingStore.ignoreCase ? props.word.input.toLowerCase() === props.word.word.toLowerCase() : props.word.input === props.word.word) {\n        t.push({type: 'word-complete', val: props.word.input})\n        return t\n      }\n    }\n    props.word.input.split('').forEach((k, i) => {\n      if (k === ' ') {\n        right = wrong = ''\n        t.push({type: 'space'})\n      }\n      else {\n        if (compare(k, props.word.word[i])) {\n          right += k\n          wrong = ''\n          if (t.length) {\n            let last = t[t.length - 1]\n            if (last.type === 'input-right') {\n              last.val = right\n            } else {\n              t.push({type: 'input-right', val: right})\n            }\n          } else {\n            t.push({type: 'input-right', val: right})\n          }\n        } else {\n          wrong += k\n          right = ''\n          if (t.length) {\n            let last = t[t.length - 1]\n            if (last.type === 'input-wrong') {\n              last.val = wrong\n            } else {\n              t.push({type: 'input-wrong', val: wrong})\n            }\n          } else {\n            t.push({type: 'input-wrong', val: wrong})\n          }\n        }\n      }\n    })\n    if (props.word.input.length < props.word.word.length) {\n      t.push({type: 'word-end', val: props.word.word.slice(props.word.input.length)})\n    }\n  } else {\n    //word-end这个class用于光标定位，光标会定位到第一个word-end的位置\n    t.push({type: 'word-end', val: props.word.word})\n  }\n  return t\n})\n\ndefineRender(() => {\n  return list.value.map((item, i) => {\n    if (item.type === 'word-complete') {\n      return <span>{item.val}</span>\n    }\n    if (item.type === 'word-end') {\n      return <span className={'word-end ' + isHide.value}>{item.val}</span>\n    }\n    if (item.type === 'input-right') {\n      return <span className={props.isTyping ? 'input-right' : ''}>{item.val}</span>\n    }\n    if (item.type === 'input-wrong') {\n      return <span className=\"input-wrong\">{item.val}</span>\n    }\n    if (item.type === 'space') {\n      return <Space isWrong={true}/>\n    }\n  })\n})\n</script>\n\n\n<style scoped lang=\"scss\">\n.input-right {\n  color: var(--color-select-bg);\n}\n\n.input-wrong {\n  @apply color-red\n}\n\n.hide {\n  opacity: 0;\n}\n</style>\n","<script setup lang=\"ts\">import { ref as _ref, computed as _computed } from 'vue';\n\nimport Toast from '~/components/base/toast/Toast'\nimport BaseButton from '~/components/BaseButton.vue'\nimport { useWordOptions } from '~/hooks/dict'\nimport { usePlayBeep, usePlayKeyboardAudio, usePlayWordAudio } from '~/hooks/sound'\nimport QuestionForm from '~/components/article/QuestionForm.vue'\nimport Space from '~/components/article/Space.vue'\nimport TypingWord from '~/components/article/TypingWord.vue'\nimport { useBaseStore } from '~/stores/base'\nimport { usePracticeStore } from '~/stores/practice'\nimport { useSettingStore } from '~/stores/setting'\nimport { getDefaultArticle, getDefaultWord } from '~/types/func'\nimport type { Article, ArticleWord, Sentence, Word } from '~/types/types'\nimport { _dateFormat, _nextTick, isMobile, msToHourMinute, total } from '~/utils'\nimport { emitter, EventKey, useEvents } from '~/utils/eventBus'\nimport ContextMenu from '@imengyu/vue3-context-menu'\nimport '@imengyu/vue3-context-menu/lib/vue3-context-menu.css'\nimport nlp from 'compromise/three'\nimport { nanoid } from 'nanoid'\nimport { inject, onMounted, onUnmounted, watch } from 'vue'\nimport { useI18n } from 'vue-i18n'\nconst { t: $t } = useI18n()\n\nimport { getPracticeArticleCache, setPracticeArticleCache } from '~/utils/cache'\nimport { PracticeArticleWordType, ShortcutKey } from '~/types/enum'\n\ninterface IProps {\n  article: Article\n  sectionIndex?: number\n  sentenceIndex?: number\n  wordIndex?: number\n  stringIndex?: number\n}\n\nconst props = defineProps({\n  article: { default: () => getDefaultArticle() },\n  sectionIndex: { default: 0 },\n  sentenceIndex: { default: 0 },\n  wordIndex: { default: 0 },\n  stringIndex: { default: 0 }\n})\n\nconst emit = defineEmits([\"ignore\", \"wrong\", \"play\", \"nextWord\", \"complete\", \"next\", \"replay\"])\n\nlet typeArticleRef = _ref<HTMLInputElement>()\nlet mobileInputRef = _ref<HTMLInputElement>()\nlet articleWrapperRef = _ref<HTMLInputElement>(null)\nlet sectionIndex = _ref(0)\nlet sentenceIndex = _ref(0)\nlet wordIndex = _ref(0)\nlet stringIndex = _ref(0)\nlet input = _ref('')\nlet wrong = _ref('')\n//是否是输入空格\nlet isSpace = _ref(false)\nlet isEnd = _ref(false)\nlet hoverIndex = _ref({\n  sectionIndex: -1,\n  sentenceIndex: -1,\n  wordIndex: -1,\n})\nlet cursor = _ref({\n  top: 0,\n  left: 0,\n})\n\nconst currentIndex = _computed(() => {\n  return `${sectionIndex.value}${sentenceIndex.value}${wordIndex.value}`\n})\n\nconst playBeep = usePlayBeep()\nconst playKeyboardAudio = usePlayKeyboardAudio()\nconst playWordAudio = usePlayWordAudio()\n\nconst { toggleWordCollect } = useWordOptions()\n\nconst store = useBaseStore()\nconst settingStore = useSettingStore()\nconst statStore = usePracticeStore()\nconst isMob = isMobile()\n\nwatch([() => sectionIndex.value, () => sentenceIndex.value, () => wordIndex.value, () => stringIndex.value], ([a, b, c]) => {\n  if (a !== 0 || b !== 0 || c !== 0) {\n    setPracticeArticleCache({\n      practiceData: {\n        sectionIndex: sectionIndex.value,\n        sentenceIndex: sentenceIndex.value,\n        wordIndex: wordIndex.value,\n      },\n      statStoreData: statStore.$state,\n    })\n  }\n  checkCursorPosition(a, b, c)\n})\n\n// watch(() => props.article.id, init, {immediate: true})\n\nwatch(\n  () => settingStore.translate,\n  () => {\n    checkTranslateLocation().then(() => checkCursorPosition())\n  }\n)\n\nwatch(\n  () => isEnd.value,\n  n => {\n    if (n) {\n      _nextTick(() => {\n        window.scrollTo({\n          top: document.documentElement.scrollHeight,\n          behavior: 'smooth',\n        })\n      })\n    } else {\n      window.scrollTo({ top: 0, behavior: 'smooth' })\n    }\n  }\n)\n\nfunction init() {\n  if (!props.article.id) return\n  isSpace.value = isEnd.value = false\n  let d = getPracticeArticleCache()\n  if (d) {\n    sectionIndex.value = d.practiceData.sectionIndex\n    sentenceIndex.value = d.practiceData.sentenceIndex\n    wordIndex.value = d.practiceData.wordIndex\n    jump(sectionIndex.value, sentenceIndex.value, wordIndex.value)\n    statStore.$patch(d.statStoreData)\n  } else {\n    wrong.value = input.value = ''\n    sectionIndex.value = 0\n    sentenceIndex.value = 0\n    wordIndex.value = 0\n    stringIndex.value = 0\n    //todo 这在直接修改不太合理\n    props.article.sections.map(v => {\n      v.map(w => {\n        w.words.map(s => {\n          s.input = ''\n        })\n      })\n    })\n    window.scrollTo({ top: 0 })\n  }\n  _nextTick(() => {\n    emit('play', { sentence: props.article.sections[sectionIndex.value][sentenceIndex.value], handle: false })\n    if (isNameWord()) next()\n  })\n  checkTranslateLocation().then(() => checkCursorPosition())\n  focusMobileInput()\n}\n\nfunction checkCursorPosition(a = sectionIndex.value, b = sentenceIndex.value, c = wordIndex.value) {\n  // console.log('checkCursorPosition')\n  _nextTick(() => {\n    // 选中目标元素\n    const currentWord = document.querySelector(\n      `.section:nth-of-type(${a + 1}) .sentence:nth-of-type(${b + 1}) .word:nth-of-type(${c + 1})`\n    )\n    if (currentWord) {\n      // 在 currentWord 内找 .word-end\n      const end = currentWord.querySelector('.word-end')\n      if (end) {\n        // 获取 articleWrapper 的位置\n        const articleRect = articleWrapperRef.value.getBoundingClientRect()\n        const endRect = end.getBoundingClientRect()\n        // 判断元素是否在视口内\n        const isInViewport = endRect.top >= 0 && endRect.top <= window.innerHeight\n        if (isInViewport) {\n          // 如果在视口内且位置大于屏幕的0.7高度，就滚动屏幕的1/3\n          if (endRect.y > window.innerHeight * 0.7) {\n            window.scrollTo({\n              top: document.documentElement.scrollTop + window.innerHeight * 0.3,\n              behavior: 'smooth',\n            })\n          }\n        } else {\n          // 如果不在视口内，滚动到屏幕中间\n          window.scrollTo({\n            top: document.documentElement.scrollTop + endRect.top - window.innerHeight / 2,\n            behavior: 'smooth',\n          })\n        }\n        // 计算相对位置\n        cursor.value = {\n          top: endRect.top - articleRect.top,\n          left: endRect.left - articleRect.left,\n        }\n      }\n    }\n  })\n}\n\nfunction checkTranslateLocation() {\n  // console.log('checkTranslateLocation')\n  return new Promise<void>(resolve => {\n    if (isMob) {\n      resolve()\n      return\n    }\n    _nextTick(() => {\n      let articleRect = articleWrapperRef.value.getBoundingClientRect()\n      props.article.sections.map((v, i) => {\n        v.map((w, j) => {\n          let location = i + '-' + j\n          let wordClassName = `.word${location}`\n          let word = document.querySelector(wordClassName)\n          let wordRect = word.getBoundingClientRect()\n          let translateClassName = `.translate${location}`\n          let translate: HTMLDivElement = document.querySelector(translateClassName)\n\n          translate.style.opacity = '1'\n          translate.style.top = wordRect.top - articleRect.top + 24 + 'px'\n          // @ts-ignore\n          translate.firstChild.style.width = wordRect.left - articleRect.left + 'px'\n          // console.log(word, wordRect.left - articleRect.left)\n          // console.log('word-wordRect', wordRect)\n        })\n      })\n      resolve()\n    }, 300)\n  })\n}\n\nfunction focusMobileInput() {\n  if (!isMob) return\n  mobileInputRef.value?.focus()\n}\n\nfunction processMobileCharacter(char: string) {\n  if (!char) return\n  const code = char === ' ' ? 'Space' : char === '\\n' ? 'Enter' : `Key${char.toUpperCase()}`\n  const fakeEvent = {\n    key: char,\n    code,\n    preventDefault() {},\n    stopPropagation() {},\n  } as unknown as KeyboardEvent\n  onTyping(fakeEvent)\n}\n\nfunction handleMobileInput(event: Event) {\n  if (!isMob) return\n  const target = event.target as HTMLInputElement\n  const value = target?.value ?? ''\n  if (!value) return\n  for (const char of value) {\n    processMobileCharacter(char)\n  }\n  target.value = ''\n}\n\nfunction handleMobileBeforeInput(event: InputEvent) {\n  if (!isMob) return\n  if (event.inputType === 'deleteContentBackward') {\n    event.preventDefault()\n    del()\n  }\n}\n\nconst normalize = (s: string) => s.toLowerCase().trim()\nconst namePatterns = _computed(() => {\n  return Array.from(\n    new Set(\n      (props.article?.nameList ?? [])\n        .map(normalize)\n        .filter(Boolean)\n        .map(s => s.split(/\\s+/).filter(Boolean))\n        .flat()\n        .concat(['Mr', 'Mrs', 'Ms', 'Dr', 'Miss'].map(normalize))\n    )\n  )\n})\n\nconst isNameWord = () => {\n  let currentSection = props.article.sections[sectionIndex.value]\n  let currentSentence = currentSection[sentenceIndex.value]\n  let w: ArticleWord = currentSentence.words[wordIndex.value]\n  return w?.type === PracticeArticleWordType.Word && namePatterns.value.length > 0 && namePatterns.value.includes(normalize(w.word))\n}\n\nlet isTyping = false\n//专用锁，因为这个方法父级要调用\nlet lock = false\n\nfunction nextSentence() {\n  if (lock || isEnd.value) return\n  checkTranslateLocation()\n  lock = true\n  let currentSection = props.article.sections[sectionIndex.value]\n  let currentSentence = currentSection[sentenceIndex.value]\n  //这里把未输入的单词补全，因为删除时会用到input\n  currentSentence.words.forEach((word, i) => {\n    word.input = word.input + word.word.slice(word.input?.length ?? 0)\n  })\n\n  //todo 计得把略过的单词加上统计里面去\n  // if (!store.allIgnoreWords.includes(currentWord.word.toLowerCase()) && currentWord.type === PracticeArticleWordType.Word) {\n  //   statisticsStore.inputNumber++\n  // }\n  isSpace.value = false\n  input.value = wrong.value = ''\n  stringIndex.value = 0\n  wordIndex.value = 0\n  sentenceIndex.value++\n  if (!currentSection[sentenceIndex.value]) {\n    sentenceIndex.value = 0\n    sectionIndex.value++\n    if (!props.article.sections[sectionIndex.value]) {\n      console.log('打完了')\n      isEnd.value = true\n      emit('complete')\n    } else {\n      if (isNameWord()) next()\n      emit('play', { sentence: props.article.sections[sectionIndex.value][0], handle: false })\n    }\n  } else {\n    if (isNameWord()) next()\n    emit('play', { sentence: currentSection[sentenceIndex.value], handle: false })\n  }\n  lock = false\n  focusMobileInput()\n}\n\nconst next = () => {\n  isSpace.value = false\n  input.value = wrong.value = ''\n  stringIndex.value = 0\n\n  let currentSection = props.article.sections[sectionIndex.value]\n  let currentSentence = currentSection[sentenceIndex.value]\n  let currentWord: ArticleWord = currentSentence.words[wordIndex.value]\n\n  // 检查下一个单词是否存在\n  if (wordIndex.value + 1 < currentSentence.words.length) {\n    wordIndex.value++\n    currentWord = currentSentence.words[wordIndex.value]\n    //这里把未输入的单词补全，因为删除时会用到input\n    currentSentence.words.slice(0, wordIndex.value).forEach((word, i) => {\n      word.input = word.input + word.word.slice(word.input?.length ?? 0)\n    })\n    if (\n      [PracticeArticleWordType.Symbol, PracticeArticleWordType.Number].includes(currentWord.type) &&\n      settingStore.ignoreSymbol\n    ) {\n      next()\n    } else if (isNameWord()) {\n      next()\n    } else {\n      emit('nextWord', currentWord)\n    }\n  } else {\n    nextSentence()\n  }\n}\n\nfunction onTyping(e: KeyboardEvent) {\n  debugger\n  if (!props.article.sections.length) return\n  if (isTyping || isEnd.value) return\n  isTyping = true\n  // console.log('keyDown', e.key, e.code, e.keyCode)\n  try {\n    let currentSection = props.article.sections[sectionIndex.value]\n    let currentSentence = currentSection[sentenceIndex.value]\n    let currentWord: ArticleWord = currentSentence.words[wordIndex.value]\n    wrong.value = ''\n\n    if (isSpace.value) {\n      if (e.code === 'Space') {\n        next()\n      } else {\n        // 如果在第一个单词的最后一位上， 不按空格的直接输入下一个字母的话\n        next()\n        isTyping = false\n        onTyping(e)\n        // wrong = ' '\n        // playBeep()\n        // setTimeout(() => {\n        //   wrong = ''\n        //   wrong = input = ''\n        // }, 500)\n      }\n    } else {\n      // if (isNameWord(currentWord)) {\n      //   isSpace = false\n      //   next()\n      //   isTyping = false\n      //   return onTyping(e)\n      // }\n      let letter = e.key\n      let key = currentWord.word[stringIndex.value]\n      // console.log('key', key,)\n\n      let isRight = false\n      if (settingStore.ignoreCase) {\n        isRight = key.toLowerCase() === letter.toLowerCase()\n      } else {\n        isRight = key === letter\n      }\n      if (!isRight) {\n        if (currentWord.type === PracticeArticleWordType.Word) {\n          emit('wrong', currentWord)\n        }\n        playBeep()\n      }\n\n      input.value += letter\n      currentWord.input = input.value\n      stringIndex.value++\n      //单词输入完毕\n      if (!currentWord.word[stringIndex.value]) {\n        input.value = ''\n        if (currentWord.nextSpace) {\n          isSpace.value = true\n        } else {\n          next()\n        }\n      }\n    }\n    playKeyboardAudio()\n    e.preventDefault()\n  } catch (e) {\n    //todo 上报\n    setPracticeArticleCache(null)\n    init()\n  } finally {\n    isTyping = false\n  }\n}\n\nfunction play() {\n  let currentSection = props.article.sections[sectionIndex.value]\n  emit('play', { sentence: currentSection[sentenceIndex.value], handle: true })\n}\n\nfunction del() {\n  if (wrong.value) {\n    wrong.value = ''\n  } else {\n    if (isEnd.value) return\n    if (isSpace.value) {\n      isSpace.value = false\n    }\n    let endSentence = false\n    let endWord = false\n    let endString = false\n    if (stringIndex.value === 0) {\n      if (wordIndex.value === 0) {\n        if (sentenceIndex.value === 0) {\n          if (sectionIndex.value === 0) {\n            return\n          } else {\n            endSentence = endString = endWord = true\n            sectionIndex.value--\n          }\n        } else {\n          endString = endWord = true\n          sentenceIndex.value--\n        }\n      } else {\n        endString = true\n        wordIndex.value--\n      }\n    } else stringIndex.value--\n    let currentSection = props.article.sections[sectionIndex.value]\n    if (endSentence) sentenceIndex.value = currentSection.length - 1\n    let currentSentence = currentSection[sentenceIndex.value]\n    if (endWord) wordIndex.value = currentSentence.words.length - 1\n    let currentWord: ArticleWord = currentSentence.words[wordIndex.value]\n    if (endString) {\n      checkTranslateLocation()\n      if (currentWord.nextSpace) {\n        isSpace.value = true\n        stringIndex.value = currentWord.word.length\n      } else {\n        stringIndex.value = currentWord.word.length - 1\n      }\n    }\n    input.value = currentWord.input = currentWord.input.slice(0, stringIndex.value)\n    checkCursorPosition()\n    focusMobileInput()\n  }\n}\n\nfunction showSentence(i1: number = sectionIndex.value, i2: number = sentenceIndex.value, i3: number = wordIndex.value) {\n  hoverIndex.value = { sectionIndex: i1, sentenceIndex: i2, wordIndex: i3 }\n}\n\nfunction hideSentence() {\n  hoverIndex.value = { sectionIndex: -1, sentenceIndex: -1, wordIndex: -1 }\n}\n\nfunction jump(i, j, w, sentence?) {\n  sectionIndex.value = i\n  sentenceIndex.value = j\n  //todo 这里有可能是符号，要处理下\n  wordIndex.value = w\n  stringIndex.value = 0\n  input.value = wrong.value = ''\n  isEnd.value = isSpace.value = false\n  props.article.sections.map((v, i) => {\n    v.map((w, j) => {\n      w.words.map((v, k) => {\n        if (i <= sectionIndex.value && j <= sentenceIndex.value && k < wordIndex.value) {\n          v.input = v.word\n        } else {\n          v.input = ''\n        }\n      })\n    })\n  })\n  if (sentence) {\n    emit('play', { sentence: sentence, handle: false })\n  }\n}\n\nfunction onContextMenu(e: MouseEvent, sentence: Sentence, i, j, w) {\n  const selectedText = window.getSelection().toString()\n  console.log(selectedText)\n  //prevent the browser's default menu\n  e.preventDefault()\n  //show your menu\n  ContextMenu.showContextMenu({\n    x: e.x,\n    y: e.y,\n    items: [\n      {\n        label: $t('collect_word'),\n        onClick: () => {\n          let word = props.article.sections[i][j].words[w]\n          let text = word.word\n          let doc = nlp(text)\n          // 优先判断是不是动词\n          if (doc.verbs().found) {\n            text = doc.verbs().toInfinitive().text()\n          }\n          // 如果是名词（复数 → 单数）\n          if (doc.nouns().found) {\n            text = doc.nouns().toSingular().text()\n          }\n          if (!text.length) text = word.word\n          console.log('text', text)\n          toggleWordCollect(getDefaultWord({ word: text, id: nanoid() }))\n          Toast.success(text + ' ' + $t('add_success'))\n        },\n      },\n      {\n        label: $t('copy'),\n        children: [\n          {\n            label: $t('copy_sentence'),\n            onClick: () => {\n              navigator.clipboard.writeText(sentence.text).then(r => {\n                Toast.success($t('copied'))\n              })\n            },\n          },\n          {\n            label: $t('copy_word'),\n            onClick: () => {\n              let word = props.article.sections[i][j].words[w]\n              navigator.clipboard.writeText(word.word).then(r => {\n                Toast.success($t('copied'))\n              })\n            },\n          },\n        ],\n      },\n      {\n        label: $t('start_from_here'),\n        onClick: () => {\n          jump(i, j, w + 1, sentence)\n        },\n      },\n      {\n        label: $t('play_sentence'),\n        onClick: () => {\n          emit('play', { sentence: sentence, handle: true })\n        },\n      },\n      {\n        label: $t('grammar_analysis'),\n        onClick: () => {\n          navigator.clipboard.writeText(sentence.text).then(r => {\n            Toast.success($t('copied_open_grammar'))\n            setTimeout(() => {\n              window.open('https://enpuz.com/')\n            }, 1000)\n          })\n        },\n      },\n      {\n        label: $t('youdao_translate'),\n        children: [\n          {\n            label: $t('translate_word'),\n            onClick: () => {\n              let word = props.article.sections[i][j].words[w]\n              window.open(`https://www.youdao.com/result?word=${word.word}&lang=en`, '_blank')\n            },\n          },\n          {\n            label: $t('translate_sentence'),\n            onClick: () => {\n              window.open(`https://www.youdao.com/result?word=${sentence.text}&lang=en`, '_blank')\n            },\n          },\n        ],\n      },\n    ],\n  })\n}\n\nonMounted(() => {\n  emitter.on(EventKey.resetWord, () => {\n    wrong.value = input.value = ''\n  })\n  emitter.on(EventKey.onTyping, onTyping)\n  if (isMob) {\n    focusMobileInput()\n  }\n})\n\nonUnmounted(() => {\n  emitter.off(EventKey.resetWord)\n  emitter.off(EventKey.onTyping, onTyping)\n})\n\nuseEvents([\n  [ShortcutKey.KnowWord, onTyping],\n  [ShortcutKey.UnknownWord, onTyping],\n])\n\ndefineExpose({\n  showSentence,\n  play,\n  del,\n  hideSentence,\n  nextSentence,\n  init,\n  getIndex: () => {\n    return {\n      sectionIndex: sectionIndex.value,\n      sentenceIndex: sentenceIndex.value,\n      wordIndex: wordIndex.value,\n      stringIndex: stringIndex.value,\n    }\n  },\n})\n\nfunction isCurrent(i: number, j: number, w: number) {\n  return `${i}${j}${w}` === currentIndex.value\n}\n\nlet showQuestions = _ref(false)\n\nconst currentPractice = inject('currentPractice', [])\n</script>\n\n<template>\n  <div class=\"typing-article\" ref=\"typeArticleRef\" @click=\"focusMobileInput\">\n    <input\n      v-if=\"isMob\"\n      ref=\"mobileInputRef\"\n      class=\"mobile-input\"\n      type=\"text\"\n      inputmode=\"text\"\n      autocomplete=\"off\"\n      autocorrect=\"off\"\n      autocapitalize=\"none\"\n      @beforeinput=\"handleMobileBeforeInput\"\n      @input=\"handleMobileInput\"\n    />\n    <header class=\"pt-10 pb-6\">\n      <div class=\"text-center\">\n        <span class=\"text-3xl\">{{ store.sbook.lastLearnIndex + 1 }}. </span>\n        <span class=\"text-3xl\">{{ props.article?.title ?? '' }}</span>\n        <span class=\"ml-6 text-2xl\" v-if=\"settingStore.translate\">{{ props.article?.titleTranslate }}</span>\n      </div>\n\n      <div class=\"mt-2 text-2xl\" v-if=\"props.article?.question?.text\">\n        <div>Question: {{ props.article?.question?.text }}</div>\n        <div class=\"text-xl color-translate-second\" v-if=\"settingStore.translate\">\n          问题: {{ props.article?.question?.translate }}\n        </div>\n      </div>\n    </header>\n\n    <div\n      id=\"article-content\"\n      class=\"article-content\"\n      :class=\"[settingStore.translate && 'tall', settingStore.dictation && 'dictation']\"\n      ref=\"articleWrapperRef\"\n    >\n      <article>\n        <div class=\"section\" v-for=\"(section, indexI) in props.article.sections\">\n          <span class=\"sentence\" v-for=\"(sentence, indexJ) in section\">\n            <span\n              v-for=\"(word, indexW) in sentence.words\"\n              @contextmenu=\"e => onContextMenu(e, sentence, indexI, indexJ, indexW)\"\n              class=\"word\"\n              :class=\"[\n                sectionIndex > indexI\n                  ? 'wrote'\n                  : sectionIndex >= indexI && sentenceIndex > indexJ\n                    ? 'wrote'\n                    : sectionIndex >= indexI && sentenceIndex >= indexJ && wordIndex > indexW\n                      ? 'wrote'\n                      : sectionIndex >= indexI &&\n                          sentenceIndex >= indexJ &&\n                          wordIndex >= indexW &&\n                          stringIndex >= word.word.length\n                        ? 'wrote'\n                        : '',\n                indexW === 0 && `word${indexI}-${indexJ}`,\n              ]\"\n            >\n              <span\n                class=\"word-wrap\"\n                @mouseenter=\"settingStore.allowWordTip && showSentence(indexI, indexJ, indexW)\"\n                @mouseleave=\"hideSentence\"\n                :class=\"[\n                  hoverIndex.sectionIndex === indexI &&\n                    hoverIndex.sentenceIndex === indexJ &&\n                    hoverIndex.wordIndex === indexW &&\n                    'hover-show',\n                  word.type === PracticeArticleWordType.Number && 'font-family text-xl',\n                ]\"\n                @click=\"playWordAudio(word.word)\"\n              >\n                <TypingWord :word=\"word\" :is-typing=\"true\" v-if=\"isCurrent(indexI, indexJ, indexW) && !isSpace\" />\n                <TypingWord :word=\"word\" :is-typing=\"false\" v-else />\n                <span class=\"border-bottom\" v-if=\"settingStore.dictation\"></span>\n              </span>\n              <Space\n                v-if=\"word.nextSpace\"\n                class=\"word-end\"\n                :is-wrong=\"false\"\n                :is-wait=\"isCurrent(indexI, indexJ, indexW) && isSpace\"\n                :is-shake=\"isCurrent(indexI, indexJ, indexW) && isSpace && wrong !== ''\"\n              />\n            </span>\n            <span class=\"sentence-translate-mobile\" v-if=\"isMob && settingStore.translate && sentence.translate\">\n              {{ sentence.translate }}\n            </span>\n          </span>\n        </div>\n      </article>\n      <div class=\"translate\" v-show=\"settingStore.translate\">\n        <template v-for=\"(v, indexI) in props.article.sections\">\n          <div\n            class=\"row\"\n            :class=\"[\n              `translate${indexI + '-' + indexJ}`,\n              sectionIndex > indexI ? 'wrote' : sectionIndex >= indexI && sentenceIndex > indexJ ? 'wrote' : '',\n            ]\"\n            v-for=\"(item, indexJ) in v\"\n          >\n            <span class=\"space\"></span>\n            <Transition name=\"fade\">\n              <span class=\"text\" v-if=\"item.translate\">{{ item.translate }}</span>\n            </Transition>\n          </div>\n        </template>\n      </div>\n      <div class=\"cursor\" v-if=\"!isEnd\" :style=\"{ top: cursor.top + 'px', left: cursor.left + 'px' }\"></div>\n    </div>\n\n    <div class=\"options flex justify-center\" v-if=\"isEnd\">\n      <BaseButton @click=\"emit('replay')\">{{ $t('restart_practice') }} </BaseButton>\n      <BaseButton v-if=\"store.sbook.lastLearnIndex < store.sbook.articles.length - 1\" @click=\"emit('next')\"\n        >{{ $t('next_article') }}\n      </BaseButton>\n    </div>\n\n    <div class=\"font-family text-base pr-2 mb-50 mt-10\" v-if=\"currentPractice.length && isEnd\">\n      <div class=\"text-2xl font-bold\">{{ $t('learning_record') }}</div>\n      <div class=\"mt-1 mb-3\">{{ $t('total_learning_time') }}：{{ msToHourMinute(total(currentPractice, 'spend')) }}</div>\n      <div\n        class=\"item border border-item border-solid mt-2 p-2 bg-[var(--bg-history)] rounded-md flex justify-between\"\n        :class=\"i === currentPractice.length - 1 && 'color-red!'\"\n        v-for=\"(item, i) in currentPractice\"\n      >\n        <span :class=\"i === currentPractice.length - 1 ? 'color-red' : 'color-gray'\"\n          >{{ i === currentPractice.length - 1 ? $t('current') : i + 1 }}.&nbsp;&nbsp;{{ _dateFormat(item.startDate) }}</span\n        >\n        <span>{{ msToHourMinute(item.spend) }}</span>\n      </div>\n    </div>\n\n    <template v-if=\"false\">\n      <div class=\"center\">\n        <BaseButton @click=\"showQuestions = !showQuestions\">{{ $t('show_questions') }}</BaseButton>\n      </div>\n      <div class=\"toggle\" v-if=\"showQuestions\">\n        <QuestionForm :questions=\"article.questions\" :duration=\"300\" :immediateFeedback=\"false\" :randomize=\"true\" />\n      </div>\n    </template>\n  </div>\n</template>\n\n<style scoped lang=\"scss\">\n.wrote {\n  color: grey;\n}\n\n$translate-lh: 3.2;\n$article-lh: 2.4;\n\n.typing-article {\n  color: var(--color-article);\n  width: var(--article-width);\n  font-size: 1.6rem;\n  margin-bottom: 20rem;\n\n  .mobile-input {\n    position: absolute;\n    opacity: 0;\n    pointer-events: none;\n    height: 0;\n    width: 0;\n  }\n\n  .article-content {\n    position: relative;\n  }\n\n  .dictation {\n    .border-bottom {\n      display: inline-block !important;\n    }\n    .translate {\n      color: var(--color-reverse-black);\n    }\n  }\n\n  .tall {\n    article {\n      line-height: $article-lh;\n    }\n  }\n\n  article {\n    word-break: keep-all;\n    word-wrap: break-word;\n    white-space: pre-wrap;\n    font-family: var(--en-article-family);\n\n    .wrote,\n    .hover-show {\n      :deep(.hide) {\n        opacity: 1 !important;\n      }\n\n      .border-bottom {\n        display: none !important;\n      }\n    }\n\n    .hover-show {\n      border-radius: 0.2rem;\n      //background: var(--color-select-bg);\n      @apply bg-green!;\n\n      :deep(.hide) {\n        opacity: 1 !important;\n      }\n    }\n\n    .section {\n      margin-bottom: 1.5rem;\n\n      .sentence {\n        transition: all 0.3s;\n      }\n\n      .word {\n        display: inline-block;\n\n        .word-wrap {\n          position: relative;\n          transition: background-color 0.3s;\n        }\n\n        .border-bottom {\n          position: absolute;\n          width: 100%;\n          height: 100%;\n          left: 0;\n          top: 0;\n          border-bottom: 2px solid var(--color-article);\n          display: none;\n          transform: translateY(-0.2rem);\n        }\n      }\n    }\n  }\n\n  .translate {\n    pointer-events: none;\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: 100%;\n    width: 100%;\n    font-size: 1.2rem;\n    line-height: $translate-lh;\n    letter-spacing: 0.2rem;\n    font-family: var(--zh-article-family);\n    font-weight: bold;\n    color: #818181;\n\n    .row {\n      position: absolute;\n      left: 0;\n      width: 100%;\n      opacity: 0;\n      transition: all 0.3s;\n\n      .space {\n        transition: all 0.3s;\n        display: inline-block;\n      }\n    }\n  }\n}\n\n.sentence-translate-mobile {\n  display: none;\n}\n\n// 移动端适配\n@media (max-width: 768px) {\n  .typing-article {\n    width: 100vw;\n    max-width: 100%;\n    padding: 1rem 0.5rem;\n\n    // 标题优化\n    header {\n      .title {\n        font-size: 1.2rem;\n        line-height: 1.4;\n        word-break: break-word;\n        margin-bottom: 1rem;\n\n        .font-family {\n          font-size: 1rem;\n        }\n      }\n\n      .titleTranslate {\n        font-size: 0.9rem;\n        margin-top: 0.5rem;\n        opacity: 0.8;\n      }\n    }\n\n    // 句子显示优化\n    .article-content {\n      article {\n        .section {\n          margin-bottom: 1rem;\n\n          .sentence {\n            font-size: 1rem;\n            line-height: 1.6;\n            word-break: break-word;\n            margin-bottom: 0.5rem;\n\n            .word {\n              .word-wrap {\n                padding: 0.1rem 0.05rem;\n                min-height: 24px;\n                display: inline-flex;\n                align-items: center;\n              }\n            }\n          }\n        }\n      }\n    }\n\n    .sentence-translate-mobile {\n      display: block;\n      margin-top: 0.4rem;\n      font-size: 0.9rem;\n      line-height: 1.4;\n      color: var(--color-font-3);\n      font-family: var(--zh-article-family);\n      word-break: break-word;\n    }\n\n    // 翻译区域优化\n    .translate {\n      display: none;\n    }\n\n    // 问答表单优化\n    .question-form {\n      padding: 0.5rem;\n\n      .base-button {\n        width: 100%;\n        min-height: 48px;\n        margin-top: 0.5rem;\n      }\n    }\n  }\n}\n\n@media (max-width: 480px) {\n  .typing-article {\n    padding: 0.5rem 0.3rem;\n\n    header {\n      .title {\n        font-size: 1rem;\n\n        .font-family {\n          font-size: 0.9rem;\n        }\n      }\n\n      .titleTranslate {\n        font-size: 0.8rem;\n      }\n    }\n\n    .article-content {\n      article {\n        .section {\n          .sentence {\n            font-size: 0.9rem;\n            line-height: 1.5;\n          }\n        }\n      }\n    }\n\n    .sentence-translate-mobile {\n      font-size: 0.85rem;\n      line-height: 1.35;\n    }\n  }\n}\n</style>\n","<script setup lang=\"ts\">import { ref as _ref } from 'vue';\n\nimport { addStat, setUserDictProp } from '@/apis'\nimport Toast from '@/components/base/toast/Toast.ts'\nimport Tooltip from '@/components/base/Tooltip.vue'\nimport BaseIcon from '@/components/BaseIcon.vue'\nimport ConflictNotice from '@/components/ConflictNotice.vue'\nimport ArticleList from '@/components/list/ArticleList.vue'\nimport Panel from '@/components/Panel.vue'\nimport PracticeLayout from '@/components/PracticeLayout.vue'\nimport SettingDialog from '@/components/setting/SettingDialog.vue'\nimport { AppEnv, DICT_LIST, LIB_JS_URL, TourConfig } from '@/config/env.ts'\nimport { genArticleSectionData, usePlaySentenceAudio } from '@/hooks/article.ts'\nimport { useArticleOptions } from '@/hooks/dict.ts'\nimport { useDisableEventListener, useOnKeyboardEventListener, useStartKeyboardEventListener } from '@/hooks/event.ts'\nimport useTheme from '@/hooks/theme.ts'\nimport ArticleAudio from '~/components/article/ArticleAudio.vue'\nimport EditSingleArticleModal from '~/components/article/EditSingleArticleModal.vue'\nimport TypingArticle from '~/components/article/TypingArticle.vue'\nimport { useBaseStore } from '@/stores/base.ts'\nimport { usePracticeStore } from '@/stores/practice.ts'\nimport { useRuntimeStore } from '@/stores/runtime.ts'\nimport { useSettingStore } from '@/stores/setting.ts'\nimport { getDefaultArticle, getDefaultDict, getDefaultWord } from '@/types/func.ts'\nimport type { Article, ArticleItem, ArticleWord, Dict, Statistics, Word } from '@/types/types.ts'\nimport { _getDictDataByUrl, _nextTick, cloneDeep, isMobile, loadJsLib, msToMinute, resourceWrap, total } from '@/utils'\nimport { getPracticeArticleCache, setPracticeArticleCache } from '@/utils/cache.ts'\nimport { emitter, EventKey, useEvents } from '@/utils/eventBus.ts'\nimport { computed, onMounted, onUnmounted, provide, watch } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport { nanoid } from 'nanoid'\nimport { DictType, PracticeArticleWordType, ShortcutKey } from '@/types/enum.ts'\n\nconst store = useBaseStore()\nconst runtimeStore = useRuntimeStore()\nconst settingStore = useSettingStore()\nconst statStore = usePracticeStore()\nconst { toggleTheme } = useTheme()\n\nlet articleData = _ref({\n  list: [],\n  article: getDefaultArticle(),\n})\nlet showEditArticle = _ref(false)\nlet typingArticleRef = _ref<any>()\nlet showConflictNotice = _ref(false)\nlet loading = _ref<boolean>(false)\nlet allWrongWords = new Set()\nlet editArticle = _ref<Article>(getDefaultArticle())\nlet audioRef = _ref<HTMLAudioElement>()\nlet timer = _ref(0)\nlet isFocus = true\nlet isTyped = _ref(false)\n\nfunction write() {\n  // console.log('write')\n  settingStore.dictation = true\n  repeat()\n}\n\n//TODO 需要判断是否已忽略\n//todo 使用场景是？\nfunction repeat() {\n  // console.log('repeat')\n  getCurrentPractice()\n}\n\nfunction prev() {\n  // console.log('next')\n  if (store.sbook.lastLearnIndex === 0) {\n    Toast.warning('已经在第一章了~')\n  } else {\n    store.sbook.lastLearnIndex--\n    getCurrentPractice()\n  }\n}\n\nconst toggleShowTranslate = () => (settingStore.translate = !settingStore.translate)\nconst toggleDictation = () => (settingStore.dictation = !settingStore.dictation)\nconst togglePanel = () => (settingStore.showPanel = !settingStore.showPanel)\nconst skip = () => typingArticleRef.value?.nextSentence()\nconst collect = () => toggleArticleCollect(articleData.value.article)\nconst shortcutKeyEdit = () => edit()\n\nfunction toggleConciseMode() {\n  settingStore.showToolbar = !settingStore.showToolbar\n  settingStore.showPanel = settingStore.showToolbar\n}\n\nfunction next() {\n  setPracticeArticleCache(null)\n  if (store.sbook.lastLearnIndex >= articleData.value.list.length - 1) {\n    store.sbook.complete = true\n    store.sbook.lastLearnIndex = 0\n    //todo 这里应该弹窗\n  } else store.sbook.lastLearnIndex++\n  getCurrentPractice()\n}\n\nconst router = useRouter()\nconst route = useRoute()\n\nasync function init() {\n  // console.log('load好了开始加载')\n  let dict = getDefaultDict()\n  let dictId = route.params.id\n  if (dictId) {\n    //先在自己的词典列表里面找，如果没有再在资源列表里面找\n    dict = store.article.bookList.find(v => v.id == dictId)\n    let r = await fetch(resourceWrap(DICT_LIST.ARTICLE.ALL))\n    let book_list = await r.json()\n    if (!dict) dict = book_list.find(v => v.id === dictId) as Dict\n    if (dict && dict.id) {\n      //如果是不是自定义词典，就请求数据\n      if (!dict.custom) dict = await _getDictDataByUrl(dict, DictType.article)\n      if (!dict.articles.length) {\n        router.push('/articles')\n        return Toast.warning('没有文章可学习！')\n      }\n      await store.changeBook(dict)\n      articleData.value.list = cloneDeep(store.sbook.articles)\n      getCurrentPractice()\n      loading.value = false\n    } else {\n      router.push('/articles')\n    }\n  } else {\n    router.push('/articles')\n  }\n}\n\nconst initAudio = () => {\n  _nextTick(() => {\n    if (import.meta.server) return\n    audioRef.value.volume = settingStore.articleSoundVolume / 100\n    audioRef.value.playbackRate = settingStore.articleSoundSpeed\n  })\n}\n\nconst handleVolumeUpdate = (volume: number) => {\n  settingStore.articleSoundVolume = volume\n}\n\nconst handleSpeedUpdate = (speed: number) => {\n  settingStore.articleSoundSpeed = speed\n}\n\nwatch(\n  [() => store.load, () => loading.value],\n  ([a, b]) => {\n    if (a && b) init()\n  },\n  { immediate: true }\n)\n\nwatch(\n  () => articleData.value?.article?.id,\n  id => {\n    if (id) {\n      _nextTick(async () => {\n        const Shepherd = await loadJsLib('Shepherd', LIB_JS_URL.SHEPHERD)\n        const tour = new Shepherd.Tour(TourConfig)\n        tour.on('cancel', () => {\n          localStorage.setItem('tour-guide', '1')\n        })\n        tour.addStep({\n          id: 'step8',\n          text: '这里可以练习文章，只需要按下键盘上对应的按键即可，没有输入框！',\n          attachTo: {\n            element: '#article-content',\n            on: 'auto',\n          },\n          buttons: [\n            {\n              text: `关闭`,\n              action() {\n                settingStore.first = false\n                tour.next()\n                setTimeout(() => {\n                  showConflictNotice.value = true\n                }, 1500)\n              },\n            },\n          ],\n        })\n        const r = localStorage.getItem('tour-guide')\n        if (settingStore.first && !r && !isMobile()) {\n          tour.start()\n        }\n      }, 500)\n    }\n  }\n)\n\nwatch(\n  () => settingStore.$state,\n  n => {\n    initAudio()\n  },\n  { immediate: true, deep: true }\n)\n\n\nonActivated(() => {\n  console.log('onActivated')\n})\nonMounted(() => {\n  console.log('onMounted')\n  if (store.sbook?.articles?.length) {\n    articleData.value.list = cloneDeep(store.sbook.articles)\n    getCurrentPractice()\n  } else {\n    loading.value = true\n  }\n  if (route.query.guide) {\n    showConflictNotice.value = false\n  } else {\n    showConflictNotice.value = true\n  }\n})\n\nfunction unmount() {\n  console.log('onUnmounted')\n  runtimeStore.disableEventListener = false\n  let cache = getPracticeArticleCache()\n  //如果有缓存，则更新花费的时间；因为用户不输入不会保存数据\n  if (cache) {\n    cache.statStoreData.spend = statStore.spend\n    setPracticeArticleCache(cache)\n  }\n  clearInterval(timer.value)\n}\n\nonUnmounted(unmount)\n\n\nonDeactivated(unmount)\n\nuseStartKeyboardEventListener()\nuseDisableEventListener(() => loading.value)\n\nfunction setArticle(val: Article) {\n  statStore.wrong = 0\n  statStore.total = 0\n  statStore.startDate = Date.now()\n  statStore.spend = 0\n  allWrongWords = new Set()\n  articleData.value.list[store.sbook.lastLearnIndex] = val\n  articleData.value.article = val\n  let ignoreList = [store.allIgnoreWords, store.knownWords][settingStore.ignoreSimpleWord ? 0 : 1]\n  articleData.value.article.sections.map((v, i) => {\n    v.map(w => {\n      w.words.map(s => {\n        if (!ignoreList.includes(s.word.toLowerCase()) && s.type === PracticeArticleWordType.Word) {\n          statStore.total++\n        }\n      })\n    })\n  })\n\n  isTyped.value = false\n  clearInterval(timer.value)\n  timer.value = setInterval(() => {\n    if (isFocus) {\n      statStore.spend += 1000\n    }\n  }, 1000)\n\n  _nextTick(typingArticleRef.value?.init)\n}\n\nasync function complete() {\n  clearInterval(timer.value)\n  //延时删除缓存，因为可能还有输入，需要保存\n  setTimeout(() => {\n    setPracticeArticleCache(null)\n  }, 1500)\n\n  //todo 有空了改成实时保存\n  let data: Partial<Statistics> & { title: string; articleId: number } = {\n    articleId: articleData.value.article.id,\n    title: articleData.value.article.title,\n    spend: statStore.spend,\n    //修正计时\n    startDate: Date.now() - statStore.spend,\n    total: statStore.total,\n    wrong: statStore.wrong,\n  }\n\n  let reportData = {\n    name: store.sbook.name,\n    index: store.sbook.lastLearnIndex,\n    custom: store.sbook.custom,\n    complete: store.sbook.complete,\n    title: articleData.value.article.title,\n    spend: Number(statStore.spend / 1000 / 60).toFixed(1),\n    s: '',\n  }\n  reportData.s = `name:${store.sbook.name},title:${store.sbook.lastLearnIndex}.${data.title},spend:${Number(statStore.spend / 1000 / 60).toFixed(1)}`\n  window.umami?.track('endStudyArticle', reportData)\n\n  if (store.sbook.lastLearnIndex >= store.sbook.length - 1) {\n    store.sdict.complete = true\n  }\n  if (AppEnv.CAN_REQUEST) {\n    let res = await addStat({\n      ...data,\n      type: 'article',\n      complete: store.sdict.complete,\n    })\n    if (!res.success) {\n      Toast.error(res.msg)\n    }\n  }\n\n  store.sbook.statistics.push(data as any)\n\n  //重置\n  statStore.wrong = 0\n  statStore.startDate = Date.now()\n}\n\nfunction getCurrentPractice() {\n  emitter.emit(EventKey.resetWord)\n  let currentArticle = articleData.value.list[store.sbook.lastLearnIndex]\n  let article = getDefaultArticle(currentArticle)\n  if (article.sections.length) {\n    setArticle(article)\n  } else {\n    genArticleSectionData(article)\n    setArticle(article)\n  }\n}\n\nfunction saveArticle(val: Article) {\n  console.log('saveArticle', val, JSON.stringify(val.lrcPosition))\n  console.log('saveArticle', val.textTranslate)\n  showEditArticle.value = false\n  let rIndex = store.sbook.articles.findIndex(v => v.id === val.id)\n  if (rIndex > -1) {\n    store.sbook.articles[rIndex] = cloneDeep(val)\n  }\n  setArticle(val)\n  store.sbook.custom = true\n  if (!store.sbook.id.includes('_custom')) {\n    store.sbook.id += '_custom_' + nanoid(6)\n  }\n}\n\nfunction edit(val: Article = articleData.value.article) {\n  editArticle.value = val\n  showEditArticle.value = true\n}\n\nfunction wrong(word: Word) {\n  let temp = word.word.toLowerCase()\n  //过滤简单词\n  if (settingStore.ignoreSimpleWord) {\n    if (store.simpleWords.includes(temp)) return\n  }\n  if (!allWrongWords.has(temp)) {\n    allWrongWords.add(temp)\n    statStore.wrong++\n  }\n\n  if (!store.wrong.words.find((v: Word) => v.word.toLowerCase() === temp)) {\n    store.wrong.words.push(getDefaultWord(word))\n    store.wrong.length = store.wrong.words.length\n  }\n}\n\nfunction nextWord(word: ArticleWord) {\n  if (!store.allIgnoreWords.includes(word.word.toLowerCase()) && word.type === PracticeArticleWordType.Word) {\n    statStore.inputWordNumber++\n  }\n}\n\nasync function changeArticle(val: ArticleItem) {\n  setPracticeArticleCache(null)\n  let rIndex = articleData.value.list.findIndex(v => v.id === val.item.id)\n  if (rIndex > -1) {\n    store.sbook.lastLearnIndex = rIndex\n    getCurrentPractice()\n\n    if (AppEnv.CAN_REQUEST) {\n      let res = await setUserDictProp(null, store.sbook)\n      if (!res.success) {\n        Toast.error(res.msg)\n      }\n    }\n  }\n  initAudio()\n}\n\nconst handlePlayNext = (nextArticle: Article) => {\n  let rIndex = articleData.value.list.findIndex(v => v.id === nextArticle.id)\n  if (rIndex > -1) {\n    store.sbook.lastLearnIndex = rIndex\n    getCurrentPractice()\n  }\n}\n\nconst { isArticleCollect, toggleArticleCollect } = useArticleOptions()\n\nfunction play() {\n  typingArticleRef.value?.play()\n}\n\nfunction show() {\n  typingArticleRef.value?.showSentence()\n}\n\nfunction onKeyUp() {\n  typingArticleRef.value?.hideSentence()\n}\n\nasync function onKeyDown(e: KeyboardEvent) {\n  switch (e.key) {\n    case 'Backspace':\n      typingArticleRef.value.del()\n      break\n  }\n}\n\nuseOnKeyboardEventListener(onKeyDown, onKeyUp)\n\nuseEvents([\n  [EventKey.write, write],\n  [EventKey.repeatStudy, repeat],\n  [EventKey.continueStudy, next],\n\n  [ShortcutKey.PreviousChapter, prev],\n  [ShortcutKey.RepeatChapter, repeat],\n  [ShortcutKey.DictationChapter, write],\n  [ShortcutKey.ToggleShowTranslate, toggleShowTranslate],\n  [ShortcutKey.ToggleDictation, toggleDictation],\n  [ShortcutKey.ToggleTheme, toggleTheme],\n  [ShortcutKey.ToggleConciseMode, toggleConciseMode],\n  [ShortcutKey.TogglePanel, togglePanel],\n  [ShortcutKey.NextChapter, next],\n  [ShortcutKey.PlayWordPronunciation, play],\n  [ShortcutKey.ShowWord, show],\n  [ShortcutKey.Next, skip],\n  [ShortcutKey.ToggleCollect, collect],\n  [ShortcutKey.EditArticle, shortcutKeyEdit],\n])\n\nonMounted(() => {\n  document.addEventListener('visibilitychange', () => {\n    isFocus = !document.hidden\n  })\n})\n\nonUnmounted(() => {\n  timer.value && clearInterval(timer.value)\n})\n\nconst { playSentenceAudio } = usePlaySentenceAudio()\n\nfunction play2(e) {\n  _nextTick(() => {\n    if (settingStore.articleSound || e.handle) {\n      playSentenceAudio(e.sentence, audioRef.value)\n    }\n  })\n}\n\nconst currentPractice = computed(() => {\n  if (store.sbook.statistics?.length) {\n    return store.sbook.statistics.filter((v: any) => v.title === articleData.value.article.title)\n  }\n  return []\n})\n\nprovide('currentPractice', currentPractice)\n</script>\n<template>\n  <PracticeLayout v-loading=\"loading\" panelLeft=\"var(--article-panel-margin-left)\">\n    <template v-slot:practice>\n      <TypingArticle\n        ref=\"typingArticleRef\"\n        @wrong=\"wrong\"\n        @next=\"next\"\n        @nextWord=\"nextWord\"\n        @play=\"play2\"\n        @replay=\"setArticle(articleData.article)\"\n        @complete=\"complete\"\n        :article=\"articleData.article\"\n      />\n    </template>\n    <template v-slot:panel>\n      <Panel :style=\"{ width: 'var(--article-panel-width)' }\">\n        <template v-slot:title>\n          <span>{{ store.sbook.name }} ({{ store.sbook.lastLearnIndex + 1 }} / {{ articleData.list.length }})</span>\n        </template>\n        <div class=\"panel-page-item pl-4\">\n          <ArticleList\n            :isActive=\"settingStore.showPanel\"\n            :static=\"false\"\n            :show-translate=\"settingStore.translate\"\n            @click=\"changeArticle\"\n            :active-id=\"articleData.article.id ?? ''\"\n            :list=\"articleData.list\"\n          >\n          </ArticleList>\n        </div>\n      </Panel>\n    </template>\n    <template v-slot:footer>\n      <div class=\"footer pb-3\">\n        <div class=\"center h-10\">\n          <Tooltip :title=\"settingStore.showToolbar ? '收起' : '展开'\">\n            <IconFluentChevronLeft20Filled\n              @click=\"settingStore.showToolbar = !settingStore.showToolbar\"\n              :class=\"!settingStore.showToolbar && 'down'\"\n              color=\"#999\"\n              class=\"arrow\"\n            />\n          </Tooltip>\n        </div>\n        <div class=\"bottom\">\n          <div class=\"flex justify-between items-center gap-2\">\n            <div class=\"stat\">\n              <div class=\"row\">\n                <div class=\"num\">{{ currentPractice.length }}次/{{ msToMinute(total(currentPractice, 'spend')) }}</div>\n                <div class=\"line\"></div>\n                <div class=\"name\">记录</div>\n              </div>\n              <div class=\"row\">\n                <!--                <div class=\"num\">{{statStore.spend }}分钟</div>-->\n                <div class=\"num\">{{ Math.floor(statStore.spend / 1000 / 60) }}分钟</div>\n                <div class=\"line\"></div>\n                <div class=\"name\">时间</div>\n              </div>\n              <div class=\"row\">\n                <div class=\"num center gap-1\">\n                  {{ statStore.total }}\n                  <Tooltip>\n                    <IconFluentQuestionCircle20Regular width=\"18\" />\n                    <template #reference>\n                      <div>\n                        统计词数{{ settingStore.ignoreSimpleWord ? '不包含' : '包含' }}简单词，不包含已掌握\n                        <div>简单词可在设置 -> 练习设置 -> 简单词过滤中修改</div>\n                      </div>\n                    </template>\n                  </Tooltip>\n                </div>\n                <div class=\"line\"></div>\n                <div class=\"name\">单词总数</div>\n              </div>\n            </div>\n            <ArticleAudio\n              ref=\"audioRef\"\n              :article=\"articleData.article\"\n              @update-speed=\"handleSpeedUpdate\"\n              @update-volume=\"handleVolumeUpdate\"\n            ></ArticleAudio>\n            <div class=\"flex flex-col items-center justify-center gap-1\">\n              <div class=\"flex gap-2 center\">\n                <SettingDialog type=\"article\" />\n\n                <BaseIcon :title=\"`下一句(${settingStore.shortcutKeyMap[ShortcutKey.Next]})`\" @click=\"skip\">\n                  <IconFluentArrowBounce20Regular class=\"transform-rotate-180\" />\n                </BaseIcon>\n                <BaseIcon\n                  :title=\"`播放当前句子(${settingStore.shortcutKeyMap[ShortcutKey.PlayWordPronunciation]})`\"\n                  @click=\"play\"\n                >\n                  <IconFluentReplay20Regular />\n                </BaseIcon>\n                <BaseIcon\n                  @click=\"settingStore.dictation = !settingStore.dictation\"\n                  :title=\"`开关默写模式(${settingStore.shortcutKeyMap[ShortcutKey.ToggleDictation]})`\"\n                >\n                  <IconFluentEyeOff16Regular v-if=\"settingStore.dictation\" />\n                  <IconFluentEye16Regular v-else />\n                </BaseIcon>\n\n                <BaseIcon\n                  :title=\"`开关释义显示(${settingStore.shortcutKeyMap[ShortcutKey.ToggleShowTranslate]})`\"\n                  @click=\"settingStore.translate = !settingStore.translate\"\n                >\n                  <IconPhTranslate v-if=\"settingStore.translate\" />\n                  <IconFluentTranslateOff16Regular v-else />\n                </BaseIcon>\n\n                <!--              <BaseIcon-->\n                <!--                  :title=\"`编辑(${settingStore.shortcutKeyMap[ShortcutKey.EditArticle]})`\"-->\n                <!--                  icon=\"tabler:edit\"-->\n                <!--                  @click=\"emitter.emit(ShortcutKey.EditArticle)\"-->\n                <!--              />-->\n                <BaseIcon\n                  @click=\"settingStore.showPanel = !settingStore.showPanel\"\n                  :title=\"`面板(${settingStore.shortcutKeyMap[ShortcutKey.TogglePanel]})`\"\n                >\n                  <IconFluentTextListAbcUppercaseLtr20Regular />\n                </BaseIcon>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </template>\n  </PracticeLayout>\n\n  <EditSingleArticleModal v-model=\"showEditArticle\" :article=\"editArticle\" @save=\"saveArticle\" />\n\n  <ConflictNotice v-if=\"showConflictNotice\" />\n</template>\n\n<style scoped lang=\"scss\">\n.footer {\n  width: var(--article-toolbar-width);\n  @apply bg-primary;\n\n  .bottom {\n    @apply relative w-full box-border rounded-lg bg-second shadow-lg z-2;\n    padding: 0.5rem var(--space);\n    border: 1px solid var(--color-item-border);\n\n    .stat {\n      margin-top: 0.5rem;\n      display: flex;\n      justify-content: space-around;\n      gap: var(--stat-gap);\n\n      .row {\n        @apply flex flex-col items-center gap-1 text-gray-500;\n\n        .num,\n        .name {\n          word-break: keep-all;\n          padding: 0 0.4rem;\n        }\n\n        .line {\n          height: 1px;\n          width: 100%;\n          background: var(--color-sub-gray);\n        }\n      }\n    }\n  }\n\n  .arrow {\n    cursor: pointer;\n    transition: all 0.5s;\n    transform: rotate(-90deg);\n    padding: 0.5rem;\n    font-size: 1.2rem;\n\n    &.down {\n      transform: rotate(90deg);\n    }\n  }\n}\n\n// 移动端适配\n@media (max-width: 768px) {\n  // 优化练习区域布局\n  .practice-article {\n    padding-top: 3rem; // 为固定标题留出空间\n  }\n\n  // 优化标题区域\n  .typing-article {\n    header {\n      position: fixed;\n      top: 4.5rem; // 避开顶部导航栏\n      left: 0;\n      right: 0;\n      z-index: 100;\n      background: var(--bg-color);\n      padding: 0.5rem 1rem;\n      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n      margin-bottom: 0;\n\n      .title {\n        font-size: 1rem;\n        line-height: 1.4;\n        word-break: break-word;\n\n        .font-family {\n          font-size: 0.9rem;\n        }\n      }\n\n      .titleTranslate {\n        font-size: 0.8rem;\n        margin-top: 0.2rem;\n        opacity: 0.8;\n      }\n    }\n\n    .article-content {\n      margin-top: 2rem; // 为固定标题留出空间\n    }\n  }\n\n  .footer {\n    width: 100%;\n\n    .bottom {\n      padding: 0.3rem 0.5rem 0.5rem 0.5rem;\n      border-radius: 0.4rem;\n\n      .stat {\n        margin-top: 0.3rem;\n        gap: 0.2rem;\n        flex-direction: row;\n        overflow-x: auto;\n\n        .row {\n          min-width: 3.5rem;\n          gap: 0.2rem;\n\n          .num {\n            font-size: 0.8rem;\n            font-weight: bold;\n          }\n\n          .name {\n            font-size: 0.7rem;\n          }\n        }\n      }\n\n      .flex.flex-col.items-center.justify-center.gap-1 {\n        .flex.gap-2.center {\n          display: grid;\n          grid-template-columns: repeat(3, 1fr);\n          gap: 0.4rem;\n\n          .base-icon {\n            padding: 0.3rem;\n            font-size: 1rem;\n            min-height: 44px;\n            min-width: 44px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n          }\n        }\n      }\n    }\n\n    .arrow {\n      font-size: 1rem;\n      padding: 0.3rem;\n    }\n  }\n}\n</style>\n"],"names":["_push","_parent","_createVNode","_ssrRenderClass","_ssrRenderAttr","$t","_ssrRenderAttrs","_mergeProps","props","__props","settingStore","useSettingStore","compare","a","b","ignoreCase","toLowerCase","isHide","_computed","dictation","word","type","PracticeArticleWordType","Word","list","t","right","wrong","input","length","push","val","split","forEach","k","i","last","slice","value","map","item","isTyping","Space","_ref","e","w","j","v","_unref","_ssrInterpolate","_ssrRenderList","_ssrRenderStyle","_ssrGetDirectiveProps","_ssrRenderComponent","_","_scopeId","_toDisplayString","_createTextVNode","_createBlock"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQA,UAAM,SAAS,qBAAqB,MAAM,OAAO,sBAAgC,CAAC;AAOlF,UAAM,QAAQ;AAId,UAAM,OAAO;AAEb,4BAAwB,MAAM,MAAM,UAAU;;;QAMvC,QAAQ;AAAA,QACR,eAAa,MAAM;AAAA,QACnB,qBAAO,KAAI,qBAAA,KAAA;AAAA,QACX,eAAa;AAAA,MAAA;yBAJlB,CAYS,GAAAA,QAAAC,UAAA,aAAA;;;;cAJA,SAAS,QAAA;AAAA,cACT,QAAM,CAAA,QAAO,aAAY,GAAG;AAAA,YAAA;;;;cAHnCC,YAKM,OAAA,EALD,OAAM,aAAS;AAAA,gBAClBA,YAGE,aAAA;AAAA,kBAFG,SAAS,QAAA;AAAA,kBACT,QAAM,CAAA,QAAO,aAAY,GAAG;AAAA,gBAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACGvC,UAAM,QAAQ;AAad,UAAM,kBAAkB,MAAM;AAC9B,UAAM,kBAAkB,IAAI,CAAA,CAAE;AAC9B,UAAM,YAAY,IAAI,EAAE;AAExB,UAAM,aAAa,SAAS,MAAM,MAAM,cAAc,SAAS,CAAC;AAChE,UAAM,gBAAgB,IAAI,WAAW,QAAQ,CAAA,IAAK,EAAE;AACpD,UAAM,cAAc,IAAI,KAAK;AAC7B,UAAM,YAAY,IAAI,IAAI;AAG1B,UAAM,cAAc,MAAM;AACxB,YAAM,UAAU,gBAAgB,IAAI,CAAC,GAAG,MAAM,CAAC;AAC/C,YAAM,kBAAkB,MAAM,YAAY,QAAQ,OAAO,IAAI;AAC7D,sBAAgB,QAAQ,gBAAgB,IAAI,OAAK,gBAAgB,CAAC,CAAC;AACnE,gBAAU,QAAQ;AAAA,IACpB;AAEA,gBAAW;AAEX,UAAM,YAAY,CAAC,UAAU,CAAC,KAAK,KAAK,KAAK,GAAG,EAAE,KAAK;AACvD,UAAM,oBAAoB,CAAC,kBAAkB,UAAU,UAAU,MAAM,aAAa,CAAC;AAsBrF,UAAM,SAAS,MAAM;AACnB,kBAAY,QAAQ;AACpB,YAAM,kBAAkB,WAAW,QAC7B,cAAc,MAAM,IAAI,SAAO,kBAAkB,gBAAgB,MAAM,QAAQ,GAAG,CAAC,CAAC,IACpF,CAAC,kBAAkB,gBAAgB,MAAM,QAAQ,cAAc,KAAK,CAAC,CAAC;AAC5E,gBAAU,QACN,gBAAgB,KAAI,EAAG,KAAI,MAAO,MAAM,cAAc,KAAI,EAAG,KAAI;AAAA,IACvE;AAEA,UAAM,gBAAgB,CAAC,MAAM;AAC3B,UAAI,CAAC,YAAY,MAAO,QAAO;AAC/B,YAAM,WAAW,WAAW,QACtB,cAAc,MAAM,SAAS,gBAAgB,MAAM,CAAC,CAAC,IACrD,cAAc,UAAU,gBAAgB,MAAM,CAAC;AACrD,YAAM,UAAU,MAAM,cAAc,SAAS,kBAAkB,CAAC,CAAC;AACjE,UAAI,QAAS,QAAO;AACpB,UAAI,YAAY,CAAC,QAAS,QAAO;AACjC,aAAO;AAAA,IACT;AACA,UAAM,eAAe,SAAS,MAAM;AAClC,UAAI,CAAC,YAAY,MAAO,QAAO;AAC/B,YAAM,WAAW,WAAW,QACtB,cAAc,MAAM,SACpB,cAAc;AACpB,aAAO,CAAC,YAAY;AAAA,IACtB,CAAC;AAGD,aAAa;AAAA,MACX;AAAA,MACA,WAAW,MAAM;AACf,cAAM,kBAAkB,WAAW,QAC7B,cAAc,MAAM,IAAI,SAAO,kBAAkB,gBAAgB,MAAM,QAAQ,GAAG,CAAC,CAAC,IACpF,CAAC,kBAAkB,gBAAgB,MAAM,QAAQ,cAAc,KAAK,CAAC,CAAC;AAC5E,eAAO;AAAA,UACL,OAAO,MAAM;AAAA,UACb,UAAU;AAAA,UACV,WAAW,gBAAgB,OAAO,KAAI,MAAO,MAAM,cAAc,KAAI,EAAG,KAAI;AAAA,QAClF;AAAA,MACE;AAAA,IACF,CAAC;AAED,UAAM,aAAa,IAAI,CAAA,CAAE;AACzB,UAAM,YAAY,IAAI,IAAI;AAC1B,UAAM,cAAc,IAAI,EAAE;AAE1B,UAAM,kBAAkB,MAAM;AAC5B,UAAI,CAAC,UAAU,SAAS,WAAW,MAAM,WAAW,EAAG;AAEvD,YAAM,iBAAiB,UAAU,MAAM;AACvC,YAAM,SAAS,WAAW,MAAM,IAAI,QAAM,GAAG,sBAAqB,EAAG,KAAK;AAE1E,YAAM,aAAa,OAAO,OAAO,CAAC,KAAK,MAAM,MAAM,GAAG,CAAC;AAIvD,UAAI,OAAO,KAAK,OAAK,IAAI,iBAAiB,CAAC,GAAG;AAC5C,oBAAY,QAAQ;AACpB;AAAA,MACF;AAGA,UAAI,aAAa,MAAM,OAAO,SAAS,MAAM,gBAAgB;AAC3D,oBAAY,QAAQ;AACpB;AAAA,MACF;AAGA,kBAAY,QAAQ;AAAA,IACtB;AAcA,UAAM,MAAM,MAAM,SAAS,YAAY;AACrC,YAAM,SAAQ;AACd,sBAAe;AAAA,IACjB,CAAC;;;iBAlLU;AAAA,QAAJ,KAAI;AAAA,QAAY,OAAM;AAAA,iEAEZ,aAAA,OAAY,MAAA,CAAA,+EACK,QAAA,aAAa,4BAAe,QAAA,IAAI,sCAIlD,YAAA,OAAW,YAAA,CAAA;oBAGE,gBAAA,OAAe,CAA1B,KAAK,MAAC;+BAGNC,eAAA,CAAA,cAAc,CAAC,GAAA,wDAAA,CAAA,4BAGpBC,cAAA,QAAM,WAAA,QAAU,aAAA,OAAA,IAChBA,cAAA,oBAAkB,QAAA,aAAa,EAAA,iBAE/BA,cAAA,SAAO,GAAG,0BAHJ,WAAA,QAAU,aAAA,SAIR,cAAA,OADD,GAAG,qHAIsD,CAAC,CAAA,4BAAgB,GAAG;;;AAIlF,UAAA,QAAA,eAAe,YAAA,OAAW;wFAChCC,KAAAA,GAAE,aAAA,CAAA,oBAAsB,QAAA,WAAW;;;;;;;;;;;;;;;;;;;;;;;;;AC2B5C,UAAM,QAAQ;AAOO,mBAAe,eAAe;AACnC,QAAI,KAAK;AACR,QAAI,MAAM,YAAY,GAAG;AAe1C,UAAM,aAAa,CAAC,QAAQ;AAC1B,cAAQ,IAAI,aAAa,GAAG;AAAA,IAE9B;;mBAlFOC,eAAAC,WAAA,EAAA,OAAM,qCAAiC,MAAA,CAAA,oHAEYF,KAAAA,GAAE,iBAAA,CAAA;;;;;oBAgBjC,QAAA,WAAS,CAAlB,GAAG,MAAC;;UACX,KAAK;AAAA;UACN,KAAI;AAAA,UACH,kBAAgB,IAAC;AAAA,UACjB,MAAM,EAAE;AAAA,UACR,SAAS,EAAE;AAAA,UACX,kBAAgB,EAAE;AAAA,UAClB,aAAa,EAAE;AAAA,UACf,sBAAoB,MAAM;AAAA,UAC1B,WAAW,MAAM;AAAA,UACjB;AAAA,QAAA;;oJAQDA,KAAAA,GAAE,aAAA,CAAA,kDAEmBA,KAAAA,GAAE,iBAAA,CAAA;;;;;;;;;;;;;;;;;;;;AC/BjC,UAAMG,QAAQC;AAId,UAAMC,eAAeC,gBAAe;AAEpC,aAASC,QAAQC,GAAWC,GAAW;AACrC,aAAOJ,aAAaK,aAAaF,EAAEG,YAAW,MAAOF,EAAEE,gBAAgBH,MAAMC;AAAAA,IAC/E;AAEA,UAAMG,SAASC,SAAU,MAAM;AAC7B,UAAIR,aAAaS,aAAaX,MAAMY,KAAKC,SAASC,wBAAwBC,KAAM,QAAO;AACvF,aAAO;AAAA,IACT,CAAC;AAED,UAAMC,OAAON,SAAU,MAAM;AAC3B,UAAIO,IAAI,CAAA;AACR,UAAIC,QAAQ;AACZ,UAAIC,QAAQ;AACZ,UAAInB,MAAMY,KAAKQ,MAAMC,QAAQ;AAC3B,YAAIrB,MAAMY,KAAKQ,MAAMC,WAAWrB,MAAMY,KAAKA,KAAKS,QAAQ;AACtD,cAAInB,aAAaK,aAAaP,MAAMY,KAAKQ,MAAMZ,YAAW,MAAOR,MAAMY,KAAKA,KAAKJ,YAAW,IAAKR,MAAMY,KAAKQ,UAAUpB,MAAMY,KAAKA,MAAM;AACrIK,cAAEK,KAAK;AAAA,cAACT,MAAM;AAAA,cAAiBU,KAAKvB,MAAMY,KAAKQ;AAAAA,YAAK,CAAC;AACrD,mBAAOH;AAAAA,UACT;AAAA,QACF;AACAjB,cAAMY,KAAKQ,MAAMI,MAAM,EAAE,EAAEC,QAAQ,CAACC,GAAGC,MAAM;AAC3C,cAAID,MAAM,KAAK;AACbR,oBAAQC,QAAQ;AAChBF,cAAEK,KAAK;AAAA,cAACT,MAAM;AAAA,YAAO,CAAC;AAAA,UACxB,OACK;AACH,gBAAIT,QAAQsB,GAAG1B,MAAMY,KAAKA,KAAKe,CAAC,CAAC,GAAG;AAClCT,uBAASQ;AACTP,sBAAQ;AACR,kBAAIF,EAAEI,QAAQ;AACZ,oBAAIO,OAAOX,EAAEA,EAAEI,SAAS,CAAC;AACzB,oBAAIO,KAAKf,SAAS,eAAe;AAC/Be,uBAAKL,MAAML;AAAAA,gBACb,OAAO;AACLD,oBAAEK,KAAK;AAAA,oBAACT,MAAM;AAAA,oBAAeU,KAAKL;AAAAA,kBAAK,CAAC;AAAA,gBAC1C;AAAA,cACF,OAAO;AACLD,kBAAEK,KAAK;AAAA,kBAACT,MAAM;AAAA,kBAAeU,KAAKL;AAAAA,gBAAK,CAAC;AAAA,cAC1C;AAAA,YACF,OAAO;AACLC,uBAASO;AACTR,sBAAQ;AACR,kBAAID,EAAEI,QAAQ;AACZ,oBAAIO,OAAOX,EAAEA,EAAEI,SAAS,CAAC;AACzB,oBAAIO,KAAKf,SAAS,eAAe;AAC/Be,uBAAKL,MAAMJ;AAAAA,gBACb,OAAO;AACLF,oBAAEK,KAAK;AAAA,oBAACT,MAAM;AAAA,oBAAeU,KAAKJ;AAAAA,kBAAK,CAAC;AAAA,gBAC1C;AAAA,cACF,OAAO;AACLF,kBAAEK,KAAK;AAAA,kBAACT,MAAM;AAAA,kBAAeU,KAAKJ;AAAAA,gBAAK,CAAC;AAAA,cAC1C;AAAA,YACF;AAAA,UACF;AAAA,QACF,CAAC;AACD,YAAInB,MAAMY,KAAKQ,MAAMC,SAASrB,MAAMY,KAAKA,KAAKS,QAAQ;AACpDJ,YAAEK,KAAK;AAAA,YAACT,MAAM;AAAA,YAAYU,KAAKvB,MAAMY,KAAKA,KAAKiB,MAAM7B,MAAMY,KAAKQ,MAAMC,MAAM;AAAA,UAAC,CAAC;AAAA,QAChF;AAAA,MACF,OAAO;AAELJ,UAAEK,KAAK;AAAA,UAACT,MAAM;AAAA,UAAYU,KAAKvB,MAAMY,KAAKA;AAAAA,QAAI,CAAC;AAAA,MACjD;AACA,aAAOK;AAAAA,IACT,CAAC;WAEY,MAAM;AACjB,aAAOD,KAAKc,MAAMC,IAAI,CAACC,MAAML,MAAM;AACjC,YAAIK,KAAKnB,SAAS,iBAAiB;AACjC,iBAAAnB,YAAA,QAAA,MAAA,CAAcsC,KAAKT,GAAG,CAAA;AAAA,QACxB;AACA,YAAIS,KAAKnB,SAAS,YAAY;AAC5B,iBAAAnB,YAAA,QAAA;AAAA,YAAA,aAAwB,cAAce,OAAOqB;AAAAA,aAAK,CAAGE,KAAKT,GAAG,CAAA;AAAA,QAC/D;AACA,YAAIS,KAAKnB,SAAS,eAAe;AAC/B,iBAAAnB,YAAA,QAAA;AAAA,YAAA,aAAwBM,MAAMiC,WAAW,gBAAgB;AAAA,aAAE,CAAGD,KAAKT,GAAG,CAAA;AAAA,QACxE;AACA,YAAIS,KAAKnB,SAAS,eAAe;AAC/B,iBAAAnB,YAAA,QAAA;AAAA,YAAA,aAAA;AAAA,aAAA,CAAsCsC,KAAKT,GAAG,CAAA;AAAA,QAChD;AACA,YAAIS,KAAKnB,SAAS,SAAS;AACzB,iBAAAnB,YAAAwC,OAAA;AAAA,YAAA,WAAuB;AAAA,UAAI,GAAA,IAAA;AAAA,QAC7B;AAAA,MACF,CAAC;AAAA,IACH;AAAA;;;;;;;;;;;;;;;;;;;;;AC3EA,UAAM,EAAE,GAAG,GAAA,IAAO,QAAA;AAalB,UAAM,QAAQ;AAQd,UAAM,OAAO;AAEb,QAAI,iBAAiBC,IAAA;AACrB,QAAI,iBAAiBA,IAAA;AACrB,QAAI,oBAAoBA,IAAuB,IAAI;AACnD,QAAI,eAAeA,IAAK,CAAC;AACzB,QAAI,gBAAgBA,IAAK,CAAC;AAC1B,QAAI,YAAYA,IAAK,CAAC;AACtB,QAAI,cAAcA,IAAK,CAAC;AACxB,QAAI,QAAQA,IAAK,EAAE;AACnB,QAAI,QAAQA,IAAK,EAAE;AAEnB,QAAI,UAAUA,IAAK,KAAK;AACxB,QAAI,QAAQA,IAAK,KAAK;AACtB,QAAI,aAAaA,IAAK;AAAA,MACpB,cAAc;AAAA,MACd,eAAe;AAAA,MACf,WAAW;AAAA,IAAA,CACZ;AACD,QAAI,SAASA,IAAK;AAAA,MAChB,KAAK;AAAA,MACL,MAAM;AAAA,IAAA,CACP;AAED,UAAM,eAAezB,SAAU,MAAM;AACnC,aAAO,GAAG,aAAa,KAAK,GAAG,cAAc,KAAK,GAAG,UAAU,KAAK;AAAA,IACtE,CAAC;AAED,UAAM,WAAW,YAAA;AACjB,UAAM,oBAAoB,qBAAA;AACJ,qBAAA;AAEQ,mBAAA;AAE9B,UAAM,QAAQ,aAAA;AACd,UAAM,eAAe,gBAAA;AACrB,UAAM,YAAY,iBAAA;AAClB,UAAM,QAAQ,SAAA;AAEd,UAAM,CAAC,MAAM,aAAa,OAAO,MAAM,cAAc,OAAO,MAAM,UAAU,OAAO,MAAM,YAAY,KAAK,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,MAAM;AAC1H,UAAI,MAAM,KAAK,MAAM,KAAK,MAAM,GAAG;AACjC,gCAAwB;AAAA,UACtB,cAAc;AAAA,YACZ,cAAc,aAAa;AAAA,YAC3B,eAAe,cAAc;AAAA,YAC7B,WAAW,UAAU;AAAA,UAAA;AAAA,UAEvB,eAAe,UAAU;AAAA,QAAA,CAC1B;AAAA,MACH;AACA,0BAAoB,GAAG,GAAG,CAAC;AAAA,IAC7B,CAAC;AAID;AAAA,MACE,MAAM,aAAa;AAAA,MACnB,MAAM;AACJ,iCAAyB,KAAK,MAAM,qBAAqB;AAAA,MAC3D;AAAA,IAAA;AAGF;AAAA,MACE,MAAM,MAAM;AAAA,MACZ,CAAA,MAAK;AACH,YAAI,GAAG;AACL,oBAAU,MAAM;AACd,YAAA,SAAO,SAAS;AAAA,cACd,cAAc,gBAAgB;AAAA,cAC9B,UAAU;AAAA,YAAA,CACX;AAAA,UACH,CAAC;AAAA,QACH,OAAO;AACL,UAAA,SAAO,SAAS,EAAE,KAAK,GAAG,UAAU,UAAU;AAAA,QAChD;AAAA,MACF;AAAA,IAAA;AAGF,aAAS,OAAO;AACd,UAAI,CAAC,MAAM,QAAQ,GAAI;AACvB,cAAQ,QAAQ,MAAM,QAAQ;AAC9B,UAAI,IAAI,wBAAA;AACR,UAAI,GAAG;AACL,qBAAa,QAAQ,EAAE,aAAa;AACpC,sBAAc,QAAQ,EAAE,aAAa;AACrC,kBAAU,QAAQ,EAAE,aAAa;AACjC,aAAK,aAAa,OAAO,cAAc,OAAO,UAAU,KAAK;AAC7D,kBAAU,OAAO,EAAE,aAAa;AAAA,MAClC,OAAO;AACL,cAAM,QAAQ,MAAM,QAAQ;AAC5B,qBAAa,QAAQ;AACrB,sBAAc,QAAQ;AACtB,kBAAU,QAAQ;AAClB,oBAAY,QAAQ;AAEpB,cAAM,QAAQ,SAAS,IAAI,CAAA,MAAK;AAC9B,YAAE,IAAI,CAAA,MAAK;AACT,cAAE,MAAM,IAAI,CAAA,MAAK;AACf,gBAAE,QAAQ;AAAA,YACZ,CAAC;AAAA,UACH,CAAC;AAAA,QACH,CAAC;AACD,QAAA,SAAO,SAAS,EAAE,KAAK,EAAA,CAAG;AAAA,MAC5B;AACA,gBAAU,MAAM;AACd,aAAK,QAAQ,EAAE,UAAU,MAAM,QAAQ,SAAS,aAAa,KAAK,EAAE,cAAc,KAAK,GAAG,QAAQ,OAAO;AACzG,YAAI,WAAA,EAAc,MAAA;AAAA,MACpB,CAAC;AACD,+BAAyB,KAAK,MAAM,qBAAqB;AACzD,uBAAA;AAAA,IACF;AAEA,aAAS,oBAAoB,IAAI,aAAa,OAAO,IAAI,cAAc,OAAO,IAAI,UAAU,OAAO;AAEjG,gBAAU,MAAM;AAEd,cAAM,cAAc,SAAS;AAAA,UAC3B,wBAAwB,IAAI,CAAC,2BAA2B,IAAI,CAAC,uBAAuB,IAAI,CAAC;AAAA,QAAA;AAE3F,YAAI,aAAa;AAEf,gBAAM,MAAM,YAAY,cAAc,WAAW;AACjD,cAAI,KAAK;AAEP,kBAAM,cAAc,kBAAkB,MAAM,sBAAA;AAC5C,kBAAM,UAAU,IAAI,sBAAA;AAEpB,kBAAM,eAAe,QAAQ,OAAO,KAAK,QAAQ,OAAO,SAAO;AAC/D,gBAAI,cAAc;AAEhB,kBAAI,QAAQ,IAAI,SAAO,cAAc,KAAK;AACxC,gBAAA,SAAO,SAAS;AAAA,kBACd,KAAK,SAAS,gBAAgB,qBAAmB,cAAc;AAAA,kBAC/D,UAAU;AAAA,gBAAA,CACX;AAAA,cACH;AAAA,YACF,OAAO;AAEL,cAAA,SAAO,SAAS;AAAA,gBACd,KAAK,SAAS,gBAAgB,YAAY,QAAQ,eAAa,cAAc;AAAA,gBAC7E,UAAU;AAAA,cAAA,CACX;AAAA,YACH;AAEA,mBAAO,QAAQ;AAAA,cACb,KAAK,QAAQ,MAAM,YAAY;AAAA,cAC/B,MAAM,QAAQ,OAAO,YAAY;AAAA,YAAA;AAAA,UAErC;AAAA,QACF;AAAA,MACF,CAAC;AAAA,IACH;AAEA,aAAS,yBAAyB;AAEhC,aAAO,IAAI,QAAc,CAAA,YAAW;AAClC,YAAI,OAAO;AACT,kBAAA;AACA;AAAA,QACF;AACA,kBAAU,MAAM;AACd,cAAI,cAAc,kBAAkB,MAAM,sBAAA;AAC1C,gBAAM,QAAQ,SAAS,IAAI,CAAC,GAAG,MAAM;AACnC,cAAE,IAAI,CAAC,GAAG,MAAM;AACd,kBAAI,WAAW,IAAI,MAAM;AACzB,kBAAI,gBAAgB,QAAQ,QAAQ;AACpC,kBAAI,OAAO,SAAS,cAAc,aAAa;AAC/C,kBAAI,WAAW,KAAK,sBAAA;AACpB,kBAAI,qBAAqB,aAAa,QAAQ;AAC9C,kBAAI,YAA4B,SAAS,cAAc,kBAAkB;AAEzE,wBAAU,MAAM,UAAU;AAC1B,wBAAU,MAAM,MAAM,SAAS,MAAM,YAAY,MAAM,KAAK;AAE5D,wBAAU,WAAW,MAAM,QAAQ,SAAS,OAAO,YAAY,OAAO;AAAA,YAGxE,CAAC;AAAA,UACH,CAAC;AACD,kBAAA;AAAA,QACF,GAAG,GAAG;AAAA,MACR,CAAC;AAAA,IACH;AAEA,aAAS,mBAAmB;AAC1B,UAAI,CAAC,MAAO;AACZ,qBAAe,OAAO,MAAA;AAAA,IACxB;AAiCA,UAAM,YAAY,CAAC,MAAc,EAAE,YAAA,EAAc,KAAA;AACjD,UAAM,eAAeA,SAAU,MAAM;AACnC,aAAO,MAAM;AAAA,QACX,IAAI;AAAA,WACD,MAAM,SAAS,YAAY,CAAA,GACzB,IAAI,SAAS,EACb,OAAO,OAAO,EACd,IAAI,CAAA,MAAK,EAAE,MAAM,KAAK,EAAE,OAAO,OAAO,CAAC,EACvC,KAAA,EACA,OAAO,CAAC,MAAM,OAAO,MAAM,MAAM,MAAM,EAAE,IAAI,SAAS,CAAC;AAAA,QAAA;AAAA,MAC5D;AAAA,IAEJ,CAAC;AAED,UAAM,aAAa,MAAM;AACvB,UAAI,iBAAiB,MAAM,QAAQ,SAAS,aAAa,KAAK;AAC9D,UAAI,kBAAkB,eAAe,cAAc,KAAK;AACxD,UAAI,IAAiB,gBAAgB,MAAM,UAAU,KAAK;AAC1D,aAAO,GAAG,SAAS,wBAAwB,QAAQ,aAAa,MAAM,SAAS,KAAK,aAAa,MAAM,SAAS,UAAU,EAAE,IAAI,CAAC;AAAA,IACnI;AAEA,QAAI,WAAW;AAEf,QAAI,OAAO;AAEX,aAAS,eAAe;AACtB,UAAI,QAAQ,MAAM,MAAO;AACzB,6BAAA;AACA,aAAO;AACP,UAAI,iBAAiB,MAAM,QAAQ,SAAS,aAAa,KAAK;AAC9D,UAAI,kBAAkB,eAAe,cAAc,KAAK;AAExD,sBAAgB,MAAM,QAAQ,CAAC,MAAM,MAAM;AACzC,aAAK,QAAQ,KAAK,QAAQ,KAAK,KAAK,MAAM,KAAK,OAAO,UAAU,CAAC;AAAA,MACnE,CAAC;AAMD,cAAQ,QAAQ;AAChB,YAAM,QAAQ,MAAM,QAAQ;AAC5B,kBAAY,QAAQ;AACpB,gBAAU,QAAQ;AAClB,oBAAc;AACd,UAAI,CAAC,eAAe,cAAc,KAAK,GAAG;AACxC,sBAAc,QAAQ;AACtB,qBAAa;AACb,YAAI,CAAC,MAAM,QAAQ,SAAS,aAAa,KAAK,GAAG;AAC/C,kBAAQ,IAAI,KAAK;AACjB,gBAAM,QAAQ;AACd,eAAK,UAAU;AAAA,QACjB,OAAO;AACL,cAAI,WAAA,EAAc,MAAA;AAClB,eAAK,QAAQ,EAAE,UAAU,MAAM,QAAQ,SAAS,aAAa,KAAK,EAAE,CAAC,GAAG,QAAQ,OAAO;AAAA,QACzF;AAAA,MACF,OAAO;AACL,YAAI,WAAA,EAAc,MAAA;AAClB,aAAK,QAAQ,EAAE,UAAU,eAAe,cAAc,KAAK,GAAG,QAAQ,OAAO;AAAA,MAC/E;AACA,aAAO;AACP,uBAAA;AAAA,IACF;AAEA,UAAM,OAAO,MAAM;AACjB,cAAQ,QAAQ;AAChB,YAAM,QAAQ,MAAM,QAAQ;AAC5B,kBAAY,QAAQ;AAEpB,UAAI,iBAAiB,MAAM,QAAQ,SAAS,aAAa,KAAK;AAC9D,UAAI,kBAAkB,eAAe,cAAc,KAAK;AACxD,UAAI,cAA2B,gBAAgB,MAAM,UAAU,KAAK;AAGpE,UAAI,UAAU,QAAQ,IAAI,gBAAgB,MAAM,QAAQ;AACtD,kBAAU;AACV,sBAAc,gBAAgB,MAAM,UAAU,KAAK;AAEnD,wBAAgB,MAAM,MAAM,GAAG,UAAU,KAAK,EAAE,QAAQ,CAAC,MAAM,MAAM;AACnE,eAAK,QAAQ,KAAK,QAAQ,KAAK,KAAK,MAAM,KAAK,OAAO,UAAU,CAAC;AAAA,QACnE,CAAC;AACD,YACE,CAAC,wBAAwB,QAAQ,wBAAwB,MAAM,EAAE,SAAS,YAAY,IAAI,KAC1F,aAAa,cACb;AACA,eAAA;AAAA,QACF,WAAW,cAAc;AACvB,eAAA;AAAA,QACF,OAAO;AACL,eAAK,YAAY,WAAW;AAAA,QAC9B;AAAA,MACF,OAAO;AACL,qBAAA;AAAA,MACF;AAAA,IACF;AAEA,aAAS,SAAS,GAAkB;AAClC;AACA,UAAI,CAAC,MAAM,QAAQ,SAAS,OAAQ;AACpC,UAAI,YAAY,MAAM,MAAO;AAC7B,iBAAW;AAEX,UAAI;AACF,YAAI,iBAAiB,MAAM,QAAQ,SAAS,aAAa,KAAK;AAC9D,YAAI,kBAAkB,eAAe,cAAc,KAAK;AACxD,YAAI,cAA2B,gBAAgB,MAAM,UAAU,KAAK;AACpE,cAAM,QAAQ;AAEd,YAAI,QAAQ,OAAO;AACjB,cAAI,EAAE,SAAS,SAAS;AACtB,iBAAA;AAAA,UACF,OAAO;AAEL,iBAAA;AACA,uBAAW;AACX,qBAAS,CAAC;AAAA,UAOZ;AAAA,QACF,OAAO;AAOL,cAAI,SAAS,EAAE;AACf,cAAI,MAAM,YAAY,KAAK,YAAY,KAAK;AAG5C,cAAI,UAAU;AACd,cAAI,aAAa,YAAY;AAC3B,sBAAU,IAAI,kBAAkB,OAAO,YAAA;AAAA,UACzC,OAAO;AACL,sBAAU,QAAQ;AAAA,UACpB;AACA,cAAI,CAAC,SAAS;AACZ,gBAAI,YAAY,SAAS,wBAAwB,MAAM;AACrD,mBAAK,SAAS,WAAW;AAAA,YAC3B;AACA,qBAAA;AAAA,UACF;AAEA,gBAAM,SAAS;AACf,sBAAY,QAAQ,MAAM;AAC1B,sBAAY;AAEZ,cAAI,CAAC,YAAY,KAAK,YAAY,KAAK,GAAG;AACxC,kBAAM,QAAQ;AACd,gBAAI,YAAY,WAAW;AACzB,sBAAQ,QAAQ;AAAA,YAClB,OAAO;AACL,mBAAA;AAAA,YACF;AAAA,UACF;AAAA,QACF;AACA,0BAAA;AACA,UAAE,eAAA;AAAA,MACJ,SAAS0B,IAAG;AAEV,gCAAwB,IAAI;AAC5B,aAAA;AAAA,MACF,UAAA;AACE,mBAAW;AAAA,MACb;AAAA,IACF;AAEA,aAAS,OAAO;AACd,UAAI,iBAAiB,MAAM,QAAQ,SAAS,aAAa,KAAK;AAC9D,WAAK,QAAQ,EAAE,UAAU,eAAe,cAAc,KAAK,GAAG,QAAQ,MAAM;AAAA,IAC9E;AAEA,aAAS,MAAM;AACb,UAAI,MAAM,OAAO;AACf,cAAM,QAAQ;AAAA,MAChB,OAAO;AACL,YAAI,MAAM,MAAO;AACjB,YAAI,QAAQ,OAAO;AACjB,kBAAQ,QAAQ;AAAA,QAClB;AACA,YAAI,cAAc;AAClB,YAAI,UAAU;AACd,YAAI,YAAY;AAChB,YAAI,YAAY,UAAU,GAAG;AAC3B,cAAI,UAAU,UAAU,GAAG;AACzB,gBAAI,cAAc,UAAU,GAAG;AAC7B,kBAAI,aAAa,UAAU,GAAG;AAC5B;AAAA,cACF,OAAO;AACL,8BAAc,YAAY,UAAU;AACpC,6BAAa;AAAA,cACf;AAAA,YACF,OAAO;AACL,0BAAY,UAAU;AACtB,4BAAc;AAAA,YAChB;AAAA,UACF,OAAO;AACL,wBAAY;AACZ,sBAAU;AAAA,UACZ;AAAA,QACF,MAAO,aAAY;AACnB,YAAI,iBAAiB,MAAM,QAAQ,SAAS,aAAa,KAAK;AAC9D,YAAI,YAAa,eAAc,QAAQ,eAAe,SAAS;AAC/D,YAAI,kBAAkB,eAAe,cAAc,KAAK;AACxD,YAAI,QAAS,WAAU,QAAQ,gBAAgB,MAAM,SAAS;AAC9D,YAAI,cAA2B,gBAAgB,MAAM,UAAU,KAAK;AACpE,YAAI,WAAW;AACb,iCAAA;AACA,cAAI,YAAY,WAAW;AACzB,oBAAQ,QAAQ;AAChB,wBAAY,QAAQ,YAAY,KAAK;AAAA,UACvC,OAAO;AACL,wBAAY,QAAQ,YAAY,KAAK,SAAS;AAAA,UAChD;AAAA,QACF;AACA,cAAM,QAAQ,YAAY,QAAQ,YAAY,MAAM,MAAM,GAAG,YAAY,KAAK;AAC9E,4BAAA;AACA,yBAAA;AAAA,MACF;AAAA,IACF;AAEA,aAAS,aAAa,KAAa,aAAa,OAAO,KAAa,cAAc,OAAO,KAAa,UAAU,OAAO;AACrH,iBAAW,QAAQ,EAAE,cAAc,IAAI,eAAe,IAAI,WAAW,GAAA;AAAA,IACvE;AAEA,aAAS,eAAe;AACtB,iBAAW,QAAQ,EAAE,cAAc,IAAI,eAAe,IAAI,WAAW,GAAA;AAAA,IACvE;AAEA,aAAS,KAAK,GAAG,GAAG,GAAG,UAAW;AAChC,mBAAa,QAAQ;AACrB,oBAAc,QAAQ;AAEtB,gBAAU,QAAQ;AAClB,kBAAY,QAAQ;AACpB,YAAM,QAAQ,MAAM,QAAQ;AAC5B,YAAM,QAAQ,QAAQ,QAAQ;AAC9B,YAAM,QAAQ,SAAS,IAAI,CAAC,GAAGT,OAAM;AACnC,UAAE,IAAI,CAACU,IAAGC,OAAM;AACdD,aAAE,MAAM,IAAI,CAACE,IAAG,MAAM;AACpB,gBAAIZ,MAAK,aAAa,SAASW,MAAK,cAAc,SAAS,IAAI,UAAU,OAAO;AAC9EC,iBAAE,QAAQA,GAAE;AAAA,YACd,OAAO;AACLA,iBAAE,QAAQ;AAAA,YACZ;AAAA,UACF,CAAC;AAAA,QACH,CAAC;AAAA,MACH,CAAC;AAAA,IAIH;AAkHA,cAAU;AAAA,MACR,CAAC,YAAY,UAAU,QAAQ;AAAA,MAC/B,CAAC,YAAY,aAAa,QAAQ;AAAA,IAAA,CACnC;AAED,aAAa;AAAA,MACX;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA,UAAU,MAAM;AACd,eAAO;AAAA,UACL,cAAc,aAAa;AAAA,UAC3B,eAAe,cAAc;AAAA,UAC7B,WAAW,UAAU;AAAA,UACrB,aAAa,YAAY;AAAA,QAAA;AAAA,MAE7B;AAAA,IAAA,CACD;AAED,aAAS,UAAU,GAAW,GAAW,GAAW;AAClD,aAAO,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,OAAO,aAAa;AAAA,IACzC;AAEoBJ,QAAK,KAAK;AAE9B,UAAM,kBAAkB,OAAO,mBAAmB,EAAE;;;QAI7C,OAAM;AAAA,iBAAqB;AAAA,QAAJ,KAAI;AAAA,MAAA;UAEtBK,MAAA,KAAA,GAAK;;;;;yJAaiBA,MAAA,KAAA,EAAM,MAAM,iBAAc,CAAA,mEAC1B,MAAM,SAAS,SAAK,EAAA;AACZ,UAAAA,MAAA,YAAA,EAAa,WAAS;4EAAK,MAAM,SAAS,cAAc,CAAA,SAAA;AAAA;;;;AAG3D,UAAA,MAAM,SAAS,UAAU,MAAI;AAC1C,cAAA,6EAAAC,eAAA,MAAM,SAAS,UAAU,IAAI,CAAA,QAAA;AACG,YAAAD,MAAA,YAAA,EAAa,WAAS;AAC/D,gBAAA,oEAAAC,eAAA,MAAM,SAAS,UAAU,SAAS,CAAA,QAAA;AAAA;;;;;;;AAQpC,YAAA,6CAAA9C,eAAA,CAAA,CAAA6C,MAAA,YAAA,EAAa,aAAS,QAAYA,MAAA,YAAA,EAAa,aAAS,WAAA,GAAA,iBAAA,CAAA,CAAA,qDAAA;AAIdE,oBAAA,MAAM,QAAQ,UAAQ,CAA1C,SAAS,WAAM;;sBACU,SAAO,CAA5B,UAAU,WAAM;;AAElBA,wBAAA,SAAS,OAAK,CAA/B,MAAM,WAAM;;cAGMF,MAAA,YAAA,IAAe,mBAAuDA,MAAA,YAAA,KAAgB,UAAUA,MAAA,aAAA,IAAgB,mBAA2DA,MAAA,YAAA,KAAgB,UAAUA,MAAA,aAAA,KAAiB,UAAUA,MAAA,SAAA,IAAY,mBAA+DA,MAAA,YAAA,KAAgB,UAAoCA,MAAA,aAAA,KAAiB,UAAoCA,MAAA,SAAA,KAAa,UAAoCA,MAAA,WAAA,KAAe,KAAK,KAAK;cAAuF,WAAM,KAAA,OAAiB,MAAM,IAAI,MAAM;AAAA,YAAA;cAoBxlBA,MAAA,UAAA,EAAW,iBAAiB,UAA8BA,MAAA,UAAA,EAAW,kBAAkB,UAA8BA,MAAA,UAAA,EAAW,cAAc;cAA8D,KAAK,SAASA,MAAA,uBAAA,EAAwB,UAAM;AAAA,YAAA;AASnO,gBAAA,UAAU,QAAQ,QAAQ,MAAM,MAAMA,MAAA,OAAA,GAAO;;gBAAjF;AAAA,gBAAa,aAAW;AAAA,cAAA;;;gBACxB;AAAA,gBAAa,aAAW;AAAA,cAAA;;AACH,gBAAAA,MAAA,YAAA,EAAa,WAAS;;;;;;AAGlD,gBAAA,KAAK,WAAS;;gBACpB,OAAM;AAAA,gBACL,YAAU;AAAA,gBACV,WAAS,UAAU,QAAQ,QAAQ,MAAM,KAAKA,MAAA,OAAA;AAAA,gBAC9C,YAAU,UAAU,QAAQ,QAAQ,MAAM,KAAKA,MAAA,OAAA,KAAWA,MAAA,KAAA,MAAK;AAAA,cAAA;;;;;;;AAGtB,cAAAA,MAAA,KAAA,KAASA,MAAA,YAAA,EAAa,aAAa,SAAS,WAAS;AAC9F,kBAAA,2DAAAC,eAAA,SAAS,SAAS,CAAA,SAAA;AAAA;;;;;;;AAKE,YAAA,mDAAAE,eAAAH,MAAA,YAAA,EAAa,YAAS,OAAA,EAAA,SAAA,OAAA,CAAA,CAAA,4BAAA;AACnBE,oBAAA,MAAM,QAAQ,UAAQ,CAApC,GAAG,WAAM;;sBAOE,GAAC,CAAlB,MAAM,WAAM;;YAJgB,YAAA,eAAe,MAAM;AAAA,YAAkBF,MAAA,YAAA,IAAe,SAAM,UAAaA,MAAA,YAAA,KAAgB,UAAUA,MAAA,aAAA,IAAgB,SAAM,UAAA;AAAA,UAAA;AAQlI,cAAA,KAAK,WAAS;AAAK,kBAAA,sCAAAC,eAAA,KAAK,SAAS,CAAA,SAAA;AAAA;;;;;;;;WAKvCD,MAAA,KAAA,GAAK;AAAiB,cAAA,8BAAAG,eAAA,EAAA,KAAAH,MAAA,MAAA,EAAO,MAAG,MAAA,MAAeA,MAAA,MAAA,EAAO,OAAI,KAAA,CAAA,CAAA,0BAAA;AAAA;;;;UAGxCA,MAAA,KAAA,GAAK;;;UACrC,qBAAO,KAAI,QAAA;AAAA,QAAA;2BAAxB,CAA8E,GAAAhD,QAAAC,UAAA,aAAA;;uCAAvC+C,MAAA,EAAA,EAAE,kBAAA,CAAA,CAAA,EAAA;AAAA;;gDAAFA,MAAA,EAAA,EAAE,kBAAA,CAAA,GAAA,CAAA;AAAA,cAAA;AAAA;;;;YACvBA,MAAA,KAAA,EAAM,MAAM,iBAAiBA,MAAA,KAAA,EAAM,MAAM,SAAS,SAAM,GAAA;;YAAO,qBAAO,KAAI,MAAA;AAAA,UAAA;6BAA5F,CAEa,GAAAhD,QAAAC,UAAA,aAAA;;yCADP+C,MAAA,EAAA,EAAE,cAAA,CAAA,CAAA,EAAA;AAAA;;kDAAFA,MAAA,EAAA,EAAE,cAAA,CAAA,GAAA,CAAA;AAAA,gBAAA;AAAA;;;;;;;;;;;UAIgDA,MAAA,eAAA,EAAgB,UAAUA,MAAA,KAAA,GAAK;oJACpDA,MAAA,EAAA,EAAE,iBAAA,CAAA,gEACXA,MAAA,EAAA,EAAE,qBAAA,CAAA,oBAA8BA,MAAA,cAAA,EAAeA,MAAA,KAAA,EAAMA,MAAA,eAAA,GAAe,OAAA,CAAA,CAAA;sBAIxEA,MAAA,eAAA,GAAe,CAA3B,MAAM,MAAC;+CADP,MAAMA,MAAA,eAAA,EAAgB,SAAM,KAAA,cAAA,sGAAA,CAAA,kDAGtB,MAAMA,MAAA,eAAA,EAAgB,SAAM,IAAA,cAAA,YAAA,sBACpCC,eAAA,MAAMD,MAAA,eAAA,EAAgB,SAAM,IAAOA,MAAA,EAAA,eAAgB,IAAC,CAAA,sBAAuBA,MAAA,WAAA,EAAY,KAAK,SAAS,CAAA,gDAElGA,MAAA,cAAA,EAAe,KAAK,KAAK,CAAA;;;;;;;;;;;;;;;;;;;;;;;;ACrvB1C,UAAM,QAAQ,aAAA;AACO,oBAAA;AACrB,UAAM,eAAe,gBAAA;AACrB,UAAM,YAAY,iBAAA;AAClB,UAAM,EAAE,YAAA,IAAgB,SAAA;AAExB,QAAI,cAAcL,IAAK;AAAA,MACrB,MAAM,CAAA;AAAA,MACN,SAAS,kBAAA;AAAA,IAAkB,CAC5B;AACD,QAAI,kBAAkBA,IAAK,KAAK;AAChC,QAAI,mBAAmBA,IAAA;AACvB,QAAI,qBAAqBA,IAAK,KAAK;AACnC,QAAI,UAAUA,IAAc,KAAK;AACjC,QAAI,oCAAoB,IAAA;AACxB,QAAI,cAAcA,IAAc,mBAAmB;AACnD,QAAI,WAAWA,IAAA;AACf,QAAI,QAAQA,IAAK,CAAC;AAElB,QAAI,UAAUA,IAAK,KAAK;AAExB,aAAS,QAAQ;AAEf,mBAAa,YAAY;AACzB,aAAA;AAAA,IACF;AAIA,aAAS,SAAS;AAEhB,yBAAA;AAAA,IACF;AAEA,aAAS,OAAO;AAEd,UAAI,MAAM,MAAM,mBAAmB,GAAG;AACpC,cAAM,QAAQ,UAAU;AAAA,MAC1B,OAAO;AACL,cAAM,MAAM;AACZ,2BAAA;AAAA,MACF;AAAA,IACF;AAEA,UAAM,sBAAsB,MAAO,aAAa,YAAY,CAAC,aAAa;AAC1E,UAAM,kBAAkB,MAAO,aAAa,YAAY,CAAC,aAAa;AACtE,UAAM,cAAc,MAAO,aAAa,YAAY,CAAC,aAAa;AAClE,UAAM,OAAO,MAAM,iBAAiB,OAAO,aAAA;AAC3C,UAAM,UAAU,MAAM,qBAAqB,YAAY,MAAM,OAAO;AACpE,UAAM,kBAAkB,MAAM,KAAA;AAE9B,aAAS,oBAAoB;AAC3B,mBAAa,cAAc,CAAC,aAAa;AACzC,mBAAa,YAAY,aAAa;AAAA,IACxC;AAEA,aAAS,OAAO;AACd,8BAAwB,IAAI;AAC5B,UAAI,MAAM,MAAM,kBAAkB,YAAY,MAAM,KAAK,SAAS,GAAG;AACnE,cAAM,MAAM,WAAW;AACvB,cAAM,MAAM,iBAAiB;AAAA,MAE/B,aAAa,MAAM;AACnB,yBAAA;AAAA,IACF;AAEA,UAAM,SAAS,UAAA;AACf,UAAM,QAAQ,SAAA;AAEd,mBAAe,OAAO;AAEpB,UAAI,OAAO,eAAA;AACX,UAAI,SAAS,MAAM,OAAO;AAC1B,UAAI,QAAQ;AAEV,eAAO,MAAM,QAAQ,SAAS,KAAK,CAAA,MAAK,EAAE,MAAM,MAAM;AACtD,YAAI,IAAI,MAAM,MAAM,aAAa,UAAU,QAAQ,GAAG,CAAC;AACvD,YAAI,YAAY,MAAM,EAAE,KAAA;AACxB,YAAI,CAAC,KAAM,QAAO,UAAU,KAAK,CAAA,MAAK,EAAE,OAAO,MAAM;AACrD,YAAI,QAAQ,KAAK,IAAI;AAEnB,cAAI,CAAC,KAAK,OAAQ,QAAO,MAAM,kBAAkB,MAAM,SAAS,OAAO;AACvE,cAAI,CAAC,KAAK,SAAS,QAAQ;AACzB,mBAAO,KAAK,WAAW;AACvB,mBAAO,MAAM,QAAQ,UAAU;AAAA,UACjC;AACA,gBAAM,MAAM,WAAW,IAAI;AAC3B,sBAAY,MAAM,OAAO,UAAU,MAAM,MAAM,QAAQ;AACvD,6BAAA;AACA,kBAAQ,QAAQ;AAAA,QAClB,OAAO;AACL,iBAAO,KAAK,WAAW;AAAA,QACzB;AAAA,MACF,OAAO;AACL,eAAO,KAAK,WAAW;AAAA,MACzB;AAAA,IACF;AAEA,UAAM,YAAY,MAAM;AACtB,gBAAU,MAAM;AACU;AAAA,MAG1B,CAAC;AAAA,IACH;AAEA,UAAM,qBAAqB,CAAC,WAAmB;AAC7C,mBAAa,qBAAqB;AAAA,IACpC;AAEA,UAAM,oBAAoB,CAAC,UAAkB;AAC3C,mBAAa,oBAAoB;AAAA,IACnC;AAEA;AAAA,MACE,CAAC,MAAM,MAAM,MAAM,MAAM,QAAQ,KAAK;AAAA,MACtC,CAAC,CAAC,GAAG,CAAC,MAAM;AACV,YAAI,KAAK,EAAG,MAAA;AAAA,MACd;AAAA,MACA,EAAE,WAAW,KAAA;AAAA,IAAK;AAGpB;AAAA,MACE,MAAM,YAAY,OAAO,SAAS;AAAA,MAClC,CAAA,OAAM;AACJ,YAAI,IAAI;AACN,oBAAU,YAAY;AACpB,kBAAM,WAAW,MAAM,UAAU,YAAY,WAAW,QAAQ;AAChE,kBAAM,OAAO,IAAI,SAAS,KAAK,UAAU;AACzC,iBAAK,GAAG,UAAU,MAAM;AACtB,2BAAa,QAAQ,cAAc,GAAG;AAAA,YACxC,CAAC;AACD,iBAAK,QAAQ;AAAA,cACX,IAAI;AAAA,cACJ,MAAM;AAAA,cACN,UAAU;AAAA,gBACR,SAAS;AAAA,gBACT,IAAI;AAAA,cAAA;AAAA,cAEN,SAAS;AAAA,gBACP;AAAA,kBACE,MAAM;AAAA,kBACN,SAAS;AACP,iCAAa,QAAQ;AACrB,yBAAK,KAAA;AACL,+BAAW,MAAM;AACf,yCAAmB,QAAQ;AAAA,oBAC7B,GAAG,IAAI;AAAA,kBACT;AAAA,gBAAA;AAAA,cACF;AAAA,YACF,CACD;AACD,kBAAM,IAAI,aAAa,QAAQ,YAAY;AAC3C,gBAAI,aAAa,SAAS,CAAC,KAAK,CAAC,YAAY;AAC3C,mBAAK,MAAA;AAAA,YACP;AAAA,UACF,GAAG,GAAG;AAAA,QACR;AAAA,MACF;AAAA,IAAA;AAGF;AAAA,MACE,MAAM,aAAa;AAAA,MACnB,CAAA,MAAK;AACH,kBAAA;AAAA,MACF;AAAA,MACA,EAAE,WAAW,MAAM,MAAM,KAAA;AAAA,IAAK;AAuChC,kCAAA;AACA,4BAAwB,MAAM,QAAQ,KAAK;AAE3C,aAAS,WAAW,KAAc;AAChC,gBAAU,QAAQ;AAClB,gBAAU,QAAQ;AAClB,gBAAU,YAAY,KAAK,IAAA;AAC3B,gBAAU,QAAQ;AAClB,0CAAoB,IAAA;AACpB,kBAAY,MAAM,KAAK,MAAM,MAAM,cAAc,IAAI;AACrD,kBAAY,MAAM,UAAU;AAC5B,UAAI,aAAa,CAAC,MAAM,gBAAgB,MAAM,UAAU,EAAE,aAAa,mBAAmB,IAAI,CAAC;AAC/F,kBAAY,MAAM,QAAQ,SAAS,IAAI,CAAC,GAAG,MAAM;AAC/C,UAAE,IAAI,CAAA,MAAK;AACT,YAAE,MAAM,IAAI,CAAA,MAAK;AACf,gBAAI,CAAC,WAAW,SAAS,EAAE,KAAK,YAAA,CAAa,KAAK,EAAE,SAAS,wBAAwB,MAAM;AACzF,wBAAU;AAAA,YACZ;AAAA,UACF,CAAC;AAAA,QACH,CAAC;AAAA,MACH,CAAC;AAED,cAAQ,QAAQ;AAChB,oBAAc,MAAM,KAAK;AACzB,YAAM,QAAQ,YAIP;AAEP,gBAAU,iBAAiB,OAAO,IAAI;AAAA,IACxC;AAEA,mBAAe,WAAW;AACxB,oBAAc,MAAM,KAAK;AAEzB,iBAAW,MAAM;AACf,gCAAwB,IAAI;AAAA,MAC9B,GAAG,IAAI;AAGP,UAAI,OAAmE;AAAA,QACrE,WAAW,YAAY,MAAM,QAAQ;AAAA,QACrC,OAAO,YAAY,MAAM,QAAQ;AAAA,QACjC,OAAO,UAAU;AAAA;AAAA,QAEjB,WAAW,KAAK,IAAA,IAAQ,UAAU;AAAA,QAClC,OAAO,UAAU;AAAA,QACjB,OAAO,UAAU;AAAA,MAAA;AAGnB,UAAI,aAAa;AAAA,QACf,MAAM,MAAM,MAAM;AAAA,QAClB,OAAO,MAAM,MAAM;AAAA,QACnB,QAAQ,MAAM,MAAM;AAAA,QACpB,UAAU,MAAM,MAAM;AAAA,QACtB,OAAO,YAAY,MAAM,QAAQ;AAAA,QACjC,OAAO,OAAO,UAAU,QAAQ,MAAO,EAAE,EAAE,QAAQ,CAAC;AAAA,QACpD,GAAG;AAAA,MAAA;AAEL,iBAAW,IAAI,QAAQ,MAAM,MAAM,IAAI,UAAU,MAAM,MAAM,cAAc,IAAI,KAAK,KAAK,UAAU,OAAO,UAAU,QAAQ,MAAO,EAAE,EAAE,QAAQ,CAAC,CAAC;AACjJ,MAAA,SAAO,OAAO,MAAM,mBAAmB,UAAU;AAEjD,UAAI,MAAM,MAAM,kBAAkB,MAAM,MAAM,SAAS,GAAG;AACxD,cAAM,MAAM,WAAW;AAAA,MACzB;AACA,UAAI,OAAO,aAAa;AACtB,YAAI,MAAM,MAAM,QAAQ;AAAA,UACtB,GAAG;AAAA,UACH,MAAM;AAAA,UACN,UAAU,MAAM,MAAM;AAAA,QAAA,CACvB;AACD,YAAI,CAAC,IAAI,SAAS;AAChB,gBAAM,MAAM,IAAI,GAAG;AAAA,QACrB;AAAA,MACF;AAEA,YAAM,MAAM,WAAW,KAAK,IAAW;AAGvC,gBAAU,QAAQ;AAClB,gBAAU,YAAY,KAAK,IAAA;AAAA,IAC7B;AAEA,aAAS,qBAAqB;AAC5B,cAAQ,KAAK,SAAS,SAAS;AAC/B,UAAI,iBAAiB,YAAY,MAAM,KAAK,MAAM,MAAM,cAAc;AACtE,UAAI,UAAU,kBAAkB,cAAc;AAC9C,UAAI,QAAQ,SAAS,QAAQ;AAC3B,mBAAW,OAAO;AAAA,MACpB,OAAO;AACL,8BAAsB,OAAO;AAC7B,mBAAW,OAAO;AAAA,MACpB;AAAA,IACF;AAEA,aAAS,YAAY,KAAc;AACjC,cAAQ,IAAI,eAAe,KAAK,KAAK,UAAU,IAAI,WAAW,CAAC;AAC/D,cAAQ,IAAI,eAAe,IAAI,aAAa;AAC5C,sBAAgB,QAAQ;AACxB,UAAI,SAAS,MAAM,MAAM,SAAS,UAAU,CAAA,MAAK,EAAE,OAAO,IAAI,EAAE;AAChE,UAAI,SAAS,IAAI;AACf,cAAM,MAAM,SAAS,MAAM,IAAI,UAAU,GAAG;AAAA,MAC9C;AACA,iBAAW,GAAG;AACd,YAAM,MAAM,SAAS;AACrB,UAAI,CAAC,MAAM,MAAM,GAAG,SAAS,SAAS,GAAG;AACvC,cAAM,MAAM,MAAM,aAAa,OAAO,CAAC;AAAA,MACzC;AAAA,IACF;AAEA,aAAS,KAAK,MAAe,YAAY,MAAM,SAAS;AACtD,kBAAY,QAAQ;AACpB,sBAAgB,QAAQ;AAAA,IAC1B;AAEA,aAAS,MAAM,MAAY;AACzB,UAAI,OAAO,KAAK,KAAK,YAAA;AAErB,UAAI,aAAa,kBAAkB;AACjC,YAAI,MAAM,YAAY,SAAS,IAAI,EAAG;AAAA,MACxC;AACA,UAAI,CAAC,cAAc,IAAI,IAAI,GAAG;AAC5B,sBAAc,IAAI,IAAI;AACtB,kBAAU;AAAA,MACZ;AAEA,UAAI,CAAC,MAAM,MAAM,MAAM,KAAK,CAAC,MAAY,EAAE,KAAK,YAAA,MAAkB,IAAI,GAAG;AACvE,cAAM,MAAM,MAAM,KAAK,eAAe,IAAI,CAAC;AAC3C,cAAM,MAAM,SAAS,MAAM,MAAM,MAAM;AAAA,MACzC;AAAA,IACF;AAEA,aAAS,SAAS,MAAmB;AACnC,UAAI,CAAC,MAAM,eAAe,SAAS,KAAK,KAAK,YAAA,CAAa,KAAK,KAAK,SAAS,wBAAwB,MAAM;AACzG,kBAAU;AAAA,MACZ;AAAA,IACF;AAEA,mBAAe,cAAc,KAAkB;AAC7C,8BAAwB,IAAI;AAC5B,UAAI,SAAS,YAAY,MAAM,KAAK,UAAU,OAAK,EAAE,OAAO,IAAI,KAAK,EAAE;AACvE,UAAI,SAAS,IAAI;AACf,cAAM,MAAM,iBAAiB;AAC7B,2BAAA;AAEA,YAAI,OAAO,aAAa;AACtB,cAAI,MAAM,MAAM,gBAAgB,MAAM,MAAM,KAAK;AACjD,cAAI,CAAC,IAAI,SAAS;AAChB,kBAAM,MAAM,IAAI,GAAG;AAAA,UACrB;AAAA,QACF;AAAA,MACF;AACA,gBAAA;AAAA,IACF;AAUA,UAAM,EAAoB,qBAAA,IAAyB,kBAAA;AAEnD,aAAS,OAAO;AACd,uBAAiB,OAAO,KAAA;AAAA,IAC1B;AAEA,aAAS,OAAO;AACd,uBAAiB,OAAO,aAAA;AAAA,IAC1B;AAgBA,cAAU;AAAA,MACR,CAAC,SAAS,OAAO,KAAK;AAAA,MACtB,CAAC,SAAS,aAAa,MAAM;AAAA,MAC7B,CAAC,SAAS,eAAe,IAAI;AAAA,MAE7B,CAAC,YAAY,iBAAiB,IAAI;AAAA,MAClC,CAAC,YAAY,eAAe,MAAM;AAAA,MAClC,CAAC,YAAY,kBAAkB,KAAK;AAAA,MACpC,CAAC,YAAY,qBAAqB,mBAAmB;AAAA,MACrD,CAAC,YAAY,iBAAiB,eAAe;AAAA,MAC7C,CAAC,YAAY,aAAa,WAAW;AAAA,MACrC,CAAC,YAAY,mBAAmB,iBAAiB;AAAA,MACjD,CAAC,YAAY,aAAa,WAAW;AAAA,MACrC,CAAC,YAAY,aAAa,IAAI;AAAA,MAC9B,CAAC,YAAY,uBAAuB,IAAI;AAAA,MACxC,CAAC,YAAY,UAAU,IAAI;AAAA,MAC3B,CAAC,YAAY,MAAM,IAAI;AAAA,MACvB,CAAC,YAAY,eAAe,OAAO;AAAA,MACnC,CAAC,YAAY,aAAa,eAAe;AAAA,IAAA,CAC1C;AAYD,UAAM,EAAE,kBAAA,IAAsB,qBAAA;AAE9B,aAAS,MAAM,GAAG;AAChB,gBAAU,MAAM;AACd,YAAI,aAAa,gBAAgB,EAAE,QAAQ;AACzC,4BAAkB,EAAE,UAAU,SAAS,KAAK;AAAA,QAC9C;AAAA,MACF,CAAC;AAAA,IACH;AAEA,UAAM,kBAAkB,SAAS,MAAM;AACrC,UAAI,MAAM,MAAM,YAAY,QAAQ;AAClC,eAAO,MAAM,MAAM,WAAW,OAAO,CAAC,MAAW,EAAE,UAAU,YAAY,MAAM,QAAQ,KAAK;AAAA,MAC9F;AACA,aAAO,CAAA;AAAA,IACT,CAAC;AAED,YAAQ,mBAAmB,eAAe;;;;;;;;;;;;;4DAGJ,WAAU,mCAAA,GAAkCS,qBAAA,MAAA,oBAArDJ,MAAA,OAAA,CAAO,CAAA,GAAA;AAAA,QACf,kBAAjB,CAWW,GAAAhD,QAAAC,UAAA,aAAA;;;uBATH;AAAA,cAAJ,KAAI;AAAA,cACH,SAAO;AAAA,cACP,QAAM;AAAA,cACN,YAAU;AAAA,cACV,QAAM;AAAA,cACN,UAAM,CAAA,WAAE,WAAW+C,MAAA,WAAA,EAAY,OAAO;AAAA,cACtC,YAAU;AAAA,cACV,SAASA,MAAA,WAAA,EAAY;AAAA,YAAA;;;cARxB9C,YASE,eAAA;AAAA,yBARI;AAAA,gBAAJ,KAAI;AAAA,gBACH,SAAO;AAAA,gBACP,QAAM;AAAA,gBACN,YAAU;AAAA,gBACV,QAAM;AAAA,gBACN,UAAM,CAAA,WAAE,WAAW8C,MAAA,WAAA,EAAY,OAAO;AAAA,gBACtC,YAAU;AAAA,gBACV,SAASA,MAAA,WAAA,EAAY;AAAA,cAAA;;;;QAGT,eAAjB,CAiBW,GAAAhD,QAAAC,UAAA,aAAA;;AAhBDD,mBAAAqD,mBAAA,OAAA,EAAA,OAAO,EAAA,OAAA,6BAAA,KAAuC;AAAA,cACnC,eAAjB,CAEWC,IAAAtD,QAAAC,UAAAsD,cAAA;;6EADAP,MAAA,KAAA,EAAM,MAAM,IAAI,qBAAQA,MAAA,KAAA,EAAM,MAAM,iBAAc,CAAA,sBAAaA,MAAA,WAAA,EAAY,KAAK,MAAM;;;oBAA/F9C,YAA0G,QAAA,MAAAsD,gBAAjGR,aAAM,MAAM,IAAI,IAAG,OAAEQ,gBAAGR,MAAA,KAAA,EAAM,MAAM,iBAAc,CAAA,IAAO,QAAGQ,gBAAGR,MAAA,WAAA,EAAY,KAAK,MAAM,IAAG,KAAC,CAAA;AAAA,kBAAA;AAAA;;+BAFvG,CAeQM,IAAAtD,QAAAC,UAAAsD,cAAA;;;;oBATD,UAAUP,MAAA,YAAA,EAAa;AAAA,oBACvB,QAAQ;AAAA,oBACR,kBAAgBA,MAAA,YAAA,EAAa;AAAA,oBAC7B,SAAO;AAAA,oBACP,aAAWA,MAAA,WAAA,EAAY,QAAQ,MAAE;AAAA,oBACjC,MAAMA,MAAA,WAAA,EAAY;AAAA,kBAAA;;;;oBAPvB9C,YAUM,OAAA,EAVD,OAAM,0BAAsB;AAAA,sBAC/BA,YAQc,aAAA;AAAA,wBAPX,UAAU8C,MAAA,YAAA,EAAa;AAAA,wBACvB,QAAQ;AAAA,wBACR,kBAAgBA,MAAA,YAAA,EAAa;AAAA,wBAC7B,SAAO;AAAA,wBACP,aAAWA,MAAA,WAAA,EAAY,QAAQ,MAAE;AAAA,wBACjC,MAAMA,MAAA,WAAA,EAAY;AAAA,sBAAA;;;;;;;;;cAXzB9C,YAeQ,OAAA,EAfA,OAAO,EAAA,OAAA,6BAAA,KAAuC;AAAA,gBACnC,eACf,MAA0G;AAAA,kBAA1GA,YAA0G,QAAA,MAAAsD,gBAAjGR,aAAM,MAAM,IAAI,IAAG,OAAEQ,gBAAGR,MAAA,KAAA,EAAM,MAAM,iBAAc,CAAA,IAAO,QAAGQ,gBAAGR,MAAA,WAAA,EAAY,KAAK,MAAM,IAAG,KAAC,CAAA;AAAA,gBAAA;iCAErG,MAUM;AAAA,kBAVN9C,YAUM,OAAA,EAVD,OAAM,0BAAsB;AAAA,oBAC/BA,YAQc,aAAA;AAAA,sBAPX,UAAU8C,MAAA,YAAA,EAAa;AAAA,sBACvB,QAAQ;AAAA,sBACR,kBAAgBA,MAAA,YAAA,EAAa;AAAA,sBAC7B,SAAO;AAAA,sBACP,aAAWA,MAAA,WAAA,EAAY,QAAQ,MAAE;AAAA,sBACjC,MAAMA,MAAA,WAAA,EAAY;AAAA,oBAAA;;;;;;;;QAMV,gBAAjB,CA8FW,GAAAhD,QAAAC,UAAA,aAAA;;;;cA3FK,OAAO+C,MAAA,YAAA,EAAa,cAAW,OAAA;AAAA,YAAA;+BAAzC,CAOUM,IAAAtD,QAAAC,UAAAsD,cAAA;;;oBALL,qBAAOP,MAAA,YAAA,EAAa,cAAW,CAAIA,MAAA,YAAA,EAAa;AAAA,oBAChD,OAAK,CAAA,CAAGA,MAAA,YAAA,EAAa,uBAEhB,OAAO;AAAA,oBADb,OAAM;AAAA,kBAAA;;;oBAHR9C,YAKE,0CAAA;AAAA,sBAJC,qBAAO8C,MAAA,YAAA,EAAa,cAAW,CAAIA,MAAA,YAAA,EAAa;AAAA,sBAChD,OAAK,CAAA,CAAGA,MAAA,YAAA,EAAa,uBAEhB,OAAO;AAAA,sBADb,OAAM;AAAA,oBAAA;;;;;;gSASgBC,eAAA,gBAAA,MAAgB,MAAM,qBAAQD,MAAA,UAAA,EAAWA,MAAA,KAAA,EAAM,gBAAA,OAAe,OAAA,CAAA,CAAA,gNAM9DC,eAAA,KAAK,MAAMD,MAAA,SAAA,EAAU,QAAK,MAAA,EAAA,CAAA,+NAMzCC,eAAAD,MAAA,SAAA,EAAU,KAAK;;cAGL,mBAAX,CAKWM,IAAAtD,QAAAC,UAAAsD,cAAA;;kEAHAN,eAAAD,MAAA,YAAA,EAAa,mBAAgB,QAAA,IAAA;;;oBADtC9C,YAGM,OAAA,MAAA;AAAA,sBAHDuD,gBAAA,UACCD,gBAAGR,MAAA,YAAA,EAAa,mCAAkC,eACtD,CAAA;AAAA,sBAAA9C,YAAsC,aAAjC,6BAA2B;AAAA,oBAAA;;;;+BALtC,CAQUoD,IAAAtD,QAAAC,UAAAsD,cAAA;;AAP2BvD,yBAAAqD,mBAAA,8CAAA,EAAA,OAAM,QAAI,MAAApD,UAAAsD,SAAA,CAAA;AAAA;;oBAA7CrD,YAAgD,8CAAA,EAAb,OAAM,MAAI;AAAA,kBAAA;AAAA;;;;;;uBAc/C;AAAA,cAAJ,KAAI;AAAA,cACH,SAAS8C,MAAA,WAAA,EAAY;AAAA,cACrB,eAAc;AAAA,cACd,gBAAe;AAAA,YAAA;;AAIChD,mBAAAqD,mBAAA,eAAA,EAAA,MAAK,aAAS,MAAApD,UAAA,QAAA,CAAA;;cAElB,cAAc+C,MAAA,YAAA,EAAa,eAAeA,MAAA,WAAA,EAAY,IAAI,CAAA;AAAA,cAAO,SAAO;AAAA,YAAA;+BAAnF,CAEWM,IAAAtD,QAAAC,UAAAsD,cAAA;;AADuBvD,yBAAAqD,mBAAA,2CAAA,EAAA,OAAM,0BAAsB,MAAApD,UAAAsD,SAAA,CAAA;AAAA;;oBAA5DrD,YAA+D,2CAAA,EAA/B,OAAM,wBAAsB;AAAA,kBAAA;AAAA;;;;;cAG3D,iBAAiB8C,MAAA,YAAA,EAAa,eAAeA,MAAA,WAAA,EAAY,qBAAqB,CAAA;AAAA,cAC9E,SAAO;AAAA,YAAA;+BAFV,CAKWM,IAAAtD,QAAAC,UAAAsD,cAAA;;;;;oBADTrD,YAA6B,oCAAA;AAAA,kBAAA;AAAA;;;;;cAG5B,qBAAO8C,MAAA,YAAA,EAAa,YAAS,CAAIA,MAAA,YAAA,EAAa;AAAA,cAC9C,iBAAiBA,MAAA,YAAA,EAAa,eAAeA,MAAA,WAAA,EAAY,eAAe,CAAA;AAAA,YAAA;+BAF3E,CAMWM,IAAAtD,QAAAC,UAAAsD,cAAA;;AAFwB,sBAAAP,MAAA,YAAA,EAAa,WAAS;;;;;;;oBAAtBA,MAAA,YAAA,EAAa,0BAA9CU,YAA2D,sCAAA,EAAA,KAAA,GAAA,mBAC3DA,YAAiC,mCAAA,EAAA,KAAA,GAAA;AAAA,kBAAA;AAAA;;;;;cAIhC,iBAAiBV,MAAA,YAAA,EAAa,eAAeA,MAAA,WAAA,EAAY,mBAAmB,CAAA;AAAA,cAC5E,qBAAOA,MAAA,YAAA,EAAa,YAAS,CAAIA,MAAA,YAAA,EAAa;AAAA,YAAA;+BAFjD,CAMWM,IAAAtD,QAAAC,UAAAsD,cAAA;;AAFc,sBAAAP,MAAA,YAAA,EAAa,WAAS;;;;;;;oBAAtBA,MAAA,YAAA,EAAa,0BAApCU,YAAiD,4BAAA,EAAA,KAAA,GAAA,mBACjDA,YAA0C,4CAAA,EAAA,KAAA,GAAA;AAAA,kBAAA;AAAA;;;;;cASzC,qBAAOV,MAAA,YAAA,EAAa,YAAS,CAAIA,MAAA,YAAA,EAAa;AAAA,cAC9C,aAAaA,MAAA,YAAA,EAAa,eAAeA,MAAA,WAAA,EAAY,WAAW,CAAA;AAAA,YAAA;+BAFnE,CAKWM,IAAAtD,QAAAC,UAAAsD,cAAA;;;;;oBADTrD,YAA8C,qDAAA;AAAA,kBAAA;AAAA;;;;;;;cAtF1DA,YA4FM,OAAA,EA5FD,OAAM,iBAAa;AAAA,gBACtBA,YASM,OAAA,EATD,OAAM,iBAAa;AAAA,kBACtBA,YAOU,SAAA;AAAA,oBAPA,OAAO8C,MAAA,YAAA,EAAa,cAAW,OAAA;AAAA,kBAAA;qCACvC,MAKE;AAAA,sBALF9C,YAKE,0CAAA;AAAA,wBAJC,qBAAO8C,MAAA,YAAA,EAAa,cAAW,CAAIA,MAAA,YAAA,EAAa;AAAA,wBAChD,OAAK,CAAA,CAAGA,MAAA,YAAA,EAAa,uBAEhB,OAAO;AAAA,wBADb,OAAM;AAAA,sBAAA;;;;;gBAKZ9C,YAgFM,OAAA,EAhFD,OAAM,YAAQ;AAAA,kBACjBA,YA8EM,OAAA,EA9ED,OAAM,6CAAyC;AAAA,oBAClDA,YA4BM,OAAA,EA5BD,OAAM,UAAM;AAAA,sBACfA,YAIM,OAAA,EAJD,OAAM,SAAK;AAAA,wBACdA,YAAsG,OAAA,EAAjG,OAAM,MAAA,mBAAS,gBAAA,MAAgB,MAAM,IAAG,OAAEsD,gBAAGR,MAAA,UAAA,EAAWA,MAAA,KAAA,EAAM,gBAAA,OAAe,OAAA,CAAA,CAAA,GAAA,CAAA;AAAA,wBAClF9C,YAAwB,OAAA,EAAnB,OAAM,QAAM;AAAA,wBACjBA,YAA0B,OAAA,EAArB,OAAM,OAAA,GAAO,IAAE;AAAA,sBAAA;sBAEtBA,YAKM,OAAA,EALD,OAAM,SAAK;AAAA,wBAEdA,YAAsE,OAAA,EAAjE,OAAM,MAAA,GAAKsD,gBAAI,KAAK,MAAMR,MAAA,SAAA,EAAU,qBAAqB,MAAE,CAAA;AAAA,wBAChE9C,YAAwB,OAAA,EAAnB,OAAM,QAAM;AAAA,wBACjBA,YAA0B,OAAA,EAArB,OAAM,OAAA,GAAO,IAAE;AAAA,sBAAA;sBAEtBA,YAeM,OAAA,EAfD,OAAM,SAAK;AAAA,wBACdA,YAWM,OAAA,EAXD,OAAM,sBAAkB;AAAA,0DACxB8C,MAAA,SAAA,EAAU,KAAK,IAAG,KACrB,CAAA;AAAA,0BAAA9C,YAQU,SAAA,MAAA;AAAA,4BANG,mBACT,MAGM;AAAA,8BAHNA,YAGM,OAAA,MAAA;AAAA,gCAHDuD,gBAAA,UACCD,gBAAGR,MAAA,YAAA,EAAa,mCAAkC,eACtD,CAAA;AAAA,gCAAA9C,YAAsC,aAAjC,6BAA2B;AAAA,8BAAA;;6CAJpC,MAAgD;AAAA,8BAAhDA,YAAgD,8CAAA,EAAb,OAAM,MAAI;AAAA,4BAAA;;;;wBASjDA,YAAwB,OAAA,EAAnB,OAAM,QAAM;AAAA,wBACjBA,YAA4B,OAAA,EAAvB,OAAM,OAAA,GAAO,MAAI;AAAA,sBAAA;;oBAG1BA,YAKgB,cAAA;AAAA,+BAJV;AAAA,sBAAJ,KAAI;AAAA,sBACH,SAAS8C,MAAA,WAAA,EAAY;AAAA,sBACrB,eAAc;AAAA,sBACd,gBAAe;AAAA,oBAAA;oBAElB9C,YAyCM,OAAA,EAzCD,OAAM,qDAAiD;AAAA,sBAC1DA,YAuCM,OAAA,EAvCD,OAAM,uBAAmB;AAAA,wBAC5BA,YAAgC,eAAA,EAAjB,MAAK,WAAS;AAAA,wBAE7BA,YAEW,UAAA;AAAA,0BAFA,cAAc8C,MAAA,YAAA,EAAa,eAAeA,MAAA,WAAA,EAAY,IAAI,CAAA;AAAA,0BAAO,SAAO;AAAA,wBAAA;2CACjF,MAA+D;AAAA,4BAA/D9C,YAA+D,2CAAA,EAA/B,OAAM,wBAAsB;AAAA,0BAAA;;;wBAE9DA,YAKW,UAAA;AAAA,0BAJR,iBAAiB8C,MAAA,YAAA,EAAa,eAAeA,MAAA,WAAA,EAAY,qBAAqB,CAAA;AAAA,0BAC9E,SAAO;AAAA,wBAAA;2CAER,MAA6B;AAAA,4BAA7B9C,YAA6B,oCAAA;AAAA,0BAAA;;;wBAE/BA,YAMW,UAAA;AAAA,0BALR,qBAAO8C,MAAA,YAAA,EAAa,YAAS,CAAIA,MAAA,YAAA,EAAa;AAAA,0BAC9C,iBAAiBA,MAAA,YAAA,EAAa,eAAeA,MAAA,WAAA,EAAY,eAAe,CAAA;AAAA,wBAAA;2CAEzE,MAA2D;AAAA,4BAA1BA,MAAA,YAAA,EAAa,0BAA9CU,YAA2D,sCAAA,EAAA,KAAA,GAAA,mBAC3DA,YAAiC,mCAAA,EAAA,KAAA,GAAA;AAAA,0BAAA;;;wBAGnCxD,YAMW,UAAA;AAAA,0BALR,iBAAiB8C,MAAA,YAAA,EAAa,eAAeA,MAAA,WAAA,EAAY,mBAAmB,CAAA;AAAA,0BAC5E,qBAAOA,MAAA,YAAA,EAAa,YAAS,CAAIA,MAAA,YAAA,EAAa;AAAA,wBAAA;2CAE/C,MAAiD;AAAA,4BAA1BA,MAAA,YAAA,EAAa,0BAApCU,YAAiD,4BAAA,EAAA,KAAA,GAAA,mBACjDA,YAA0C,4CAAA,EAAA,KAAA,GAAA;AAAA,0BAAA;;;wBAQ5CxD,YAKW,UAAA;AAAA,0BAJR,qBAAO8C,MAAA,YAAA,EAAa,YAAS,CAAIA,MAAA,YAAA,EAAa;AAAA,0BAC9C,aAAaA,MAAA,YAAA,EAAa,eAAeA,MAAA,WAAA,EAAY,WAAW,CAAA;AAAA,wBAAA;2CAEjE,MAA8C;AAAA,4BAA9C9C,YAA8C,qDAAA;AAAA,0BAAA;;;;;;;;;;;;;;oBAU7B8C,MAAA,eAAA;AAAA,oEAAA,gBAAe,QAAA,SAAA,kBAAA;AAAA,QAAG,SAASA,MAAA,WAAA;AAAA,QAAc,QAAM;AAAA,MAAA;UAE1DA,MAAA,kBAAA,GAAkB;;;;;;;;;;;;;;;;"}