{"version":3,"file":"batch-edit-article-ChI7QISp.js","sources":["../../../../app/components/list/List.vue","../../../../app/pages/(articles)/batch-edit-article.vue"],"sourcesContent":["<script setup lang=\"ts\" generic=\"T extends Article\">import { ref as _ref, computed as _computed } from 'vue';\n\n\nimport BaseIcon from \"@/components/BaseIcon.vue\";\nimport { cloneDeep, throttle } from \"@/utils\";\nimport type { Article } from \"@/types/types.ts\";\nimport DeleteIcon from \"@/components/icon/DeleteIcon.vue\";\nimport BaseInput from \"@/components/base/BaseInput.vue\";\n\ninterface IProps {\n  list: T[]\n  selectItem: T,\n}\n\nconst props = defineProps({\n  list: null,\n  selectItem: null\n})\nconst emit = defineEmits([\"selectItem\", \"delSelectItem\", \"update:searchKey\", \"update:list\"])\n\nlet dragItem: T = _ref({id: ''} as any)\nlet searchKey = _ref('')\nlet draggable = _ref(false)\n\nlet localList = _computed({\n  get() {\n    if (searchKey.value) {\n      return props.list.filter((item: Article) => {\n        //把搜索内容，分词之后，判断是否有这个词，比单纯遍历包含体验更好\n        return searchKey.value.toLowerCase().split(' ').filter(v => v).some(value => {\n          return item.title.toLowerCase().includes(value) || item.titleTranslate.toLowerCase().includes(value)\n        })\n      })\n    } else {\n      return props.list\n    }\n  },\n  set(newValue) {\n    emit('update:list', newValue)\n  }\n})\n\nfunction dragstart(item: T) {\n  dragItem.value = item;\n}\n\nconst dragenter = throttle((e, item: T) => {\n  // console.log('dragenter', 'item.id', item.id, 'dragItem.id', dragItem.id)\n  e.preventDefault();\n  // 避免源对象触发自身的dragenter事件\n  if (dragItem.value.id && dragItem.value.id !== item.id) {\n    let rIndex = props.list.findIndex(v => v.id === dragItem.value.id)\n    let rIndex2 = props.list.findIndex(v => v.id === item.id)\n    // console.log('dragenter', 'item-Index', rIndex2, 'dragItem.index', rIndex)\n    //这里不能直接用localList splice。不知道为什么会导致有筛选的情况下，多动无法变换位置\n    let temp = cloneDeep(props.list)\n    temp.splice(rIndex, 1);\n    temp.splice(rIndex2, 0, cloneDeep(dragItem.value));\n    localList.value = temp;\n  }\n}, 300)\n\nfunction dragover(e) {\n  // console.log('dragover')\n  e.preventDefault();\n}\n\nfunction dragend() {\n  // console.log('dragend')\n  draggable.value = false\n  dragItem.value = {id: ''} as T\n}\n\nfunction delItem(item: T) {\n  if (item.id === props.selectItem.id) {\n    emit('delSelectItem')\n  }\n  let rIndex = props.list.findIndex(v => v.id === item.id)\n  if (rIndex > -1) {\n    localList.value.splice(rIndex, 1)\n    //触发set\n    localList.value = localList.value\n  }\n}\n\nlet el: HTMLDivElement = _ref()\n\nfunction scrollBottom() {\n  el.value.scrollTo({\n    top: el.value.scrollHeight,\n    left: 0,\n    behavior: \"smooth\",\n  });\n}\n\ndefineExpose({scrollBottom})\n</script>\n\n<template>\n  <div class=\"list-wrapper\"\n       ref=\"el\"\n  >\n    <div class=\"search\">\n      <BaseInput\n          clearable\n          v-model=\"searchKey\"\n      >\n        <template #subfix>\n          <IconFluentSearch24Regular class=\"text-lg text-gray\"/>\n        </template>\n      </BaseInput>\n    </div>\n    <transition-group name=\"drag\" class=\"space-y-3\" tag=\"div\">\n      <div class=\"common-list-item\"\n           :class=\"[\n                (selectItem.id ===  item.id) && 'active',\n                draggable  && 'draggable',\n                (dragItem.id === item.id) && 'active'\n             ]\"\n           @click=\"emit('selectItem',item)\"\n           v-for=\"(item,index) in localList\"\n           :key=\"item.id\"\n           :draggable=\"draggable\"\n           @dragstart=\"dragstart(item)\"\n           @dragenter=\"dragenter($event, item)\"\n           @dragover=\"dragover($event)\"\n           @dragend=\"dragend()\"\n      >\n        <div class=\"left\">\n          <slot :item=\"item\" :index=\"index\"></slot>\n        </div>\n        <div class=\"right\">\n          <BaseIcon\n              @click.stop=\"delItem(item)\"\n              :title=\"$t('delete')\">\n            <DeleteIcon/>\n          </BaseIcon>\n          <div\n              @mousedown=\"draggable = true\"\n              @mouseup=\"draggable = false\"\n          >\n            <BaseIcon>\n              <IconFluentArrowMove20Regular/>\n            </BaseIcon>\n          </div>\n        </div>\n      </div>\n    </transition-group>\n  </div>\n</template>\n\n<style scoped lang=\"scss\">\n.drag-move, /* 对移动中的元素应用的过渡 */\n.drag-enter-active,\n.drag-leave-active {\n  transition: all 0.5s ease;\n}\n\n.drag-enter-from,\n.drag-leave-to {\n  opacity: 0;\n  transform: translateX(50rem);\n}\n\n/* 确保将离开的元素从布局流中删除\n  以便能够正确地计算移动的动画。 */\n.drag-leave-active {\n  position: absolute;\n}\n\n.list-wrapper {\n  transition: all .3s;\n  flex: 1;\n  overflow: overlay;\n  padding-right: .3rem;\n\n  .search {\n    margin: .6rem 0;\n  }\n}\n</style>\n","<script setup lang=\"ts\">import { ref as _ref } from 'vue';\n\nimport type { Article } from '@/types/types.ts'\nimport BaseButton from '@/components/BaseButton.vue'\nimport { cloneDeep, loadJsLib } from '@/utils'\n\nimport List from '@/components/list/List.vue'\nimport { useWindowClick } from '@/hooks/event.ts'\nimport { MessageBox } from '@/utils/MessageBox.tsx'\nimport { useRuntimeStore } from '@/stores/runtime.ts'\nimport { nanoid } from 'nanoid'\nimport EditArticle from '@/components/article/EditArticle.vue'\nimport Toast from '@/components/base/toast/Toast.ts'\nimport { getDefaultArticle } from '@/types/func.ts'\nimport BackIcon from '@/components/BackIcon.vue'\nimport MiniDialog from '@/components/dialog/MiniDialog.vue'\nimport { onMounted } from 'vue'\nimport { LIB_JS_URL } from '@/config/env.ts'\nimport { syncBookInMyStudyList } from '@/hooks/article.ts'\n\ndefinePageMeta({\n  layout: 'empty',\n})\n\nconst runtimeStore = useRuntimeStore()\n\nlet article = _ref<Article>(getDefaultArticle())\nlet editArticleRef: any = _ref()\nlet listEl: any = _ref()\n\nasync function selectArticle(item: Article) {\n  let r = await checkDataChange()\n  if (r) {\n    article.value = cloneDeep(item)\n  }\n}\n\nfunction checkDataChange() {\n  return new Promise(resolve => {\n    let editArticle: Article = editArticleRef.value.getEditArticle()\n\n    if (editArticle.id !== '-1') {\n      editArticle.title = editArticle.title.trim()\n      editArticle.titleTranslate = editArticle.titleTranslate.trim()\n      editArticle.text = editArticle.text.trim()\n      editArticle.textTranslate = editArticle.textTranslate.trim()\n\n      if (\n        editArticle.title !== article.value.title ||\n        editArticle.titleTranslate !== article.value.titleTranslate ||\n        editArticle.text !== article.value.text ||\n        editArticle.textTranslate !== article.value.textTranslate\n      ) {\n        return MessageBox.confirm(\n          '检测到数据有变动，是否保存？',\n          '提示',\n          async () => {\n            let r = await editArticleRef.value.save('save')\n            if (r) resolve(true)\n          },\n          () => resolve(true)\n        )\n      }\n    } else {\n      if (editArticle.title.trim() && editArticle.text.trim()) {\n        return MessageBox.confirm(\n          '检测到数据有变动，是否保存？',\n          '提示',\n          async () => {\n            let r = await editArticleRef.value.save('save')\n            if (r) resolve(true)\n          },\n          () => resolve(true)\n        )\n      }\n    }\n    resolve(true)\n  })\n}\n\nasync function add() {\n  let r = await checkDataChange()\n  if (r) {\n    article.value = getDefaultArticle()\n  }\n}\n\nfunction saveArticle(val: Article): boolean {\n  if (val.id) {\n    let rIndex = runtimeStore.editDict.articles.findIndex(v => v.id === val.id)\n    if (rIndex > -1) {\n      runtimeStore.editDict.articles[rIndex] = cloneDeep(val)\n    }\n  } else {\n    let has = runtimeStore.editDict.articles.find((item: Article) => item.title === val.title)\n    if (has) {\n      Toast.error('已存在同名文章！')\n      return false\n    }\n    val.id = nanoid(6)\n    runtimeStore.editDict.articles.push(val)\n    setTimeout(() => {\n      listEl.value.scrollBottom()\n    })\n  }\n  article.value = cloneDeep(val)\n  //TODO 保存完成后滚动到对应位置\n  Toast.success('保存成功！')\n  syncBookInMyStudyList()\n  return true\n}\n\nfunction saveAndNext(val: Article) {\n  if (saveArticle(val)) {\n    add()\n  }\n}\n\nlet showExport = _ref(false)\nuseWindowClick(() => (showExport.value = false))\n\nonMounted(() => {\n  if (runtimeStore.editDict.articles.length) {\n    article.value = runtimeStore.editDict.articles[0]\n  }\n})\n\nlet exportLoading = _ref(false)\nlet importLoading = _ref(false)\n\nfunction importData(e: any) {\n  let file = e.target.files[0]\n  if (!file) return\n  // no()\n  let reader = new FileReader()\n  reader.onload = async function (s) {\n    importLoading.value = true\n    const XLSX = await loadJsLib('XLSX', LIB_JS_URL.XLSX)\n    let data = s.target.result\n    let workbook = XLSX.read(data, { type: 'binary' })\n    let res: any[] = XLSX.utils.sheet_to_json(workbook.Sheets['Sheet1'])\n    if (res.length) {\n      let articles = res\n        .map(v => {\n          if (v['原文标题'] && v['原文正文']) {\n            return getDefaultArticle({\n              id: nanoid(6),\n              title: String(v['原文标题']),\n              titleTranslate: String(v['译文标题']),\n              text: String(v['原文正文']),\n              textTranslate: String(v['译文正文']),\n              audioSrc: String(v['音频地址']),\n            })\n          }\n        })\n        .filter(v => v)\n\n      let repeat = []\n      let noRepeat = []\n      articles.map((v: any) => {\n        let rIndex = runtimeStore.editDict.articles.findIndex(s => s.title === v.title)\n        if (rIndex > -1) {\n          v.index = rIndex\n          repeat.push(v)\n        } else {\n          noRepeat.push(v)\n        }\n      })\n\n      runtimeStore.editDict.articles = runtimeStore.editDict.articles.concat(noRepeat)\n\n      if (repeat.length) {\n        MessageBox.confirm(\n          '文章\"' + repeat.map(v => v.title).join(', ') + '\" 已存在，是否覆盖原有文章？',\n          '检测到重复文章',\n          () => {\n            repeat.map(v => {\n              runtimeStore.editDict.articles[v.index] = v\n              delete runtimeStore.editDict.articles[v.index]['index']\n            })\n            setTimeout(listEl.value?.scrollToBottom, 100)\n          },\n          null,\n          () => {\n            e.target.value = ''\n            importLoading.value = false\n            syncBookInMyStudyList()\n            Toast.success('导入成功！')\n          }\n        )\n      } else {\n        syncBookInMyStudyList()\n        Toast.success('导入成功！')\n      }\n    } else {\n      Toast.success('导入失败！原因：没有数据')\n    }\n    e.target.value = ''\n    importLoading.value = false\n  }\n  reader.readAsBinaryString(file)\n}\n\nasync function exportData(val: { type: string; data?: Article }) {\n  exportLoading.value = true\n  const XLSX = await loadJsLib('XLSX', LIB_JS_URL.XLSX)\n  const { type, data } = val\n  let list = []\n  let filename = ''\n  if (type === 'item') {\n    if (!data.id) {\n      return Toast.error('请选择文章')\n    }\n    list = [data]\n    filename = runtimeStore.editDict.name + `-${data.title}`\n  } else {\n    list = runtimeStore.editDict.articles\n    filename = runtimeStore.editDict.name\n  }\n  let wb = XLSX.utils.book_new()\n  let sheetData = list.map(v => {\n    return {\n      原文标题: v.title,\n      原文正文: v.text,\n      译文标题: v.titleTranslate,\n      译文正文: v.textTranslate,\n      音频地址: v.audioSrc,\n    }\n  })\n  wb.Sheets['Sheet1'] = XLSX.utils.json_to_sheet(sheetData)\n  wb.SheetNames = ['Sheet1']\n  XLSX.writeFile(wb, `${filename}.xlsx`)\n  Toast.success(filename + ' 导出成功！')\n  showExport.value = false\n  exportLoading.value = false\n}\n\nfunction updateList(e) {\n  runtimeStore.editDict.articles = e\n  syncBookInMyStudyList()\n}\n</script>\n\n<template>\n  <div class=\"add-article\">\n    <div class=\"aslide\">\n      <header class=\"flex gap-2 items-center\">\n        <BackIcon />\n        <div class=\"text-xl\">{{ runtimeStore.editDict.name }}</div>\n      </header>\n      <List\n        ref=\"listEl\"\n        :list=\"runtimeStore.editDict.articles\"\n        @update:list=\"updateList\"\n        :select-item=\"article\"\n        @del-select-item=\"article = getDefaultArticle()\"\n        @select-item=\"selectArticle\"\n      >\n        <template v-slot=\"{ item, index }\">\n          <div>\n            <div class=\"name\">\n              <span class=\"text-sm text-gray-500\" v-if=\"index != undefined\"> {{ index + 1 }}. </span>\n              {{ item.title }}\n            </div>\n            <div class=\"translate-name\">{{ `   ${item.titleTranslate}` }}</div>\n          </div>\n        </template>\n      </List>\n      <div class=\"add\" v-if=\"!article.title\">正在添加新文章...</div>\n      <div class=\"footer\">\n        <div class=\"import\">\n          <BaseButton :loading=\"importLoading\">导入</BaseButton>\n          <input\n            type=\"file\"\n            accept=\".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel\"\n            @change=\"importData\"\n          />\n        </div>\n        <div class=\"export\" style=\"position: relative\" @click.stop=\"null\">\n          <BaseButton @click=\"showExport = true\">导出</BaseButton>\n          <MiniDialog v-model=\"showExport\" style=\"width: 8rem; bottom: calc(100% + 1rem); top: unset\">\n            <div class=\"mini-row-title\">导出选项</div>\n            <div class=\"flex\">\n              <BaseButton :loading=\"exportLoading\" @click=\"exportData({ type: 'all' })\">全部</BaseButton>\n              <BaseButton\n                :loading=\"exportLoading\"\n                :disabled=\"!article.id\"\n                @click=\"exportData({ type: 'item', data: article })\"\n                >当前\n              </BaseButton>\n            </div>\n          </MiniDialog>\n        </div>\n        <BaseButton @click=\"add\">新增</BaseButton>\n      </div>\n    </div>\n\n    <EditArticle ref=\"editArticleRef\" type=\"batch\" @save=\"saveArticle\" @saveAndNext=\"saveAndNext\" :article=\"article\" />\n  </div>\n</template>\n\n<style scoped lang=\"scss\">\n.add-article {\n  width: 100%;\n  height: 100vh;\n  box-sizing: border-box;\n  color: var(--color-font-1);\n  display: flex;\n  background: var(--color-second);\n\n  .close {\n    position: absolute;\n    right: 1.2rem;\n    top: 1.2rem;\n  }\n\n  .aslide {\n    width: 14vw;\n    height: 100%;\n    padding: 0 0.6rem;\n    display: flex;\n    flex-direction: column;\n\n    $height: 3rem;\n\n    header {\n      height: $height;\n    }\n\n    .name {\n      font-size: 1.1rem;\n    }\n\n    .translate-name {\n      font-size: 1rem;\n    }\n\n    .add {\n      width: 100%;\n      box-sizing: border-box;\n      border-radius: 0.5rem;\n      margin-bottom: 0.6rem;\n      padding: 0.6rem;\n      display: flex;\n      justify-content: space-between;\n      transition: all 0.3s;\n      color: var(--color-font-active-1);\n      background: var(--color-select-bg);\n    }\n\n    .footer {\n      height: $height;\n      display: flex;\n      gap: 0.6rem;\n      align-items: center;\n      justify-content: flex-end;\n\n      .import {\n        display: inline-flex;\n        position: relative;\n\n        input {\n          position: absolute;\n          height: 100%;\n          width: 100%;\n          opacity: 0;\n        }\n      }\n    }\n  }\n}\n</style>\n"],"names":["_ref","_computed","_unref","_push","_parent","_ssrRenderComponent","_createVNode","_ssrRenderAttr","$t","_ssrRenderAttrs","_mergeProps","_isRef","_ssrInterpolate","_createBlock","_toDisplayString","_","_scopeId"],"mappings":"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"}