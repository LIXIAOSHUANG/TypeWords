{"file":"ArticleList-qKu_FTcS.js","mappings":"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","names":["_ref","_computed","_ssrRenderAttrs","_mergeProps","_unref","_push","_parent","_ssrRenderComponent","_createVNode","$attrs","_ssrInterpolate","$t","_scopeId","_createBlock","_toDisplayString","_withModifiers"],"sources":["../../../../app/components/list/ArticleList.vue"],"sourcesContent":["<script setup lang=\"ts\">import { ref as _ref, computed as _computed } from 'vue';\n\nimport type { Article } from '@/types/types.ts'\nimport BaseList from '@/components/list/BaseList.vue'\nimport BaseInput from '@/components/base/BaseInput.vue'\nimport { useArticleOptions } from '@/hooks/dict.ts'\nimport BaseIcon from '@/components/BaseIcon.vue'\n\ninterface IProps {\n  list: Article[]\n  showTranslate?: boolean\n  showDesc?: boolean\n}\n\nconst props = defineProps({\n  list: { default: () => [] as Article[] },\n  showTranslate: { type: Boolean, default: true },\n  showDesc: { type: Boolean, default: false }\n})\n\nconst emit = defineEmits([\"click\"])\n\nlet searchKey = _ref('')\nlet localList = _computed(() => {\n  if (searchKey.value) {\n    //把搜索内容，分词之后，判断是否有这个词，比单纯遍历包含体验更好\n    let t = searchKey.value.toLowerCase()\n    let strings = t.split(' ').filter(v => v)\n    let res = props.list.filter((item: Article) => {\n      return strings.some(value => {\n        return (\n          item.title.toLowerCase().includes(value) ||\n          item.titleTranslate.toLowerCase().includes(value)\n        )\n      })\n    })\n    try {\n      let d = Number(t)\n      //如果是纯数字，把那一条加进去\n      if (!isNaN(d)) {\n        if (d - 1 < props.list.length) {\n          res.push(props.list[d - 1])\n        }\n      }\n    } catch (err) {}\n    return res.sort((a: Article, b: Article) => {\n      //使完整包含的条目更靠前\n      const aMatch = a.title.toLowerCase().includes(t)\n      const bMatch = b.title.toLowerCase().includes(t)\n\n      if (aMatch && !bMatch) return -1 // a 靠前\n      if (!aMatch && bMatch) return 1 // b 靠前\n      return 0 // 都匹配或都不匹配，保持原顺序\n    })\n  } else {\n    return props.list\n  }\n})\n\nconst listRef: any = _ref(null as any)\n\nfunction scrollToBottom() {\n  listRef.value?.scrollToBottom()\n}\n\nfunction scrollToItem(index: number) {\n  listRef.value?.scrollToItem(index)\n}\nconst { isArticleCollect, toggleArticleCollect } = useArticleOptions()\n\ndefineExpose({ scrollToBottom, scrollToItem })\n</script>\n\n<template>\n  <div class=\"list\">\n    <div class=\"search\">\n      <BaseInput clearable v-model=\"searchKey\">\n        <template #subfix>\n          <IconFluentSearch24Regular class=\"text-lg text-gray\" />\n        </template>\n      </BaseInput>\n    </div>\n    <BaseList ref=\"listRef\" @click=\"(e: any) => emit('click', e)\" :list=\"localList\" v-bind=\"$attrs\">\n      <template v-slot=\"{ item, index, active }\">\n        <div class=\"common-list-item\" :class=\"{ active }\">\n          <div class=\"left\">\n            <div class=\"title-wrapper\">\n              <div class=\"item-title\">\n                <div class=\"name\">\n                  <span class=\"text-sm text-gray-500\" v-if=\"index != undefined && !searchKey\">\n                    {{ item.id == -1 ? '' : (index - (props.showDesc ? 1 : 0)) + '.' }}\n                  </span>\n                  {{ item.title }}\n                </div>\n              </div>\n              <div class=\"item-sub-title\" v-if=\"item.titleTranslate && showTranslate\">\n                <div class=\"item-translate\">{{ ` ${item.titleTranslate}` }}</div>\n              </div>\n            </div>\n          </div>\n          <div class=\"right\">\n            <BaseIcon\n              :class=\"!isArticleCollect(item) ? 'collect' : 'fill'\"\n              @click.stop=\"toggleArticleCollect(item)\"\n              :title=\"!isArticleCollect(item) ? $t('collect') : $t('uncollect')\"\n            >\n              <IconFluentStar16Regular v-if=\"!isArticleCollect(item)\" />\n              <IconFluentStar16Filled v-else />\n            </BaseIcon>\n<!--            <BaseIcon title=\"可播放音频\" v-if=\"item.audioSrc || item.audioFileId\" noBg>-->\n<!--              <IconBxVolumeFull class=\"opacity-100! color-gray\" />-->\n<!--            </BaseIcon>-->\n          </div>\n        </div>\n      </template>\n    </BaseList>\n  </div>\n</template>\n\n<style scoped lang=\"scss\">\n.list {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n  flex: 1;\n  overflow: hidden;\n\n  .search {\n    box-sizing: border-box;\n    width: 100%;\n    padding-right: var(--space);\n  }\n\n  .translate {\n    font-size: 1rem;\n  }\n}\n</style>\n"],"version":3}