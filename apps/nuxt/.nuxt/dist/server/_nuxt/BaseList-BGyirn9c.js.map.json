{"file":"BaseList-BGyirn9c.js","mappings":";;;;;;;;;;;;;;;;;;AACA,MAAM,QAAQ;;;;;;;;;;;;;AAOd,UAAM,QAAQ;AAQd,UAAM,OAAO;AAIb,UAAM,eAAe,gBAAA;AACrB,UAAM,UAAeA,IAAA;AAErB,UAAM,mBAAmBC,SAAU,MAAM;AACvC,UAAI,MAAM,UAAU;AAClB,eAAO,MAAM,KAAK,UAAU,OAAK,EAAE,OAAO,MAAM,QAAQ;AAAA,MAC1D;AACA,aAAO,MAAM;AAAA,IACf,CAAC;AAED,aAAS,mBAAmB,OAAe;AACzC,UAAI,UAAU,GAAI;AAClB,eAAS,MAAM;AACb,YAAI,MAAM,KAAK,SAAS,OAAO;AAC7B,kBAAQ,OAAO,aAAa,KAAK;AAAA,QACnC,OAAO;AACL,kBAAQ,OAAO,SAAS,KAAK,GAAG,eAAe,EAAC,OAAO,UAAU,UAAU,UAAS;AAAA,QACtF;AAAA,MACF,CAAC;AAAA,IACH;AAEA;AAAA,MACE,MAAM,iBAAiB;AAAA,MACvB,CAAC,MAAW;AACV,YAAI,MAAM,OAAQ;AAClB,YAAI,aAAa,WAAW;AAC1B,6BAAmB,CAAC;AAAA,QACtB;AAAA,MACF;AAAA,MACA,EAAC,WAAW,KAAA;AAAA,IAAI;AAGlB;AAAA,MACE,MAAM,MAAM;AAAA,MACZ,CAAC,MAAe;AACd,YAAI,MAAM,OAAQ;AAClB,YAAI,GAAG;AACL,qBAAW,MAAM,mBAAmB,iBAAiB,KAAK,GAAG,GAAG;AAAA,QAClE;AAAA,MACF;AAAA,IAAA;AAGF;AAAA,MACE,MAAM,MAAM;AAAA,MACZ,MAAM;AACJ,YAAI,MAAM,OAAQ;AAClB,iBAAS,MAAM;AACb,cAAI,MAAM,KAAK,SAAS,OAAO;AAC7B,oBAAQ,OAAO,aAAa,CAAC;AAAA,UAC/B,OAAO;AACL,oBAAQ,OAAO,SAAS,GAAG,CAAC;AAAA,UAC9B;AAAA,QACF,CAAC;AAAA,MACH;AAAA,IAAA;AAGF,aAAS,iBAAiB;AACxB,eAAS,MAAM;AACb,YAAI,MAAM,KAAK,SAAS,OAAO;AAC7B,kBAAQ,MAAM,eAAA;AAAA,QAChB,OAAO;AACL,kBAAQ,OAAO,SAAS,GAAG,QAAQ,MAAM,YAAY;AAAA,QACvD;AAAA,MACF,CAAC;AAAA,IACH;AAEA,aAAS,aAAa,OAAe;AACnC,eAAS,MAAM;AACb,YAAI,MAAM,KAAK,SAAS,OAAO;AAC7B,kBAAQ,OAAO,aAAa,KAAK;AAAA,QACnC,OAAO;AACL,kBAAQ,OAAO,SAAS,KAAK,GAAG,eAAe,EAAC,OAAO,UAAU,UAAU,UAAS;AAAA,QACtF;AAAA,MACF,CAAC;AAAA,IACH;AAEA,aAAS,aAAa,MAAW,OAAe;AAC9C,aAAO,MAAM,WAAW,MAAM,YAAY,KAAK,KAAK,MAAM,gBAAgB;AAAA,IAC5E;AAEA,aAAa,EAAC,gBAAgB,cAAa;;;;UAKjC,QAAA,KAAK,SAAS,OAAK;;UACxB,OAAO,QAAA;AAAA,mBACJ;AAAA,UAAJ,KAAI;AAAA,UACH,iBAAe;AAAA,UAChB,OAAM;AAAA,QAAA;2BAEN,CAYW,EAAA,MAAA,OAAA,UAAAC,QAAAC,UAAA,aAAA;;;gBAVN;AAAA,gBACA;AAAA,gBACA,qBAAiB,CAAG,KAAK,EAAE;AAAA,gBAC3B,cAAY;AAAA,cAAA;iCAJf,CAUsB,GAAAD,QAAAC,UAAAC,cAAA;;;;sBAFX;AAAA,sBAAa,OAAO,QAAK;AAAA,sBAAK,QAAQ,aAAa,MAAM,KAAK;AAAA,oBAAA;;;;sBAFvEC,YAGM,OAAA;AAAA,wBAHD,OAAM;AAAA,wBACL,SAAK,CAAA,WAAE,KAAI,SAAA,EAAY,MAAM,OAAK;AAAA,sBAAA;wBACtCC,WAA+E,KAAA,QAAA,WAAA;AAAA,0BAAxE;AAAA,0BAAa,OAAO,QAAK;AAAA,0BAAK,QAAQ,aAAa,MAAM,KAAK;AAAA,wBAAA;;;;;;;;;gBARzED,YAUsB,gCAAA;AAAA,kBATnB;AAAA,kBACA;AAAA,kBACA,qBAAiB,CAAG,KAAK,EAAE;AAAA,kBAC3B,cAAY;AAAA,gBAAA;mCAEb,MAGM;AAAA,oBAHNA,YAGM,OAAA;AAAA,sBAHD,OAAM;AAAA,sBACL,SAAK,CAAA,WAAE,KAAI,SAAA,EAAY,MAAM,OAAK;AAAA,oBAAA;sBACtCC,WAA+E,KAAA,QAAA,WAAA;AAAA,wBAAxE;AAAA,wBAAa,OAAO,QAAK;AAAA,wBAAK,QAAQ,aAAa,MAAM,KAAK;AAAA,sBAAA;;;;;;;;;;;;UAKjE,OAAM;AAAA,UAAW,OAAA,EAAA,YAAA,OAAA;AAAA,mBAA2B;AAAA,UAAJ,KAAI;AAAA,QAAA;AACCC,sBAAA,MAAM,MAAI,CAA1B,MAAM,UAAK;;;YAGzC;AAAA,YAAa,OAAO,QAAK;AAAA,YAAK,QAAQ,aAAa,MAAM,KAAK;AAAA,UAAA;;;;;;;;;;;;;;;","names":["_ref","_computed","_push","_parent","_scopeId","_createVNode","_renderSlot","_ssrRenderList"],"sources":["../../../../app/components/list/BaseList.vue"],"sourcesContent":["<script lang=\"ts\">\nconst limit = 200\n</script>\n<script setup lang=\"ts\">import { ref as _ref, computed as _computed } from 'vue';\n\nimport { useSettingStore } from '@/stores/setting.ts'\nimport { nextTick, watch } from 'vue'\n\nconst props = defineProps({\n  list: { default: [] },\n  activeIndex: { default: -1 },\n  activeId: { default: '' },\n  isActive: { type: Boolean, default: false },\n  static: { type: Boolean, default: true }\n})\n\nconst emit = defineEmits([\"click\"])\n\n//虚拟列表长度限制\n\nconst settingStore = useSettingStore()\nconst listRef: any = _ref()\n\nconst localActiveIndex = _computed(() => {\n  if (props.activeId) {\n    return props.list.findIndex(v => v.id === props.activeId)\n  }\n  return props.activeIndex\n})\n\nfunction scrollViewToCenter(index: number) {\n  if (index === -1) return\n  nextTick(() => {\n    if (props.list.length > limit) {\n      listRef.value?.scrollToItem(index)\n    } else {\n      listRef.value?.children[index]?.scrollIntoView({block: 'center', behavior: 'smooth'})\n    }\n  })\n}\n\nwatch(\n  () => localActiveIndex.value,\n  (n: any) => {\n    if (props.static) return\n    if (settingStore.showPanel) {\n      scrollViewToCenter(n)\n    }\n  },\n  {immediate: true}\n)\n\nwatch(\n  () => props.isActive,\n  (n: boolean) => {\n    if (props.static) return\n    if (n) {\n      setTimeout(() => scrollViewToCenter(localActiveIndex.value), 300)\n    }\n  }\n)\n\nwatch(\n  () => props.list,\n  () => {\n    if (props.static) return\n    nextTick(() => {\n      if (props.list.length > limit) {\n        listRef.value?.scrollToItem(0)\n      } else {\n        listRef.value?.scrollTo(0, 0)\n      }\n    })\n  }\n)\n\nfunction scrollToBottom() {\n  nextTick(() => {\n    if (props.list.length > limit) {\n      listRef.value.scrollToBottom()\n    } else {\n      listRef.value?.scrollTo(0, listRef.value.scrollHeight)\n    }\n  })\n}\n\nfunction scrollToItem(index: number) {\n  nextTick(() => {\n    if (props.list.length > limit) {\n      listRef.value?.scrollToItem(index)\n    } else {\n      listRef.value?.children[index]?.scrollIntoView({block: 'center', behavior: 'smooth'})\n    }\n  })\n}\n\nfunction itemIsActive(item: any, index: number) {\n  return props.activeId ? props.activeId == item.id : props.activeIndex === index\n}\n\ndefineExpose({scrollToBottom, scrollToItem})\n</script>\n\n<template>\n  <DynamicScroller\n    v-if=\"list.length > limit\"\n    :items=\"list\"\n    ref=\"listRef\"\n    :min-item-size=\"90\"\n    class=\"scroller\"\n  >\n    <template v-slot=\"{ item, index, active }\">\n      <DynamicScrollerItem\n        :item=\"item\"\n        :active=\"active\"\n        :size-dependencies=\"[item.id]\"\n        :data-index=\"index\"\n      >\n        <div class=\"list-item-wrapper\"\n             @click=\"emit('click', { item, index })\">\n          <slot :item=\"item\" :index=\"index+1\" :active=\"itemIsActive(item, index)\"></slot>\n        </div>\n      </DynamicScrollerItem>\n    </template>\n  </DynamicScroller>\n  <div v-else class=\"scroller\" style=\"overflow: auto\" ref=\"listRef\">\n    <div class=\"list-item-wrapper\" v-for=\"(item, index) in props.list\" :key=\"item.title\"\n         @click=\"emit('click', { item, index })\"\n    >\n      <slot :item=\"item\" :index=\"index+1\" :active=\"itemIsActive(item, index)\"></slot>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.scroller {\n  flex: 1;\n  //padding: 0 var(--space);\n  padding-right: var(--space);\n}\n</style>\n"],"version":3}