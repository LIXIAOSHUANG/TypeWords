{"version":3,"file":"BaseInput-mlIHP8lZ.js","sources":["../../../../app/components/base/BaseInput.vue"],"sourcesContent":["<script setup lang=\"ts\">import { ref as _ref } from 'vue';\n\nimport {ref, useAttrs, watch, computed} from 'vue';\nimport Close from \"@/components/icon/Close.vue\";\nimport {useDisableEventListener} from \"@/hooks/event.ts\";\n\ndefineOptions({\n  name: \"BaseInput\",\n})\n\nconst props = defineProps({\n  modelValue: [String, Number],\n  placeholder: String,\n  disabled: Boolean,\n  autofocus: Boolean,\n  error: Boolean,\n  type: {\n    type: String,\n    default: 'text',\n  },\n  clearable: {\n    type: Boolean,\n    default: false,\n  },\n  required: {\n    type: Boolean,\n    default: false,\n  },\n  maxLength: Number,\n  size: {\n    type: String,\n    default: 'normal',\n    validator: (value: string) => ['normal', 'large'].includes(value)\n  },\n});\n\nconst emit = defineEmits(['update:modelValue', 'input', 'change', 'focus', 'blur', 'validation', 'enter']);\nconst attrs = useAttrs();\n\nconst inputValue = ref(props.modelValue);\nlet focus = _ref(false)\nlet inputEl = _ref<HTMLDivElement>()\nconst passwordVisible = ref(false)\n\nconst inputType = computed(() => {\n  if (props.type === 'password') {\n    return passwordVisible.value ? 'text' : 'password'\n  }\n  return props.type\n})\n\nconst togglePasswordVisibility = () => {\n  passwordVisible.value = !passwordVisible.value\n}\n\nwatch(() => props.modelValue, (val) => {\n  inputValue.value = val;\n});\n\nconst onInput = (e: Event) => {\n  const target = e.target as HTMLInputElement;\n  inputValue.value = target.value;\n  emit('update:modelValue', target.value);\n  emit('input', e);\n  emit('change', e);\n};\n\nconst onChange = (e: Event) => {\n  emit('change', e);\n};\n\nconst onFocus = (e: FocusEvent) => {\n  focus.value = true\n  emit('focus', e);\n};\n\nconst onBlur = (e: FocusEvent) => {\n  focus.value = false\n  emit('blur', e);\n};\n\nconst onEnter = (e: KeyboardEvent) => {\n  emit('enter', e);\n};\n\nconst clearInput = () => {\n  inputValue.value = '';\n  emit('update:modelValue', '');\n};\n\n//当聚焦时，禁用输入监听\nuseDisableEventListener(() => focus.value)\n\nconst vFocus = {\n  mounted: (el, bind) => {\n    if (bind.value) {\n      el.focus()\n      setTimeout(() => focus.value = true)\n    }\n  }\n}\n\n</script>\n\n<template>\n  <div class=\"base-input\"\n       ref=\"inputEl\"\n       :class=\"{ 'is-disabled': disabled, 'error': props.error, focus, [`base-input--${size}`]: true }\">\n    <slot name=\"subfix\"></slot>\n    <!-- PreIcon slot -->\n    <div v-if=\"$slots.preIcon\" class=\"pre-icon\">\n      <slot name=\"preIcon\"></slot>\n    </div>\n    <IconFluentLockClosed20Regular class=\"pre-icon\" v-if=\"type === 'password'\"/>\n    <IconFluentMail20Regular class=\"pre-icon\" v-if=\"type === 'email'\"/>\n    <IconFluentPhone20Regular class=\"pre-icon\" v-if=\"type === 'tel'\"/>\n    <IconFluentNumberSymbol20Regular class=\"pre-icon\" v-if=\"type === 'code'\"/>\n\n    <input\n      v-bind=\"attrs\"\n      :type=\"inputType\"\n      :placeholder=\"placeholder\"\n      :disabled=\"disabled\"\n      :value=\"inputValue\"\n      @input=\"onInput\"\n      @change=\"onChange\"\n      @focus=\"onFocus\"\n      @blur=\"onBlur\"\n      @keydown.enter=\"onEnter\"\n      class=\"inner\"\n      v-focus=\"autofocus\"\n      :maxlength=\"maxLength\"\n    />\n    <slot name=\"prefix\"></slot>\n    <Close\n      v-if=\"clearable && inputValue && !disabled\"\n      @click=\"clearInput\"/>\n    <!-- Password visibility toggle -->\n    <div\n      v-if=\"type === 'password' && !disabled\"\n      class=\"password-toggle\"\n      @click=\"togglePasswordVisibility\"\n      :title=\"passwordVisible ? '隐藏密码' : '显示密码'\">\n      <IconFluentEye16Regular v-if=\"!passwordVisible\"/>\n      <IconFluentEyeOff16Regular v-else/>\n    </div>\n  </div>\n</template>\n\n<style scoped lang=\"scss\">\n.base-input {\n  position: relative;\n  display: inline-flex;\n  box-sizing: border-box;\n  width: 100%;\n  border: 1px solid var(--color-input-border);\n  border-radius: 6px;\n  overflow: hidden;\n  padding: .2rem .3rem;\n  transition: all .3s;\n  align-items: center;\n  background: var(--color-input-bg);\n\n  ::placeholder {\n    font-size: 0.9rem;\n    color: darkgray;\n  }\n\n  // normal size (default)\n  &--normal {\n    padding: .2rem .3rem;\n\n    .inner {\n      height: 1.5rem;\n      font-size: 1rem;\n    }\n  }\n\n  // large size\n  &--large {\n    padding: .4rem .6rem;\n    border-radius: .5rem;\n\n    .inner {\n      height: 2rem;\n      font-size: 1.125rem;\n    }\n  }\n\n  &.is-disabled {\n    opacity: 0.6;\n  }\n\n  &.error {\n    border-color: #f56c6c;\n    background: rgba(245, 108, 108, 0.07);\n  }\n\n  &.focus {\n    border: 1px solid var(--color-select-bg);\n  }\n\n  &:disabled {\n    background-color: #f5f5f5;\n    cursor: not-allowed;\n  }\n\n  // PreIcon styling\n  &.has-preicon {\n    .inner {\n      padding-left: 2rem;\n    }\n  }\n\n  .pre-icon {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: var(--color-input-color);\n    opacity: 0.6;\n    z-index: 1;\n    pointer-events: none;\n    margin-right: 0.2rem;\n  }\n\n  .inner {\n    flex: 1;\n    font-size: 1rem;\n    outline: none;\n    border: none;\n    box-sizing: border-box;\n    transition: all .3s;\n    height: 1.5rem;\n    color: var(--color-input-color);\n    background: transparent;\n    width: 100%;\n  }\n\n  .password-toggle {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 20px;\n    height: 20px;\n    margin-left: 4px;\n    cursor: pointer;\n    color: var(--color-input-color);\n    opacity: 0.6;\n    transition: opacity 0.2s;\n\n    &:hover {\n      opacity: 1;\n    }\n  }\n}\n</style>\n"],"names":["_ref","_unref","$slots","_ssrRenderComponent","_ssrRenderAttr"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUA,UAAM,QAAQ;AA0Bd,UAAM,OAAO;AACb,UAAM,QAAQ,SAAA;AAEd,UAAM,aAAa,IAAI,MAAM,UAAU;AACvC,QAAI,QAAQA,IAAK,KAAK;AACtB,QAAI,UAAUA,IAAA;AACd,UAAM,kBAAkB,IAAI,KAAK;AAEjC,UAAM,YAAY,SAAS,MAAM;AAC/B,UAAI,MAAM,SAAS,YAAY;AAC7B,eAAO,gBAAgB,QAAQ,SAAS;AAAA,MAC1C;AACA,aAAO,MAAM;AAAA,IACf,CAAC;AAMD,UAAM,MAAM,MAAM,YAAY,CAAC,QAAQ;AACrC,iBAAW,QAAQ;AAAA,IACrB,CAAC;AA4BD,UAAM,aAAa,MAAM;AACvB,iBAAW,QAAQ;AACnB,WAAK,qBAAqB,EAAE;AAAA,IAC9B;AAGA,4BAAwB,MAAM,MAAM,KAAK;AAEzC,UAAM,SAAS;AAAA,MACb,SAAS,CAAC,IAAI,SAAS;AACrB,YAAI,KAAK,OAAO;AACd,aAAG,MAAA;AACH,qBAAW,MAAM,MAAM,QAAQ,IAAI;AAAA,QACrC;AAAA,MACF;AAAA,IAAA;;;;;;;;;QAMK,OAAK,CAAC,cAAY,EAAA,eAEO,QAAA,UAAQ,SAAW,MAAM,OAAK,OAAEC,MAAA,KAAA,GAAK,CAAA,eAAkB,QAAA,IAAI,EAAA,GAAA,MAAA;AAAA,iBADhF;AAAA,QAAJ,KAAI;AAAA,MAAA;;AAIIC,UAAAA,KAAAA,OAAO,SAAO;;;;;;;UAG6B,QAAA,SAAI,YAAA;AAA3B,cAAAC,mBAAA,0CAAA,EAAA,OAAM,cAAU,MAAA,OAAA,CAAA;AAAA;;;UACC,QAAA,SAAI,SAAA;AAA3B,cAAAA,mBAAA,oCAAA,EAAA,OAAM,cAAU,MAAA,OAAA,CAAA;AAAA;;;UACQ,QAAA,SAAI,OAAA;AAA3B,cAAAA,mBAAA,qCAAA,EAAA,OAAM,cAAU,MAAA,OAAA,CAAA;AAAA;;;UACc,QAAA,SAAI,QAAA;AAA3B,cAAAA,mBAAA,4CAAA,EAAA,OAAM,cAAU,MAAA,OAAA,CAAA;AAAA;;;+CAGvCF,MAAA,KAAA,GAAK;AAAA,QACZ,MAAM,UAAA;AAAA,QACN,aAAa,QAAA;AAAA,QACb,UAAU,QAAA;AAAA,QACV,OAAO,WAAA;AAAA,QAMR,OAAM;AAAA,QAEL,WAAW,QAAA;AAAA,MAAA,sCADH,QAAA,SAAS,CAAA,CAAA,CAAA,mBAAA;;UAKZ,QAAA,aAAa,WAAA,SAAU,CAAK,QAAA,UAAQ;AACzC,cAAAE,mBAAA,OAAA,EAAA,SAAO,cAAU,MAAA,OAAA,CAAA;AAAA;;;AAGZ,UAAA,QAAA,wBAAwB,QAAA,UAAQ;AAGrC,cAAA,+BAAAC,cAAA,SAAO,gBAAA,QAAe,SAAA,MAAA,CAAA,mBAAA;aACQ,gBAAA,OAAe;;;;;;;;;;;;;;;;;;;;"}