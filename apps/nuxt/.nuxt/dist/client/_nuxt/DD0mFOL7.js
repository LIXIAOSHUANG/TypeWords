const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./D_JQWYvL.js","./Dbiv707D.js","./entry.EYAiiZOw.css","./C3NBTwW5.js","./B55v04t5.js","./BaseButton.DGhsrd12.css","./Dialog.D1qJRpPK.css"])))=>i.map(i=>d[i]);
import{Y as ne,o as T,c as A,a as d,d as Ke,bS as dt,W as Qe,k as o,f as g,l as N,w as k,b,t as h,i as I,a5 as Q,X as Xe,bT as ft,az as Ye,bU as Ge,a4 as te,Z as pt,ag as Ce,$ as mt,R as vt,aJ as _t,aP as Pe,U as Be,bE as J,bV as ht,bh as ve,z as _e,b9 as he,F as re,r as ce,h as O,e as ee,aX as gt,bW as yt,bX as xt,bt as Me,aY as wt,a9 as bt}from"./Dbiv707D.js";import{_ as kt}from"./DnSopYlT.js";import{_ as Tt}from"./Bf_VzGzh.js";import{_ as Ct}from"./BpE2qKjq.js";import{_ as Pt}from"./BmtX_f65.js";import{B}from"./B55v04t5.js";import{T as Se,S as St,O as At}from"./BXMCzVga.js";import{s as Rt}from"./S7Ir0EnR.js";import{b as Et}from"./B_gjpDCr.js";import{E as Ft}from"./pfyoj1Bm.js";import{B as z}from"./CdkHU8iM.js";import{I as $e}from"./B__SE3Na.js";import{A as ze}from"./B_CyOjKG.js";import{B as ge}from"./CjoTdGiq.js";const Vt={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function It(p,u){return T(),A("svg",Vt,[...u[0]||(u[0]=[d("path",{fill:"currentColor",d:"M9.723 2.084a.5.5 0 0 1 .554 0a15.05 15.05 0 0 0 6.294 2.421A.5.5 0 0 1 17 5v4.5c0 3.891-2.307 6.73-6.82 8.467a.5.5 0 0 1-.36 0C5.308 16.23 3 13.39 3 9.5V5a.5.5 0 0 1 .43-.495a15.05 15.05 0 0 0 6.293-2.421m-.124 1.262A16 16 0 0 1 4 5.428V9.5c0 3.392 1.968 5.863 6 7.463c4.032-1.6 6-4.071 6-7.463V5.428a16 16 0 0 1-5.6-2.082l-.4-.249zM10.75 13.75a.75.75 0 1 1-1.5 0a.75.75 0 0 1 1.5 0m-2-5.5a1.25 1.25 0 1 1 2.5 0c0 .465-.27.762-.728 1.22l-.035.035c-.415.413-.987.983-.987 1.895v.1a.5.5 0 0 0 1 0v-.1c0-.467.27-.765.728-1.222l.037-.037c.414-.412.985-.981.985-1.891a2.25 2.25 0 0 0-4.5 0a.5.5 0 0 0 1 0"},null,-1)])])}const Bt=ne({name:"fluent-shield-question20-regular",render:It}),Mt={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function $t(p,u){return T(),A("svg",Mt,[...u[0]||(u[0]=[d("path",{fill:"currentColor",d:"M6 3a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h8a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3zM4 6a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2zm6.5.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 1 0 1 0v-3h3a.5.5 0 1 0 0-1h-3z"},null,-1)])])}const zt=ne({name:"fluent-add-square20-regular",render:$t}),Lt={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function Dt(p,u){return T(),A("svg",Lt,[...u[0]||(u[0]=[d("path",{fill:"currentColor",d:"M11.997 3.002c0-.873-1.04-1.327-1.68-.733l-3.87 3.594a.5.5 0 0 1-.34.133H3.5a1.5 1.5 0 0 0-1.5 1.5v5.001a1.5 1.5 0 0 0 1.5 1.5h2.606a.5.5 0 0 1 .34.134l2.834 2.631l.153-.609q.06-.24.156-.469l-2.463-2.286a1.5 1.5 0 0 0-1.02-.4H3.5a.5.5 0 0 1-.5-.5V7.496a.5.5 0 0 1 .5-.5h2.606a1.5 1.5 0 0 0 1.02-.401l3.872-3.594v10.941l1-1zm3.965 1.66a7.97 7.97 0 0 1 1.988 4.454a2.9 2.9 0 0 0-1.022-.112a6.97 6.97 0 0 0-1.71-3.674a.5.5 0 0 1 .744-.667m-1.2 2.585c.416.72.65 1.495.718 2.272q-.2.14-.379.319l-.626.626a4.5 4.5 0 0 0-.578-2.717a.5.5 0 0 1 .865-.5m-3.782 8.128l4.828-4.83a1.87 1.87 0 1 1 2.644 2.645l-4.828 4.83a2.2 2.2 0 0 1-1.02.578l-1.498.375a.89.89 0 0 1-1.078-1.08l.374-1.497a2.2 2.2 0 0 1 .578-1.021"},null,-1)])])}const Nt=ne({name:"fluent-speaker-edit20-regular",render:Dt}),jt={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function Ut(p,u){return T(),A("svg",jt,[...u[0]||(u[0]=[d("path",{fill:"currentColor",d:"M2 3.5a.5.5 0 0 1 1 0v1a.5.5 0 0 1-1 0zm0 3a.5.5 0 0 1 1 0v2a.5.5 0 0 1-1 0zm0 4a.5.5 0 0 1 1 0v2a.5.5 0 0 1-1 0zm0 4a.5.5 0 0 1 1 0v1a.5.5 0 0 1-1 0zm2.146-4.646a.5.5 0 0 1 0-.708l4.5-4.5a.5.5 0 1 1 .708.708L5.707 9H15.5a.5.5 0 0 1 0 1H5.707l3.647 3.646a.5.5 0 0 1-.708.708zM17 3.5a.5.5 0 0 1 1 0v12a.5.5 0 0 1-1 0z"},null,-1)])])}const qt=ne({name:"fluent-padding-left20-regular",render:Ut}),Ot={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function Wt(p,u){return T(),A("svg",Ot,[...u[0]||(u[0]=[d("path",{fill:"currentColor",d:"M10 13a3 3 0 1 0 0-6a3 3 0 0 0 0 6m.5-10.5a.5.5 0 0 0-1 0v1.52A6 6 0 0 0 4.02 9.5H2.5a.5.5 0 0 0 0 1h1.52a6 6 0 0 0 5.48 5.48v1.52a.5.5 0 0 0 1 0v-1.52a6 6 0 0 0 5.48-5.48h1.52a.5.5 0 0 0 0-1h-1.52a6 6 0 0 0-5.48-5.48zM10 15a5 5 0 1 1 0-10a5 5 0 0 1 0 10"},null,-1)])])}const Ht=ne({name:"fluent-my-location20-regular",render:Wt}),Zt={viewBox:"0 0 48 48",width:"1.2em",height:"1.2em"};function Kt(p,u){return T(),A("svg",Zt,[...u[0]||(u[0]=[d("g",{fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"4"},[d("path",{"stroke-linecap":"round",d:"M24 44C12.954 44 4 35.046 4 24S12.954 4 24 4s20 8.954 20 20"}),d("path",{d:"M20 24v-6.928l6 3.464L32 24l-6 3.464l-6 3.464z"}),d("path",{"stroke-linecap":"round",d:"M37.05 32v10M42 36.95H32"})],-1)])])}const Qt=ne({name:"icon-park-outline-add-music",render:Kt}),Xt={key:0,class:"edit-text"},Yt={class:"flex justify-end mt-2"},Gt=Ke({__name:"EditAbleText",props:{value:{default:""},disabled:{type:Boolean,default:!1}},emits:["save"],setup(p,{emit:u}){const i=p,r=u;let t=I(""),m=I(!1);dt(()=>{t.value=i.value});function f(){r("save",t.value),m.value=!1}const{t:n}=Qe();function _(){if(i.disabled)return Q.info(n("wait_translation"));m.value=!m.value,t.value=i.value}return(a,s)=>o(m)?(T(),A("div",Xt,[g(Se,{modelValue:o(t),"onUpdate:modelValue":s[0]||(s[0]=l=>N(t)?t.value=l:t=l),ref:"inputRef",textarea:"",autosize:"",autofocus:"",type:"textarea","input-style":"color: var(--color-font-1);font-size: 1rem;"},null,8,["modelValue"]),d("div",Yt,[g(B,{onClick:_},{default:k(()=>[b(h(o(n)("cancel")),1)]),_:1}),g(B,{onClick:f},{default:k(()=>[b(h(o(n)("apply")),1)]),_:1})])])):(T(),A("div",{key:1,class:"text",onClick:_},h(p.value),1))}}),Le=Object.assign(Xe(Gt,[["__scopeId","data-v-ec729dec"]]),{__name:"EditAbleText"});class De extends Error{constructor(u){super(u)}}class Jt{axios;env;config;constructor(u={}){this.env=u.env||"node",this.axios=u.axios||ft,this.config=u.config||{}}async translate(u,i,r,t={}){return{...await this.query(u,i,r,{...this.config,...t}),engine:this.name}}request(u,i){return this.axios(u,i)}async detect(u){}textToSpeech(u,i,r){return Promise.resolve(null)}}var ye={exports:{}},xe={exports:{}},Ne;function en(){return Ne||(Ne=1,(function(){var p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u={rotl:function(i,r){return i<<r|i>>>32-r},rotr:function(i,r){return i<<32-r|i>>>r},endian:function(i){if(i.constructor==Number)return u.rotl(i,8)&16711935|u.rotl(i,24)&4278255360;for(var r=0;r<i.length;r++)i[r]=u.endian(i[r]);return i},randomBytes:function(i){for(var r=[];i>0;i--)r.push(Math.floor(Math.random()*256));return r},bytesToWords:function(i){for(var r=[],t=0,m=0;t<i.length;t++,m+=8)r[m>>>5]|=i[t]<<24-m%32;return r},wordsToBytes:function(i){for(var r=[],t=0;t<i.length*32;t+=8)r.push(i[t>>>5]>>>24-t%32&255);return r},bytesToHex:function(i){for(var r=[],t=0;t<i.length;t++)r.push((i[t]>>>4).toString(16)),r.push((i[t]&15).toString(16));return r.join("")},hexToBytes:function(i){for(var r=[],t=0;t<i.length;t+=2)r.push(parseInt(i.substr(t,2),16));return r},bytesToBase64:function(i){for(var r=[],t=0;t<i.length;t+=3)for(var m=i[t]<<16|i[t+1]<<8|i[t+2],f=0;f<4;f++)t*8+f*6<=i.length*8?r.push(p.charAt(m>>>6*(3-f)&63)):r.push("=");return r.join("")},base64ToBytes:function(i){i=i.replace(/[^A-Z0-9+\/]/ig,"");for(var r=[],t=0,m=0;t<i.length;m=++t%4)m!=0&&r.push((p.indexOf(i.charAt(t-1))&Math.pow(2,-2*m+8)-1)<<m*2|p.indexOf(i.charAt(t))>>>6-m*2);return r}};xe.exports=u})()),xe.exports}var we,je;function Ue(){if(je)return we;je=1;var p={utf8:{stringToBytes:function(u){return p.bin.stringToBytes(unescape(encodeURIComponent(u)))},bytesToString:function(u){return decodeURIComponent(escape(p.bin.bytesToString(u)))}},bin:{stringToBytes:function(u){for(var i=[],r=0;r<u.length;r++)i.push(u.charCodeAt(r)&255);return i},bytesToString:function(u){for(var i=[],r=0;r<u.length;r++)i.push(String.fromCharCode(u[r]));return i.join("")}}};return we=p,we}var be,qe;function tn(){if(qe)return be;qe=1,be=function(i){return i!=null&&(p(i)||u(i)||!!i._isBuffer)};function p(i){return!!i.constructor&&typeof i.constructor.isBuffer=="function"&&i.constructor.isBuffer(i)}function u(i){return typeof i.readFloatLE=="function"&&typeof i.slice=="function"&&p(i.slice(0,0))}return be}var Oe;function nn(){return Oe||(Oe=1,(function(){var p=en(),u=Ue().utf8,i=tn(),r=Ue().bin,t=function(m,f){m.constructor==String?f&&f.encoding==="binary"?m=r.stringToBytes(m):m=u.stringToBytes(m):i(m)?m=Array.prototype.slice.call(m,0):!Array.isArray(m)&&m.constructor!==Uint8Array&&(m=m.toString());for(var n=p.bytesToWords(m),_=m.length*8,a=1732584193,s=-271733879,l=-1732584194,e=271733878,c=0;c<n.length;c++)n[c]=(n[c]<<8|n[c]>>>24)&16711935|(n[c]<<24|n[c]>>>8)&4278255360;n[_>>>5]|=128<<_%32,n[(_+64>>>9<<4)+14]=_;for(var C=t._ff,w=t._gg,P=t._hh,E=t._ii,c=0;c<n.length;c+=16){var W=a,X=s,fe=l,pe=e;a=C(a,s,l,e,n[c+0],7,-680876936),e=C(e,a,s,l,n[c+1],12,-389564586),l=C(l,e,a,s,n[c+2],17,606105819),s=C(s,l,e,a,n[c+3],22,-1044525330),a=C(a,s,l,e,n[c+4],7,-176418897),e=C(e,a,s,l,n[c+5],12,1200080426),l=C(l,e,a,s,n[c+6],17,-1473231341),s=C(s,l,e,a,n[c+7],22,-45705983),a=C(a,s,l,e,n[c+8],7,1770035416),e=C(e,a,s,l,n[c+9],12,-1958414417),l=C(l,e,a,s,n[c+10],17,-42063),s=C(s,l,e,a,n[c+11],22,-1990404162),a=C(a,s,l,e,n[c+12],7,1804603682),e=C(e,a,s,l,n[c+13],12,-40341101),l=C(l,e,a,s,n[c+14],17,-1502002290),s=C(s,l,e,a,n[c+15],22,1236535329),a=w(a,s,l,e,n[c+1],5,-165796510),e=w(e,a,s,l,n[c+6],9,-1069501632),l=w(l,e,a,s,n[c+11],14,643717713),s=w(s,l,e,a,n[c+0],20,-373897302),a=w(a,s,l,e,n[c+5],5,-701558691),e=w(e,a,s,l,n[c+10],9,38016083),l=w(l,e,a,s,n[c+15],14,-660478335),s=w(s,l,e,a,n[c+4],20,-405537848),a=w(a,s,l,e,n[c+9],5,568446438),e=w(e,a,s,l,n[c+14],9,-1019803690),l=w(l,e,a,s,n[c+3],14,-187363961),s=w(s,l,e,a,n[c+8],20,1163531501),a=w(a,s,l,e,n[c+13],5,-1444681467),e=w(e,a,s,l,n[c+2],9,-51403784),l=w(l,e,a,s,n[c+7],14,1735328473),s=w(s,l,e,a,n[c+12],20,-1926607734),a=P(a,s,l,e,n[c+5],4,-378558),e=P(e,a,s,l,n[c+8],11,-2022574463),l=P(l,e,a,s,n[c+11],16,1839030562),s=P(s,l,e,a,n[c+14],23,-35309556),a=P(a,s,l,e,n[c+1],4,-1530992060),e=P(e,a,s,l,n[c+4],11,1272893353),l=P(l,e,a,s,n[c+7],16,-155497632),s=P(s,l,e,a,n[c+10],23,-1094730640),a=P(a,s,l,e,n[c+13],4,681279174),e=P(e,a,s,l,n[c+0],11,-358537222),l=P(l,e,a,s,n[c+3],16,-722521979),s=P(s,l,e,a,n[c+6],23,76029189),a=P(a,s,l,e,n[c+9],4,-640364487),e=P(e,a,s,l,n[c+12],11,-421815835),l=P(l,e,a,s,n[c+15],16,530742520),s=P(s,l,e,a,n[c+2],23,-995338651),a=E(a,s,l,e,n[c+0],6,-198630844),e=E(e,a,s,l,n[c+7],10,1126891415),l=E(l,e,a,s,n[c+14],15,-1416354905),s=E(s,l,e,a,n[c+5],21,-57434055),a=E(a,s,l,e,n[c+12],6,1700485571),e=E(e,a,s,l,n[c+3],10,-1894986606),l=E(l,e,a,s,n[c+10],15,-1051523),s=E(s,l,e,a,n[c+1],21,-2054922799),a=E(a,s,l,e,n[c+8],6,1873313359),e=E(e,a,s,l,n[c+15],10,-30611744),l=E(l,e,a,s,n[c+6],15,-1560198380),s=E(s,l,e,a,n[c+13],21,1309151649),a=E(a,s,l,e,n[c+4],6,-145523070),e=E(e,a,s,l,n[c+11],10,-1120210379),l=E(l,e,a,s,n[c+2],15,718787259),s=E(s,l,e,a,n[c+9],21,-343485551),a=a+W>>>0,s=s+X>>>0,l=l+fe>>>0,e=e+pe>>>0}return p.endian([a,s,l,e])};t._ff=function(m,f,n,_,a,s,l){var e=m+(f&n|~f&_)+(a>>>0)+l;return(e<<s|e>>>32-s)+f},t._gg=function(m,f,n,_,a,s,l){var e=m+(f&_|n&~_)+(a>>>0)+l;return(e<<s|e>>>32-s)+f},t._hh=function(m,f,n,_,a,s,l){var e=m+(f^n^_)+(a>>>0)+l;return(e<<s|e>>>32-s)+f},t._ii=function(m,f,n,_,a,s,l){var e=m+(n^(f|~_))+(a>>>0)+l;return(e<<s|e>>>32-s)+f},t._blocksize=16,t._digestsize=16,ye.exports=function(m,f){if(m==null)throw new Error("Illegal argument "+m);var n=p.wordsToBytes(t(m,f));return f&&f.asBytes?n:f&&f.asString?r.bytesToString(n):p.bytesToHex(n)}})()),ye.exports}var ln=nn();const on=Ye(ln),an={stringify:p=>Object.entries(p).map(([u,i])=>`${encodeURIComponent(u)}=${encodeURIComponent(i)}`).join("&")},We=[["auto","auto"],["zh-CN","zh"],["en","en"],["yue","yue"],["wyw","wyw"],["ja","jp"],["ko","kor"],["fr","fra"],["es","spa"],["th","th"],["ar","ara"],["ru","ru"],["pt","pt"],["de","de"],["it","it"],["el","el"],["nl","nl"],["pl","pl"],["bg","bul"],["et","est"],["da","dan"],["fi","fin"],["cs","cs"],["ro","rom"],["sl","slo"],["sv","swe"],["hu","hu"],["zh-TW","cht"],["vi","vie"]];class G extends Jt{name="baidu";endpoint="/baidu";async query(u,i,r,t){const m=Date.now(),{endpoint:f}=this,{appid:n,key:_}=t,a=await this.request(f,{params:{from:G.langMap.get(i),to:G.langMap.get(r),q:u,salt:m,appid:n,sign:on(n+u+m+_)}}).catch(()=>{throw new De("NETWORK_ERROR")}),{data:s}=a;if(s.error_code)throw console.error(new Error("[Baidu service]"+s.error_msg)),new De("API_SERVER_ERROR");const{trans_result:l,from:e}=s,c=l.map(({dst:w})=>w),C=G.langMapReverse.get(e);return{text:u,from:C,to:r,origin:{paragraphs:l.map(({src:w})=>w),tts:await this.textToSpeech(u,C)},trans:{paragraphs:c,tts:await this.textToSpeech(c.join(" "),r)}}}static langMap=new Map(We);static langMapReverse=new Map(We.map(([u,i])=>[i,u]));getSupportLanguages(){return[...G.langMap.keys()]}async textToSpeech(u,i){return`https://fanyi.baidu.com/gettts?${an.stringify({lan:G.langMap.get(i!=="auto"?i:"zh-CN")||"zh",text:u,spd:5})}`}}function de(p){return p.sections.map(u=>u.map(i=>i.translate.trim()).filter(i=>i).join(` 
`)).filter(u=>u).join(` 

`)}function Je(p){return p.sections.map(u=>u.map(i=>i.text).filter(i=>i).join(`
`)).filter(u=>u).join(`

`)}async function sn(p,u,i=!1,r){let t;if(u===Ge.Baidu&&(t=new G({config:{appid:"20230910001811857",key:"Xxe_yftQR3K3Ue43NQMC"}})),t){p.titleTranslate||t.translate(p.title,"en","zh-CN").then(l=>{p.titleTranslate=l.trans.paragraphs[0]});let m=[],f=0,n=new Map;const _=async l=>{try{let e=await t.translate(l.text,"en","zh-CN");if(console.log(e),e){const c=()=>{l.translate=e.trans.paragraphs[0],i||(p.textTranslate+=l.translate+`
`)};return Promise.resolve(c)}else return Promise.reject(()=>_(l))}catch{return Promise.reject(()=>_(l))}};let a=0,s=0;p.sections.map(l=>a+=l.length);for(let l=0;l<p.sections.length;l++){let e=p.sections[l];for(let c=0;c<e.length;c++){let C=e[c],w=_(C);if(i)m.push(w);else{n.set(C.text,0);let P,E=await w.catch(W=>{P=W});for(;P;){let W=n.get(C.text);if(W>2)break;E=await P().catch(X=>{P=X}),n.set(C.text,W+1)}E&&E(),s++,r&&r(Math.floor(s/a*100))}}}if(m.length){let l=-1,e=0;return r&&(l=Rt(()=>{if(e++,e>90)return clearInterval(l);r(e)},100)),new Promise(async c=>{let C=[];do{if(f>2)return c(!0);let w=await Promise.allSettled(m);m=[],w.map(P=>{P.status==="fulfilled"?C.push(P.value):m.push(P.reason())}),f++}while(m.length);C.map(w=>w()),p.textTranslate=de(p),r&&(clearInterval(l),e=100,r(100)),c(!0)})}else p.textTranslate=de(p)}}function rn(p){p=p.replace(/[\u2018\u2019\u201A\u201B]/g,"'").replace(/[\u201C\u201D\u201E\u201F]/g,'"');const u=p.length,i=[];let r=0;for(;r<u;){const m=p[r];if(/\s/.test(m)){r++;continue}const f=p.slice(r);let n=f.match(/^[\$¥€£]\d{1,3}(?:,\d{3})*(?:\.\d+)?%?/);if(n){i.push({word:n[0],start:r,end:r+n[0].length,type:J.Number}),r+=n[0].length;continue}if(n=f.match(/^\d{1,3}(?:,\d{3})*(?:\.\d+)?%?/),n){i.push({word:n[0],start:r,end:r+n[0].length,type:J.Number}),r+=n[0].length;continue}if(n=f.match(/^[A-Za-z]+(?:\.[A-Za-z]+)+\.?/),n){i.push({word:n[0],start:r,end:r+n[0].length,type:J.Word}),r+=n[0].length;continue}if(n=f.match(/^[A-Za-z0-9]+(?:[\'\-][A-Za-z0-9]+)*/),n){i.push({word:n[0],start:r,end:r+n[0].length,type:J.Word}),r+=n[0].length;continue}if(/[^\w\s]/.test(m)){i.push({word:m,start:r,end:r+1,type:J.Symbol}),r+=1;continue}i.push({word:m,start:r,end:r+1,type:J.Symbol}),r+=1}return i.map((m,f)=>{const n=i[f+1],_=n?p.slice(m.end,n.start):p.slice(m.end),a=/\s/.test(_);return ht({word:m.word,nextSpace:a,type:m.type})})}function un(p){let u=p.text.trim(),i=[];u.split(`

`).filter(Boolean).map((n,_)=>{let a=[];i.push(a),n.trim().split(`
`).filter(Boolean).map((s,l,e)=>{s=s.trim(),l<e.length-1&&(s+=" ");let c=te({text:s,translate:"",words:rn(s),audioPosition:[0,0]});a.push(c)})}),i=i.filter(n=>n.length),p.sections=i;let r=0,t=p.textTranslate?.split(`

`)||[];for(let n=0;n<p.sections.length;n++){let _=p.sections[n],a=[];try{a=t[n].split(`
`)}catch{}for(let s=0;s<_.length;s++){let l=_[s];try{let e=a[s];e.trim()?l.translate=e:r++}catch{r++}}}u=Je(p);let m=de(p);p.text=u,p.textTranslate=m;let f=0;return p?.lrcPosition?.length&&p.sections.map((n,_)=>{n.map((a,s)=>{a.audioPosition=p.lrcPosition[f],f++})}),r}function cn(p){if(p=p.trim(),!p)return"";const u=["Mr","Mrs","Ms","Dr","Prof","Sr","Jr","St","Co","Ltd","Inc","e.g","i.e","U.S.A","U.S","U.K","etc"];function i(f,n){const _=f.slice(0,n+1),a=f.slice(n+1);return!(new RegExp("\\b("+u.join("|")+")\\.$","i").test(_)||/\d+\.$/.test(_)||/\d+\.\d/.test(f.slice(n-1,n+2))||/%/.test(a)||/[\$¥€]\d/.test(_+a))}function r(f){const n=l=>/\w/.test(l);let _=[],a=!1,s=!1;for(let l=0;l<f.length;l++){const e=f[l];if(e==="'"){const c=l>0?f[l-1]:"",C=l+1<f.length?f[l+1]:"";if(n(c)&&n(C)){_.push("'");continue}a?(_.length&&_[_.length-1]===" "&&_.pop(),_.push("'"),a=!1):(_.push("'"),a=!0)}else e==='"'?s?(_.length&&_[_.length-1]===" "&&_.pop(),_.push('"'),s=!1):(_.push('"'),s=!0):_.push(e)}return _.join("")}return p.replaceAll(`

`,"`^`").replaceAll(`
`,"").split("`^`").map(f=>{if(f=f.trim(),!f)return"";f=f.replace(/\n/g," "),f=r(f);const n=f.match(/[^.!?。！？]+[.!?。！？'"”’)]*/g)||[],_=[];n.forEach(l=>{if(l=l.trim(),!l)return;const e=l.length-1;if(/[.!?。！？]/.test(l[e])){const c=f.indexOf(l);if(!i(f,c+l.length-1)){_.length>0?_[_.length-1]+=" "+l:_.push(l);return}}_.push(l)});const a=[];let s=0;for(;s<_.length;){let l=_[s];if(s+1<_.length){const e=_[s+1];if(/['"”’)\]]$/.test(l)&&/^[a-z]|^(I|You|She|He|They|We)\b/i.test(e)){a.push(l+" "+e),s+=2;continue}}a.push(l),s+=1}return a.join(`
`)}).filter(f=>f).join(`

`)}function dn(p){const u=new Intl.Segmenter("zh-CN",{granularity:"sentence"});return p.replaceAll(`

`,"`^`").replaceAll(`
`,"").split("`^`").filter(t=>t).map((t,m)=>{const f=u.segment(t);let n="";return Array.from(f).map(_=>{let a=_.segment;a&&(a[a.length-1]==="“"?(a=a.substring(0,a.length-1),n+=a+`
“`):n+=a+`
`)}),n}).join(`
`).trim()}function fn(){const p=Et();pt();let u=I(0);function i(r,t){if(r.audioPosition?.length&&t&&t.src){clearTimeout(u.value),t.played&&t.pause();let m=r.audioPosition[0];t.currentTime=m,t.play();let f=r.audioPosition?.[1];f&&f!==-1&&(u.value=setTimeout(()=>{console.log("停"),t.pause()},(f-m)/t.playbackRate*1e3))}else p(r.text)}return{playSentenceAudio:i}}function lo(p=!1){Ce(()=>{const u=mt();let r=vt().editDict,t=u.article.bookList.findIndex(m=>m.id===r.id);!r.custom&&r.id!==_t.articleCollect&&(r.custom=!0,r.id.includes("_custom")||(r.id+="_custom_"+Pe(6))),r.length=r.articles.length,t>-1?(u.article.bookList[t]=Be(r),p&&(u.article.studyIndex=t)):(u.article.bookList.push(Be(r)),p&&(u.article.studyIndex=u.article.bookList.length-1))},100)}var K=class Ae{static initParams(u,i){return[u.replace(/\s+/g,"").toLowerCase(),i.replace(/\s+/g,"").toLowerCase()]}static checkThanosType(u){if(typeof u!="string")throw new Error("first argument should be a string")}static checkRivalType(u){if(typeof u!="string")throw new Error("second argument should be a string")}static checkAvengersType(u){if(!Array.isArray(u))throw new Error("second argument should be an array of strings");if(u.find(i=>typeof i!="string"))throw new Error("second argument should be an array of strings")}sortMatch(u,i){return Ae.checkThanosType(u),Ae.checkAvengersType(i),i.map((r,t)=>({member:r,index:t,rating:this.similarity(u,r)})).sort((r,t)=>r.rating-t.rating)}},pn=class Re extends K{static lcsLength(u,i){K.checkThanosType(u),K.checkRivalType(i);let[r,t]=K.initParams(u,i),[m,f]=[r.length,t.length],n=[...Array(m+1)].map(()=>Array(f+1).fill(0));for(let _=1;_<=m;++_)for(let a=1;a<=f;++a)n[_][a]=r[_-1]===t[a-1]?n[_-1][a-1]+1:Math.max(n[_][a-1],n[_-1][a]);return n[m][f]}similarity(u,i){K.checkThanosType(u),K.checkRivalType(i);let[r,t]=K.initParams(u,i);return!r.length&&!t.length||r===t?1:2*Re.lcsLength(r,t)/(r.length+t.length)}distance(u,i){let[r,t]=K.initParams(u,i);return r.length+t.length-2*Re.lcsLength(r,t)}},mn=new pn,vn=mn,_n={longestCommonSubsequence:vn},hn=_n,ke,He;function gn(){return He||(He=1,ke=function(){var p=document.getSelection();if(!p.rangeCount)return function(){};for(var u=document.activeElement,i=[],r=0;r<p.rangeCount;r++)i.push(p.getRangeAt(r));switch(u.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":u.blur();break;default:u=null;break}return p.removeAllRanges(),function(){p.type==="Caret"&&p.removeAllRanges(),p.rangeCount||i.forEach(function(t){p.addRange(t)}),u&&u.focus()}}),ke}var Te,Ze;function yn(){if(Ze)return Te;Ze=1;var p=gn(),u={"text/plain":"Text","text/html":"Url",default:"Text"},i="Copy to clipboard: #{key}, Enter";function r(m){var f=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return m.replace(/#{\s*key\s*}/g,f)}function t(m,f){var n,_,a,s,l,e,c=!1;f||(f={}),n=f.debug||!1;try{a=p(),s=document.createRange(),l=document.getSelection(),e=document.createElement("span"),e.textContent=m,e.ariaHidden="true",e.style.all="unset",e.style.position="fixed",e.style.top=0,e.style.clip="rect(0, 0, 0, 0)",e.style.whiteSpace="pre",e.style.webkitUserSelect="text",e.style.MozUserSelect="text",e.style.msUserSelect="text",e.style.userSelect="text",e.addEventListener("copy",function(w){if(w.stopPropagation(),f.format)if(w.preventDefault(),typeof w.clipboardData>"u"){n&&console.warn("unable to use e.clipboardData"),n&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var P=u[f.format]||u.default;window.clipboardData.setData(P,m)}else w.clipboardData.clearData(),w.clipboardData.setData(f.format,m);f.onCopy&&(w.preventDefault(),f.onCopy(w.clipboardData))}),document.body.appendChild(e),s.selectNodeContents(e),l.addRange(s);var C=document.execCommand("copy");if(!C)throw new Error("copy command was unsuccessful");c=!0}catch(w){n&&console.error("unable to copy using execCommand: ",w),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(f.format||"text",m),f.onCopy&&f.onCopy(window.clipboardData),c=!0}catch(P){n&&console.error("unable to copy using clipboardData: ",P),n&&console.error("falling back to prompt"),_=r("message"in f?f.message:i),window.prompt(_,m)}}finally{l&&(typeof l.removeRange=="function"?l.removeRange(s):l.removeAllRanges()),e&&document.body.removeChild(e),a()}return c}return Te=t,Te}var xn=yn();const wn=Ye(xn),bn={class:"content"},kn={class:"row flex flex-col gap-2"},Tn={class:"title"},Cn={class:"flex gap-2 items-center"},Pn={class:"shrink-0"},Sn={class:"flex justify-between"},An={class:"text-sm color-gray"},Rn={class:"justify-end items-center flex"},En={class:"mb-2"},Fn={class:"py-0 pl-5 my-0 text-base color-main"},Vn={class:"color-red font-bold"},In={class:"color-red font-bold"},Bn={class:"color-red font-bold"},Mn={class:"row flex flex-col gap-2"},$n={class:"title"},zn={class:"flex gap-2 items-center"},Ln={class:"shrink-0"},Dn={class:""},Nn={class:"text-sm color-gray"},jn={class:"justify-between items-center flex"},Un={class:"flex gap-space items-center w-50"},qn={class:"flex items-center"},On={class:"mb-2"},Wn={class:"py-0 pl-5 my-0 text-base color-black/60"},Hn={class:"color-red font-bold"},Zn={class:"color-red font-bold"},Kn={class:"color-red font-bold"},Qn={class:"color-red font-bold"},Xn={class:"row flex flex-col gap-2"},Yn={class:"flex gap-2"},Gn={class:"title"},Jn={class:"flex gap-2 flex-1 justify-end"},el={class:"flex-1 overflow-auto flex flex-col"},tl={class:"flex justify-between bg-black/10 py-2 rounded-lt-md rounded-rt-md"},nl={class:"center flex-[7]"},ll={class:"text-sm color-gray-500"},ol={class:"center flex-[3] gap-2"},al={class:"section rounded-md"},sl={class:"section-title text-lg font-bold"},il={class:"sentence"},rl={class:"flex-[7]"},ul={class:"flex-[2] flex justify-end gap-1 items-center"},cl={class:"flex justify-end gap-2"},dl={class:"flex flex-col items-center justify-center"},fl={class:"flex gap-1"},pl={class:"flex flex-col items-center justify-center"},ml={key:0},vl={key:1},_l={class:"flex flex-col"},hl={key:0,class:"options"},gl={class:"status"},yl={key:0,class:"warning"},xl={key:1,class:"success"},wl={class:"p-4 pt-0 color-main w-150 flex flex-col gap-2"},bl={class:""},kl={key:0,class:"flex items-center gap-2 justify-between mb-2"},Tl={class:"flex items-center gap-2 shrink-0"},Cl={key:0},Pl={key:1},Sl={class:"flex flex-col gap-2"},Al={class:"flex gap-2 items-center"},Rl={class:"flex justify-between flex-1"},El={class:"flex items-center gap-2"},Fl={class:"flex gap-2 items-center"},Vl={class:"flex justify-between flex-1"},Il={class:"flex items-center gap-2"},Bl={class:"p-4 pt-0 color-main w-150 flex flex-col gap-2"},Ml={class:""},$l={class:"upload relative"},zl={class:"upload relative"},Ll={class:"p-4 pt-0 color-main w-150 flex flex-col gap-3"},Dl={class:"flex justify-between items-center"},Nl={class:"text-base"},jl={class:"flex flex-col gap-2"},Ul=Ke({__name:"EditArticle",props:{article:{default:()=>ve()},type:{default:"single"}},emits:["save","saveAndNext"],setup(p,{expose:u,emit:i}){const r=gt(()=>wt(()=>import("./D_JQWYvL.js"),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url)),{t}=Qe(),m=p,f=i;let n=I("baidu"),_=I(0),a=I(0),s=I();const l=[{value:"baidu",label:"百度"}];let e=I(ve());_e(()=>m.article,y=>{e.value=ve(y),_.value=0,a.value=0,c(!1),Ce(()=>{s.value?.scrollTo(0,0)})},{immediate:!0}),_e(()=>e.value.text,y=>{y.trim()||(e.value.sections=[])});function c(y=!0){if(!e.value.text.trim()&&y){e.value.sections=[],Q.error(t("please_fill_original"));return}a.value=un(e.value)}function C(){e.value.text=cn(e.value.text)}function w(){e.value.textTranslate=dn(e.value.textTranslate.trim())}async function P(){if(!e.value.title.trim())return Q.error(t("please_fill_title"));if(!e.value.text.trim())return Q.error(t("please_fill_content"));e.value.titleTranslate="",e.value.textTranslate="",c(),setTimeout(async()=>{await sn(e.value,Ge.Baidu,!1,y=>{_.value=y}),a.value=0})}function E(y,v){y.translate=v,e.value.textTranslate=de(e.value),c()}function W(y,v){y.text=v,e.value.text=Je(e.value),c()}function X(y){return new Promise(v=>{if(e.value.title=e.value.title.trim(),e.value.titleTranslate=e.value.titleTranslate.trim(),e.value.text=e.value.text.trim(),e.value.textTranslate=e.value.textTranslate.trim(),!e.value.title)return Q.error(t("please_fill_title")),v(!1);if(!e.value.text)return Q.error(t("please_fill_content")),v(!1);e.value.lrcPosition=e.value.sections.map(V=>V.map((Y,q)=>Y.audioPosition??[])).flat(),console.log(e.value);let R=te(e.value);R.id||(R.id=Pe(6)),delete R.sections,wn(console.json(R,2)),f(y,e.value),v(!0)})}u({save:X,getEditArticle:()=>te(e.value)});async function fe(y){let v=y.target?.files?.[0];if(!v)return;let R={id:Pe(),file:v};await yt(bt,V=>(V?V.push(R):V=[R],V)),e.value.audioFileId=R.id,e.value.audioSrc="",y.target.value="",Q.success(t("audio_added_success"))}function pe(y){let v=y.target?.files?.[0];if(!v)return;let R=new FileReader;R.readAsText(v,"UTF-8"),R.onload=function(V){let Y=V.target.result;if(console.log(Y),Y.trim()){let q=xt(Y);console.log("lrcList",q),q.length&&(e.value.lrcPosition=e.value.sections.map((ue,Ie)=>ue.map((oe,me)=>{for(let ae=0;ae<q.length;ae++){let se=q[ae];if(hn.longestCommonSubsequence.similarity(oe.text,se.text)>=.8){oe.audioPosition=[se.start,se.end??-1];break}}return oe.audioPosition??[]})).flat(),Q.success(t("lrc_parse_success")))}},y.target.value=""}let Ee=I({}),S=I({}),j=I({}),H=I(!1),L=I(!1),$=I(!1),D=I(),le=I(),U=I([]);_e(()=>$.value,y=>{y&&(U.value=te(Array.isArray(e.value.nameList)?e.value.nameList:[]),U.value.push(""))});function et(){U.value.push("")}function tt(y){U.value.splice(y,1)}function nt(){const y=Array.from(new Set(U.value.map(v=>(v??"").trim()).filter(Boolean)));e.value.nameList=y}function lt(y,v,R){H.value=!0,Ee.value=y,S.value=te(y),j.value=null,le.value.pause(),R==0?v!=0&&(j.value=Me(e.value.sections[v-1])):j.value=e.value.sections[v][R-1],S.value.audioPosition?.length||(S.value.audioPosition=[0,0],j.value&&(S.value.audioPosition=[j.value.audioPosition[1]??0,0])),Ce(()=>{D.value.currentTime=S.value.audioPosition[0]})}function ot(){D.value.paused&&D.value.play(),S.value.audioPosition[0]=Number(D.value.currentTime.toFixed(2)),S.value.audioPosition[0]>S.value.audioPosition[1]&&S.value.audioPosition[1]!==0&&(S.value.audioPosition[1]=S.value.audioPosition[0])}function at(){D.value.paused||D.value.pause(),S.value.audioPosition[1]=Number(D.value.currentTime.toFixed(2))}const{playSentenceAudio:Fe}=fn();function st(){Ee.value.audioPosition=te(S.value.audioPosition),e.value.lrcPosition=e.value.sections.map((y,v)=>y.map((R,V)=>R.audioPosition??[])).flat()}function it(y){D.value.currentTime=y}function rt(){j.value&&(S.value.audioPosition[0]=j.value.audioPosition[1])}function Ve(y,v,R){let V=null;R==0?v!=0&&(V=Me(e.value.sections[v-1])):V=e.value.sections[v][R-1],V?y.audioPosition[0]=V.audioPosition[1]:y.audioPosition[0]=Number(Number(le.value.currentTime).toFixed(2)),y.audioPosition[0]>y.audioPosition[1]&&y.audioPosition[1]!==0&&(y.audioPosition[1]=0)}function ut(y,v,R){y.audioPosition[1]=Number(Number(le.value.currentTime).toFixed(2)),y.audioPosition[0]===0&&Ve(y,v,R)}function ct(y){y.audioPosition[0]<=0||(y.audioPosition[0]=Number((y.audioPosition[0]-.3).toFixed(2)))}return(y,v)=>{const R=Pt,V=Ct,Y=Qt,q=Ht,ue=qt,Ie=Nt,oe=zt,me=Tt,ae=Bt,se=kt;return T(),A("div",bn,[d("div",kn,[d("div",Tn,h(o(t)("original_text")),1),d("div",Cn,[d("div",Pn,h(o(t)("title"))+"：",1),g(ge,{modelValue:o(e).title,"onUpdate:modelValue":v[0]||(v[0]=x=>o(e).title=x),disabled:![100,0].includes(o(_)),type:"text",placeholder:o(t)("please_fill_original_title")},null,8,["modelValue","disabled","placeholder"])]),d("div",Sn,[d("span",null,[b(h(o(t)("content"))+"：",1),d("span",An,h(o(t)("one_sentence_per_line")),1)]),g(he,{title:o(t)("name_config_tip")},{default:k(()=>[d("div",{onClick:v[1]||(v[1]=x=>N($)?$.value=!0:$=!0),class:"center gap-1 cp"},[d("span",null,h(o(t)("name_config")),1),g(R)])]),_:1},8,["title"])]),g(Se,{modelValue:o(e).text,"onUpdate:modelValue":v[2]||(v[2]=x=>o(e).text=x),class:"h-full",disabled:![100,0].includes(o(_)),placeholder:o(t)("please_paste_original"),autosize:!1},null,8,["modelValue","disabled","placeholder"]),d("div",Rn,[g(he,null,{reference:k(()=>[d("div",null,[d("div",En,h(o(t)("usage_guide")),1),d("ol",Fn,[d("li",null,h(o(t)("copy_and_split")),1),d("li",null,[b(h(o(t)("click"))+" ",1),d("span",Vn,h(o(t)("split_sentence")),1),b(" "+h(o(t)("auto_split")),1),d("span",In,h(o(t)("or")),1),b(" "+h(o(t)("manual_split")),1)]),d("li",null,h(o(t)("split_rule")),1),d("li",null,[b(h(o(t)("after_edit_click"))+" ",1),d("span",Bn,h(o(t)("apply")),1),b(" "+h(o(t)("sync_to_result")),1)])])])]),default:k(()=>[g(V,{class:"mr-3",width:"20"})]),_:1}),g(B,{onClick:C},{default:k(()=>[b(h(o(t)("split_sentence")),1)]),_:1}),g(B,{onClick:v[3]||(v[3]=x=>c())},{default:k(()=>[b(h(o(t)("apply")),1)]),_:1})])]),d("div",Mn,[d("div",$n,h(o(t)("translation")),1),d("div",zn,[d("div",Ln,h(o(t)("title"))+"：",1),g(ge,{modelValue:o(e).titleTranslate,"onUpdate:modelValue":v[4]||(v[4]=x=>o(e).titleTranslate=x),disabled:![100,0].includes(o(_)),type:"text",placeholder:o(t)("please_fill_translation_title")},null,8,["modelValue","disabled","placeholder"])]),d("div",Dn,[b(h(o(t)("content"))+"：",1),d("span",Nn,h(o(t)("one_sentence_per_line")),1)]),g(Se,{modelValue:o(e).textTranslate,"onUpdate:modelValue":v[5]||(v[5]=x=>o(e).textTranslate=x),class:"h-full",disabled:![100,0].includes(o(_)),placeholder:o(t)("please_fill_translation"),autosize:!1},null,8,["modelValue","disabled","placeholder"]),d("div",jn,[d("div",Un,[g(B,{onClick:P,loading:o(_)!==0&&o(_)!==100},{default:k(()=>[b(h(o(t)("translate")),1)]),_:1},8,["loading"]),g(St,{modelValue:o(n),"onUpdate:modelValue":v[6]||(v[6]=x=>N(n)?n.value=x:n=x)},{default:k(()=>[(T(),A(re,null,ce(l,x=>g(At,{key:x.value,label:x.label,value:x.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),b(" "+h(o(_))+"% ",1)]),d("div",qn,[g(he,null,{reference:k(()=>[d("div",null,[d("div",On,h(o(t)("usage_guide")),1),d("ol",Wn,[d("li",null,[b(h(o(t)("copy_translation_or_click"))+" ",1),d("span",Hn,h(o(t)("translate")),1)]),d("li",null,[b(h(o(t)("click"))+" ",1),d("span",Zn,h(o(t)("split_sentence")),1),b(" "+h(o(t)("auto_split")),1),d("span",Kn,h(o(t)("or")),1),b(" "+h(o(t)("manual_split")),1)]),d("li",null,h(o(t)("split_rule")),1),d("li",null,[b(h(o(t)("after_edit_click"))+" ",1),d("span",Qn,h(o(t)("apply")),1),b(" "+h(o(t)("sync_to_result")),1)])])])]),default:k(()=>[g(V,{class:"mr-3",width:"20"})]),_:1}),g(B,{onClick:w},{default:k(()=>[b(h(o(t)("split_sentence")),1)]),_:1}),g(B,{onClick:v[7]||(v[7]=x=>c(!0))},{default:k(()=>[b(h(o(t)("apply")),1)]),_:1})])])]),d("div",Xn,[d("div",Yn,[d("div",Gn,h(o(t)("result")),1),d("div",Jn,[g(ze,{ref_key:"audioRef",ref:le,article:o(e),autoplay:!1},null,8,["article"])])]),o(e)?.sections?.length?(T(),A(re,{key:0},[d("div",el,[d("div",tl,[d("div",nl,[b(h(o(t)("content"))+"( ",1),d("span",ll,h(o(t)("editable_auto_sync")),1),v[24]||(v[24]=b(") ",-1))]),v[25]||(v[25]=d("div",null,"|",-1)),d("div",ol,[d("span",null,h(o(t)("audio")),1),g(z,{title:o(t)("audio_management"),onClick:v[8]||(v[8]=x=>N(L)?L.value=!0:L=!0)},{default:k(()=>[g(Y)]),_:1},8,["title"])])]),d("div",{class:"article-translate",ref_key:"resultRef",ref:s},[(T(!0),A(re,null,ce(o(e).sections,(x,M)=>(T(),A("div",al,[d("div",sl,h(o(t)("paragraph"))+h(M+1),1),(T(!0),A(re,null,ce(x,(F,ie)=>(T(),A("div",il,[d("div",rl,[g(Le,{disabled:![100,0].includes(o(_)),value:F.text,onSave:Z=>W(F,Z)},null,8,["disabled","value","onSave"]),F.translate?(T(),O(Le,{key:0,class:"text-lg!",disabled:![100,0].includes(o(_)),value:F.translate,onSave:Z=>E(F,Z)},null,8,["disabled","value","onSave"])):ee("",!0)]),d("div",ul,[d("div",cl,[d("div",dl,[d("div",null,h(F.audioPosition?.[0]??0)+"s",1),d("div",fl,[g(z,{onClick:Z=>Ve(F,M,ie),title:M===0&&ie===0?o(t)("set_start_time"):o(t)("use_prev_end_time")},{default:k(()=>[M===0&&ie===0?(T(),O(q,{key:0})):(T(),O(ue,{key:1}))]),_:2},1032,["onClick","title"]),g(z,{onClick:Z=>ct(F),title:o(t)("minus_03s")},{default:k(()=>[...v[26]||(v[26]=[b(" -.3s ",-1)])]),_:1},8,["onClick","title"])])]),v[27]||(v[27]=d("div",null,"-",-1)),d("div",pl,[F.audioPosition?.[1]!==-1?(T(),A("div",ml,h(F.audioPosition?.[1]??0)+"s",1)):(T(),A("div",vl,h(o(t)("end")),1)),g(z,{onClick:Z=>ut(F,M,ie),title:o(t)("set_end_time")},{default:k(()=>[g(q)]),_:1},8,["onClick","title"])])]),d("div",_l,[g(z,{icon:F.audioPosition?.length?"basil:edit-outline":"basil:add-outline",title:o(t)("edit_audio_align"),onClick:Z=>lt(F,M,ie)},{default:k(()=>[F.audioPosition?.length&&F.audioPosition[1]?(T(),O(Ie,{key:0})):(T(),O(oe,{key:1}))]),_:2},1032,["icon","title","onClick"]),F.audioPosition?.length?(T(),O(z,{key:0,title:o(t)("play"),onClick:Z=>o(Fe)(F,o(le))},{default:k(()=>[g(me)]),_:1},8,["title","onClick"])):ee("",!0)])])]))),256))]))),256))],512)]),o(e).text.trim()?(T(),A("div",hl,[d("div",gl,[d("span",null,h(o(t)("status"))+"：",1),o(a)?(T(),A("div",yl,[g(ae),b(" "+h(o(t)("sentences_not_translated",{count:o(a)})),1)])):(T(),A("div",xl,[g(se),b(" "+h(o(t)("translation_complete")),1)]))]),d("div",null,[g(B,{onClick:v[9]||(v[9]=x=>X("save"))},{default:k(()=>[b(h(o(t)("save")),1)]),_:1}),p.type==="batch"?(T(),O(B,{key:0,onClick:v[10]||(v[10]=x=>X("saveAndNext"))},{default:k(()=>[b(h(o(t)("save_and_next")),1)]),_:1})):ee("",!0)])])):ee("",!0)],64)):(T(),O(Ft,{key:1,text:o(t)("no_translation_comparison")},null,8,["text"]))]),g(o(r),{title:o(t)("adjust_audio_timeline"),modelValue:o(H),"onUpdate:modelValue":v[18]||(v[18]=x=>N(H)?H.value=x:H=x),footer:!0,onClose:v[19]||(v[19]=x=>N(H)?H.value=!1:H=!1),onOk:st},{default:k(()=>[d("div",wl,[d("div",bl,h(o(t)("audio_timeline_tutorial")),1),g(ze,{ref_key:"sentenceAudioRef",ref:D,article:o(e),autoplay:!1,class:"w-full"},null,8,["article"]),o(S).audioPosition?.length?(T(),A("div",kl,[d("div",null,h(o(S).text),1),d("div",Tl,[d("div",null,[d("span",null,h(o(S).audioPosition?.[0])+"s",1),o(S).audioPosition?.[1]!==-1?(T(),A("span",Cl," - "+h(o(S).audioPosition?.[1])+"s",1)):(T(),A("span",Pl," - "+h(o(t)("end")),1))]),g(z,{title:o(t)("play"),onClick:v[11]||(v[11]=x=>o(Fe)(o(S),o(D)))},{default:k(()=>[g(me)]),_:1},8,["title"])])])):ee("",!0),d("div",Sl,[d("div",Al,[d("div",null,h(o(t)("start_time"))+"：",1),d("div",Rl,[d("div",El,[g($e,{modelValue:o(S).audioPosition[0],"onUpdate:modelValue":v[12]||(v[12]=x=>o(S).audioPosition[0]=x),precision:2,step:.1},null,8,["modelValue"]),g(z,{onClick:v[13]||(v[13]=x=>it(o(S).audioPosition[0])),title:o(t)("jump_to_seconds",{seconds:o(S).audioPosition[0]})},{default:k(()=>[g(q)]),_:1},8,["title"]),o(j)?(T(),O(z,{key:0,onClick:rt,title:o(t)("use_prev_end_seconds",{seconds:o(j)?.audioPosition?.[1]||0})},{default:k(()=>[g(ue)]),_:1},8,["title"])):ee("",!0),g(z,{onClick:v[14]||(v[14]=x=>o(S).audioPosition[0]=Number((o(S).audioPosition[0]-.3).toFixed(2))),title:o(t)("decrease_03s")},{default:k(()=>[...v[28]||(v[28]=[b(" -.3s ",-1)])]),_:1},8,["title"]),g(z,{onClick:v[15]||(v[15]=x=>o(S).audioPosition[0]=Number((o(S).audioPosition[0]+.3).toFixed(2))),title:o(t)("increase_03s")},{default:k(()=>[...v[29]||(v[29]=[b(" +.3s ",-1)])]),_:1},8,["title"])]),g(B,{onClick:ot},{default:k(()=>[b(h(o(t)("record")),1)]),_:1})])]),d("div",Fl,[d("div",null,h(o(t)("end_time"))+"：",1),d("div",Vl,[d("div",Il,[g($e,{modelValue:o(S).audioPosition[1],"onUpdate:modelValue":v[16]||(v[16]=x=>o(S).audioPosition[1]=x),precision:2,step:.1},null,8,["modelValue"]),d("span",null,h(o(t)("or")),1),g(B,{size:"small",onClick:v[17]||(v[17]=x=>o(S).audioPosition[1]=-1)},{default:k(()=>[b(h(o(t)("end")),1)]),_:1})]),g(B,{onClick:at},{default:k(()=>[b(h(o(t)("record")),1)]),_:1})])])])])]),_:1},8,["title","modelValue"]),g(o(r),{title:o(t)("audio_management"),modelValue:o(L),"onUpdate:modelValue":v[20]||(v[20]=x=>N(L)?L.value=x:L=x),footer:!1,onClose:v[21]||(v[21]=x=>N(L)?L.value=!1:L=!1)},{default:k(()=>[d("div",Bl,[d("div",Ml,h(o(t)("audio_upload_notice")),1),d("div",$l,[g(B,null,{default:k(()=>[b(h(o(t)("upload_audio")),1)]),_:1}),d("input",{type:"file",accept:"audio/*",onChange:fe,class:"w-full h-full absolute left-0 top-0 opacity-0"},null,32)]),d("div",zl,[g(B,null,{default:k(()=>[b(h(o(t)("upload_lrc")),1)]),_:1}),d("input",{type:"file",accept:".lrc",onChange:pe,class:"w-full h-full absolute left-0 top-0 opacity-0"},null,32)])])]),_:1},8,["title","modelValue"]),g(o(r),{title:o(t)("name_management"),modelValue:o($),"onUpdate:modelValue":v[22]||(v[22]=x=>N($)?$.value=x:$=x),footer:!0,onClose:v[23]||(v[23]=x=>N($)?$.value=!1:$=!1),onOk:nt},{default:k(()=>[d("div",Ll,[d("div",Dl,[d("div",Nl,h(o(t)("name_ignore_config_desc")),1),g(B,{type:"info",onClick:et},{default:k(()=>[b(h(o(t)("add_name")),1)]),_:1})]),d("div",jl,[(T(!0),A(re,null,ce(o(U),(x,M)=>(T(),A("div",{class:"flex items-center gap-2",key:M},[g(ge,{modelValue:o(U)[M],"onUpdate:modelValue":F=>o(U)[M]=F,placeholder:o(t)("enter_name"),size:"large",autofocus:M===o(U).length-1},null,8,["modelValue","onUpdate:modelValue","placeholder","autofocus"]),g(B,{type:"info",onClick:F=>tt(M)},{default:k(()=>[b(h(o(t)("delete")),1)]),_:1},8,["onClick"])]))),128))])])]),_:1},8,["title","modelValue"])])}}}),oo=Object.assign(Xe(Ul,[["__scopeId","data-v-2eecded7"]]),{__name:"EditArticle"});export{oo as E,un as g,lo as s,fn as u};
