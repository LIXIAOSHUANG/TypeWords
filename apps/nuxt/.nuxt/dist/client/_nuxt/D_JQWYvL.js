import{Y as $,o as n,c as r,a as f,d as E,R as O,z as j,V as M,x as F,h as V,bg as P,k as p,bo as U,a2 as W,e as u,n as _,f as L,b9 as X,w as x,t as y,m as D,b as I,j as Y,W as q,i as c,X as A}from"./Dbiv707D.js";import{u as G}from"./C3NBTwW5.js";import{B as R}from"./B55v04t5.js";const H={viewBox:"0 0 20 20",width:"1.2em",height:"1.2em"};function J(t,m){return n(),r("svg",H,[...m[0]||(m[0]=[f("path",{fill:"currentColor",d:"m4.089 4.216l.057-.07a.5.5 0 0 1 .638-.057l.07.057L10 9.293l5.146-5.147a.5.5 0 0 1 .638-.057l.07.057a.5.5 0 0 1 .057.638l-.057.07L10.707 10l5.147 5.146a.5.5 0 0 1 .057.638l-.057.07a.5.5 0 0 1-.638.057l-.07-.057L10 10.707l-5.146 5.147a.5.5 0 0 1-.638.057l-.07-.057a.5.5 0 0 1-.057-.638l.057-.07L9.293 10L4.146 4.854a.5.5 0 0 1-.057-.638l.057-.07z"},null,-1)])])}const K=$({name:"fluent-dismiss20-regular",render:J}),Q={key:0,class:"modal-header"},Z={class:"title"},ee={key:0,class:"content max-h-60vh"},te={key:1,class:"modal-footer"},le={class:"left flex items-end"},oe={class:"right"},ae=E({__name:"Dialog",props:{modelValue:{type:Boolean,default:void 0},showClose:{type:Boolean,default:!0},title:null,content:null,fullScreen:{type:Boolean,default:!1},padding:{type:Boolean},footer:{type:Boolean,default:!1},header:{type:Boolean,default:!0},confirmButtonText:{default:""},cancelButtonText:{default:""},keyboard:{type:Boolean,default:!0},closeOnClickBg:{type:Boolean,default:!0},confirm:null,beforeClose:null,t:null},emits:["update:modelValue","close","ok","cancel"],setup(t,{emit:m}){const l=t,k=Y(()=>{if(l.t)return l.t;const{t:e}=q();return e}),v=m;let g=c(!1),h=c(999),d=c(!1),S=c(Date.now()),C=c(null),b=c(null);const o=O();let s=Date.now();async function i(){if(!d.value||l.beforeClose&&!await l.beforeClose())return;let e=Date.now()-S.value,a=300;return e<500&&(a+=500-e),new Promise(w=>{setTimeout(()=>{C.value?.classList.toggle("bounce-out"),b.value?.classList.toggle("bounce-out")},500-e),setTimeout(()=>{v("update:modelValue",!1),v("close"),d.value=!1,w(!0);let B=o.modalList.findIndex(N=>N.id===s);B>-1&&o.modalList.splice(B,1)},a)})}j(()=>l.modelValue,e=>{e?(s=Date.now(),o.modalList.push({id:s,close:i}),h.value=999+o.modalList.length,d.value=!0):i()}),M(()=>{l.modelValue===void 0&&(d.value=!0,s=Date.now(),o.modalList.push({id:s,close:i}),h.value=999+o.modalList.length)}),F(()=>{if(l.modelValue===void 0){d.value=!1;let e=o.modalList.findIndex(a=>a.id===s);e>-1&&o.modalList.splice(e,1)}}),G("keyup",async e=>{e.key==="Escape"&&l.keyboard&&o.modalList[o.modalList.length-1]?.id===s&&await T()});async function z(){l.confirm&&(g.value=!0,await l.confirm(),g.value=!1),v("ok"),await i()}async function T(){v("cancel"),await i()}return(e,a)=>{const w=K;return n(),V(P,{to:"body"},[p(d)?(n(),r("div",{key:0,class:"modal-root",style:U({"z-index":p(h)})},[t.fullScreen?u("",!0):(n(),r("div",{key:0,class:"modal-mask",ref_key:"maskRef",ref:C,onClick:a[0]||(a[0]=W(B=>t.closeOnClickBg&&i(),["stop"]))},null,512)),f("div",{class:_(["modal",[t.fullScreen?"full":"window"]]),ref_key:"modalRef",ref:b},[L(X,{title:k.value("close")},{default:x(()=>[t.showClose?(n(),V(w,{key:0,onClick:i,class:"close cursor-pointer",width:"24"})):u("",!0)]),_:1},8,["title"]),t.header?(n(),r("div",Q,[f("div",Z,y(l.title),1)])):u("",!0),f("div",{class:_(["modal-body",{padding:t.padding}])},[D(e.$slots,"default",{},void 0,!0),t.content?(n(),r("div",ee,y(t.content),1)):u("",!0)],2),t.footer?(n(),r("div",te,[f("div",le,[D(e.$slots,"footer-left",{},void 0,!0)]),f("div",oe,[L(R,{type:"info",onClick:T},{default:x(()=>[I(y(t.cancelButtonText||k.value("cancel")),1)]),_:1}),L(R,{id:"dialog-ok",loading:p(g),onClick:z},{default:x(()=>[I(y(t.confirmButtonText||k.value("confirm")),1)]),_:1},8,["loading"])])])):u("",!0)],2)],4)):u("",!0)])}}}),de=Object.assign(A(ae,[["__scopeId","data-v-5e9e5827"]]),{__name:"Dialog"});export{de as default};
