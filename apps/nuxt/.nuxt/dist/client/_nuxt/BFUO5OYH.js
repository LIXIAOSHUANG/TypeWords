import{_ as S}from"./DpyZvHBp.js";import{d as I,Q as V,R,S as N,ar as j,o,h as c,w as m,as as E,c as i,a as _,f as r,k as l,l as u,b as T,t as v,e as F,U as $,i as k,j as g,b3 as q,b4 as z}from"./Dbiv707D.js";import{B as A}from"./BKwk18oP.js";import{B as U}from"./CdkHU8iM.js";import{E as K}from"./pfyoj1Bm.js";import{B as P}from"./B55v04t5.js";import{D as h}from"./fRBxe6y_.js";import{B as Q}from"./BgVYQ2O1.js";import{u as W}from"./D3vbuhP9.js";import{B as G}from"./CjoTdGiq.js";import"./DdQRNC7l.js";import"./BLlR_Egx.js";import"./BoDBgGOH.js";import"./BgBSFNGi.js";import"./DScG_TK1.js";import"./Bqmt5lv0.js";import"./U7X5gOHL.js";import"./C3NBTwW5.js";const H={class:"card min-h-50"},J={class:"flex items-center relative gap-2"},M={key:0,class:"flex flex-1 gap-4"},O={key:1,class:"py-1 flex flex-1 justify-end"},X={class:"page-title absolute w-full center"},Y={key:0,class:"mt-4"},Z={key:1,class:"w-full mt-2"},he=I({__name:"book-list",setup(ee){const{nav:B}=V(),C=R(),y=N();function f(e){console.log(e.dict),D(e.dict)}async function D(e){C.editDict=$(e),B("/book/"+e.id,{from:"list"})}let a=k(!1),s=k("");const{data:L,isFetching:w}=W(q(z.ARTICLE.ALL)).json(),d=g(()=>L.value?.filter(e=>!e.hidden)),p=g(()=>{if(s.value){let e=s.value.toLowerCase();return d.value.filter(t=>t.id.toLowerCase().includes(e)||t.name.toLowerCase().includes(e)||t.category.toLowerCase().includes(e)||t.tags.join("").replace("所有","").toLowerCase().includes(e)||t?.url?.toLowerCase?.().includes?.(e))}return[]});return(e,t)=>{const b=S,x=j("loading");return o(),c(A,null,{default:m(()=>[E((o(),i("div",H,[_("div",J,[r(Q,{class:"z-2",onClick:l(y).back},null,8,["onClick"]),l(a)?(o(),i("div",M,[r(G,{"prefix-icon":"",placeholder:"请输入书籍名称/缩写/类别",modelValue:l(s),"onUpdate:modelValue":t[0]||(t[0]=n=>u(s)?s.value=n:s=n),class:"flex-1",autofocus:"",clearable:""},null,8,["modelValue"]),r(P,{onClick:t[1]||(t[1]=n=>(u(a)?a.value=!1:a=!1,u(s)?s.value="":s=""))},{default:m(()=>[T(v(e.$t("cancel")),1)]),_:1})])):(o(),i("div",O,[_("span",X,v(e.$t("book_list")),1),r(U,{onClick:t[2]||(t[2]=n=>u(a)?a.value=!0:a=!0),class:"z-1"},{default:m(()=>[r(b)]),_:1})]))]),l(s)?(o(),i("div",Y,[p.value.length?(o(),c(h,{key:0,onSelectDict:f,list:p.value,quantifier:"篇","select-id":"-1"},null,8,["list"])):(o(),c(K,{key:1,text:"没有相关书籍"}))])):(o(),i("div",Z,[l(d)?.length?(o(),c(h,{key:0,onSelectDict:f,list:l(d),quantifier:"篇","select-id":"-1"},null,8,["list"])):F("",!0)]))])),[[x,l(w)]])]),_:1})}}});export{he as default};
