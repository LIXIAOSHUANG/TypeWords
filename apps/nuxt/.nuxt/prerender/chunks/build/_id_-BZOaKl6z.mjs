import { _ as __nuxt_component_0 } from './NuxtImg-BgeLVH9C.mjs';
import { _ as __unplugin_components_2, a as __unplugin_components_3, b as __unplugin_components_4 } from './text-align-left16-regular-BOpatDBt.mjs';
import { _ as __unplugin_components_7 } from './BaseList-BGyirn9c.mjs';
import { _ as __unplugin_components_10 } from './translate-jzfWdenW.mjs';
import { defineComponent, ref, computed, watch, resolveDirective, mergeProps, unref, withCtx, createTextVNode, toDisplayString, isRef, openBlock, createBlock, createVNode, useSSRContext } from 'file:///Users/lishuang/Documents/workspace/web/study/vue/TypeWords-master/node_modules/vue/index.mjs';
import { ssrRenderAttrs, ssrGetDirectiveProps, ssrRenderComponent, ssrInterpolate, ssrRenderClass, ssrRenderList } from 'file:///Users/lishuang/Documents/workspace/web/study/vue/TypeWords-master/node_modules/vue/server-renderer/index.mjs';
import { B as BackIcon } from './BackIcon-D_XswP1e.mjs';
import { E as Empty } from './Empty-DqqzidIv.mjs';
import { A as ArticleList } from './ArticleList-qKu_FTcS.mjs';
import { a as useRuntimeStore, b as useSettingStore, c as useBaseStore, u as useNav, I as getDefaultArticle, A as resourceWrap, v as msToHourMinute, H as total, h as _nextTick, B as BaseIcon, _ as _dateFormat, o as _getDictDataByUrl, T as Toast } from './BaseIcon-Cnj57dgy.mjs';
import { B as BaseButton } from './BaseButton-DUaQjEVD.mjs';
import { useRouter, useRoute } from 'file:///Users/lishuang/Documents/workspace/web/study/vue/TypeWords-master/node_modules/vue-router/vue-router.node.mjs';
import { E as EditBook } from './EditBook-B01KdRjn.mjs';
import { A as ArticleAudio } from './ArticleAudio-HKnHxiX1.mjs';
import { M as MessageBox } from './MessageBox-DbYOvJFb.mjs';
import { useFetch } from 'file:///Users/lishuang/Documents/workspace/web/study/vue/TypeWords-master/node_modules/@vueuse/core/dist/index.js';
import { r as DICT_LIST, i as DictType } from './env-CUoXYOyW.mjs';
import { S as Switch } from './Switch-BoRsOuOV.mjs';
import { b as useGetDict } from './dict-Dqcdsgfb.mjs';
import { h as _export_sfc } from './server.mjs';
import 'file:///Users/lishuang/Documents/workspace/web/study/vue/TypeWords-master/node_modules/defu/dist/defu.mjs';
import 'file:///Users/lishuang/Documents/workspace/web/study/vue/TypeWords-master/node_modules/ufo/dist/index.mjs';
import 'file:///Users/lishuang/Documents/workspace/web/study/vue/TypeWords-master/node_modules/h3/dist/index.mjs';
import './chevron-left28-filled-DoP3x3Jo.mjs';
import './search24-regular-Cw07GsNM.mjs';
import './BaseInput-mlIHP8lZ.mjs';
import './eye16-regular-Cm9O3Lp0.mjs';
import './event-qcx2F2JA.mjs';
import 'file:///Users/lishuang/Documents/workspace/web/study/vue/TypeWords-master/node_modules/pinia/dist/pinia.prod.cjs';
import 'file:///Users/lishuang/Documents/workspace/web/study/vue/TypeWords-master/node_modules/idb-keyval/dist/index.js';
import 'file:///Users/lishuang/Documents/workspace/web/study/vue/TypeWords-master/node_modules/axios/index.js';
import 'file:///Users/lishuang/Documents/workspace/web/study/vue/TypeWords-master/node_modules/dayjs/dayjs.min.js';
import 'file:///Users/lishuang/Documents/workspace/web/study/vue/TypeWords-master/node_modules/dayjs/plugin/duration.js';
import 'file:///Users/lishuang/Documents/workspace/web/study/vue/TypeWords-master/node_modules/nanoid/index.js';
import './Textarea-Ca12-GD2.mjs';
import './chevron-left20-filled-B_9PTvDy.mjs';
import './Form-CH4Dczim.mjs';
import './volume-low-D-Q_rQNL.mjs';
import './Dialog-BoKDmA_Y.mjs';
import 'file:///Users/lishuang/Documents/workspace/web/study/vue/TypeWords-master/node_modules/@floating-ui/dom/dist/floating-ui.dom.mjs';
import 'file:///Users/lishuang/Documents/workspace/web/study/vue/TypeWords-master/node_modules/ofetch/dist/node.mjs';
import '../nitro/nitro.mjs';
import 'file:///Users/lishuang/Documents/workspace/web/study/vue/TypeWords-master/node_modules/destr/dist/index.mjs';
import 'file:///Users/lishuang/Documents/workspace/web/study/vue/TypeWords-master/node_modules/hookable/dist/index.mjs';
import 'file:///Users/lishuang/Documents/workspace/web/study/vue/TypeWords-master/node_modules/node-mock-http/dist/index.mjs';
import 'file:///Users/lishuang/Documents/workspace/web/study/vue/TypeWords-master/node_modules/unstorage/dist/index.mjs';
import 'file:///Users/lishuang/Documents/workspace/web/study/vue/TypeWords-master/node_modules/unstorage/drivers/fs.mjs';
import 'node:crypto';
import 'file:///Users/lishuang/Documents/workspace/web/study/vue/TypeWords-master/node_modules/unstorage/drivers/fs-lite.mjs';
import 'file:///Users/lishuang/Documents/workspace/web/study/vue/TypeWords-master/node_modules/unstorage/drivers/lru-cache.mjs';
import 'file:///Users/lishuang/Documents/workspace/web/study/vue/TypeWords-master/node_modules/ohash/dist/index.mjs';
import 'file:///Users/lishuang/Documents/workspace/web/study/vue/TypeWords-master/node_modules/klona/dist/index.mjs';
import 'file:///Users/lishuang/Documents/workspace/web/study/vue/TypeWords-master/node_modules/scule/dist/index.mjs';
import 'file:///Users/lishuang/Documents/workspace/web/study/vue/TypeWords-master/node_modules/unctx/dist/index.mjs';
import 'file:///Users/lishuang/Documents/workspace/web/study/vue/TypeWords-master/node_modules/radix3/dist/index.mjs';
import 'node:fs';
import 'node:url';
import 'file:///Users/lishuang/Documents/workspace/web/study/vue/TypeWords-master/node_modules/pathe/dist/index.mjs';
import 'file:///Users/lishuang/Documents/workspace/web/study/vue/TypeWords-master/node_modules/ipx/dist/index.mjs';
import 'file:///Users/lishuang/Documents/workspace/web/study/vue/TypeWords-master/node_modules/nuxt/node_modules/cookie-es/dist/index.mjs';
import 'file:///Users/lishuang/Documents/workspace/web/study/vue/TypeWords-master/node_modules/vue-devtools-stub/dist/index.mjs';
import '../_/renderer.mjs';
import 'file:///Users/lishuang/Documents/workspace/web/study/vue/TypeWords-master/node_modules/vue-bundle-renderer/dist/runtime.mjs';
import 'file:///Users/lishuang/Documents/workspace/web/study/vue/TypeWords-master/node_modules/unhead/dist/server.mjs';
import 'file:///Users/lishuang/Documents/workspace/web/study/vue/TypeWords-master/node_modules/devalue/index.js';
import 'file:///Users/lishuang/Documents/workspace/web/study/vue/TypeWords-master/node_modules/unhead/dist/plugins.mjs';
import 'file:///Users/lishuang/Documents/workspace/web/study/vue/TypeWords-master/node_modules/unhead/dist/utils.mjs';

const _sfc_main = /* @__PURE__ */ defineComponent({
  __name: "[id]",
  __ssrInlineRender: true,
  setup(__props) {
    const runtimeStore = useRuntimeStore();
    const settingStore = useSettingStore();
    const store = useBaseStore();
    const router = useRouter();
    useRoute();
    const { nav } = useNav();
    let isEdit = ref(false);
    let isAdd = ref(false);
    let studyLoading = ref(false);
    let articleRef = ref();
    let selectArticle = ref(getDefaultArticle({ id: -1 }));
    function handleCheckedChange(val) {
      selectArticle.value = val.item;
    }
    async function startPractice() {
      var _a;
      let sbook = runtimeStore.editDict;
      if (!sbook.articles.length) {
        return Toast.warning("\u6CA1\u6709\u6587\u7AE0\u53EF\u5B66\u4E60\uFF01");
      }
      studyLoading.value = true;
      await store.changeBook(sbook);
      studyLoading.value = false;
      (_a = (void 0).umami) == null ? void 0 : _a.track("startStudyArticle", {
        name: sbook.name,
        custom: sbook.custom,
        complete: sbook.complete,
        s: `name:${sbook.name},index:${sbook.lastLearnIndex},title:${sbook.articles[sbook.lastLearnIndex].title}`
      });
      nav("/practice-articles/" + sbook.id);
    }
    const showBookDetail = computed(() => {
      return !(isAdd.value || isEdit.value);
    });
    const { loading } = useGetDict();
    function formClose() {
      if (isEdit.value) isEdit.value = false;
      else router.back();
    }
    const { data: book_list } = useFetch(resourceWrap(DICT_LIST.ARTICLE.ALL)).json();
    function reset() {
      MessageBox.confirm(
        "\u7EE7\u7EED\u6B64\u64CD\u4F5C\u4F1A\u91CD\u7F6E\u6240\u6709\u6587\u7AE0\uFF0C\u5E76\u4ECE\u5B98\u65B9\u4E66\u7C4D\u83B7\u53D6\u6700\u65B0\u6587\u7AE0\u5217\u8868\uFF0C\u5B66\u4E60\u8BB0\u5F55\u4E0D\u4F1A\u88AB\u91CD\u7F6E\u3002\u786E\u8BA4\u6062\u590D\u9ED8\u8BA4\u5417\uFF1F",
        "\u6062\u590D\u9ED8\u8BA4",
        async () => {
          let dict = book_list.value.find((v) => v.url === runtimeStore.editDict.url);
          if (dict && dict.id) {
            dict = await _getDictDataByUrl(dict, DictType.article);
            let rIndex = store.article.bookList.findIndex((v) => v.id === runtimeStore.editDict.id);
            if (rIndex > -1) {
              let item = store.article.bookList[rIndex];
              item.custom = false;
              item.id = dict.id;
              item.articles = dict.articles;
              if (item.lastLearnIndex >= item.articles.length) {
                item.lastLearnIndex = item.articles.length - 1;
              }
              runtimeStore.editDict = item;
              Toast.success("\u6062\u590D\u6210\u529F");
              return;
            }
          }
          Toast.error("\u6062\u590D\u5931\u8D25");
        }
      );
    }
    const currentPractice = computed(() => {
      var _a;
      if ((_a = runtimeStore.editDict.statistics) == null ? void 0 : _a.length) {
        return runtimeStore.editDict.statistics.filter((v) => v.title === selectArticle.value.title);
      }
      return [];
    });
    const totalSpend = computed(() => {
      var _a;
      if ((_a = runtimeStore.editDict.statistics) == null ? void 0 : _a.length) {
        return msToHourMinute(total(runtimeStore.editDict.statistics, "spend"));
      }
      return 0;
    });
    function next() {
      if (!settingStore.articleAutoPlayNext) return;
      startPlay.value = true;
      let index = runtimeStore.editDict.articles.findIndex((v) => v.id === selectArticle.value.id);
      if (index > -1) {
        if (index === runtimeStore.editDict.articles.length - 1) index = -1;
        selectArticle.value = runtimeStore.editDict.articles[index + 1];
      }
    }
    const list = computed(() => {
      return [
        getDefaultArticle({
          title: "\u4ECB\u7ECD",
          id: -1
        })
      ].concat(runtimeStore.editDict.articles);
    });
    let showTranslate = ref(true);
    let startPlay = ref(false);
    let showDisplayMode = ref(false);
    let displayMode = ref("inline");
    let articleWrapperRef = ref();
    const handleVolumeUpdate = (volume) => {
      settingStore.articleSoundVolume = volume;
    };
    const handleSpeedUpdate = (speed) => {
      settingStore.articleSoundSpeed = speed;
    };
    const paragraphCount = computed(() => {
      if (!selectArticle.value.text) return 0;
      return selectArticle.value.text.split("\n\n").filter((p) => p.trim()).length;
    });
    const shouldShowInlineTranslation = computed(() => {
      return displayMode.value === "card" && paragraphCount.value > 1;
    });
    function positionTranslations() {
      if (loading.value || selectArticle.value.id === -1) return;
      _nextTick(() => {
        const articleRect = articleWrapperRef.value.getBoundingClientRect();
        selectArticle.value.textTranslate.split("\n\n").forEach((paragraph, paraIndex) => {
          paragraph.split("\n").forEach((sentence, sentIndex) => {
            var _a, _b;
            const location = `${paraIndex}-${sentIndex}`;
            const sentenceClassName = `.word-${location}-0`;
            const sentenceEl = (_a = articleWrapperRef.value) == null ? void 0 : _a.querySelector(sentenceClassName);
            const translateClassName = `.translate-${location}`;
            const translateEl = (_b = articleWrapperRef.value) == null ? void 0 : _b.querySelector(translateClassName);
            if (sentenceEl && translateEl && sentence) {
              const sentenceRect = sentenceEl.getBoundingClientRect();
              translateEl.style.opacity = "1";
              translateEl.style.top = sentenceRect.top - articleRect.top + 24 + "px";
              const spaceEl = translateEl.firstElementChild;
              if (spaceEl) {
                spaceEl.style.width = sentenceRect.left - articleRect.left + "px";
              }
            }
          });
        });
      });
    }
    watch([() => displayMode.value, () => selectArticle.value.id, () => showTranslate.value], () => {
      if (displayMode.value !== "card") {
        positionTranslations();
      }
    });
    watch(
      () => selectArticle.value.id,
      () => {
        _nextTick(() => {
          var _a;
          (_a = articleRef.value) == null ? void 0 : _a.scrollTo(0, 0);
        });
      }
    );
    return (_ctx, _push, _parent, _attrs) => {
      var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q, _r, _s, _t, _u, _v;
      const _component_NuxtImg = __nuxt_component_0;
      const _component_IconPhTranslate = __unplugin_components_10;
      const _component_IconFluentTranslateOff16Regular = __unplugin_components_7;
      const _component_IconFluentTextAlignLeft16Regular = __unplugin_components_2;
      const _component_IconFluentTextPositionThrough20Regular = __unplugin_components_3;
      const _component_IconFluentAlignSpaceFitVertical20Regular = __unplugin_components_4;
      const _directive_loading = resolveDirective("loading");
      _push(`<div${ssrRenderAttrs(mergeProps({ class: "center h-screen" }, _attrs))} data-v-8478726f><div class="bg-second w-full 3xl:w-7/10 2xl:w-8/10 xl:w-full 2xl:card 2xl:h-[97vh] h-full p-3 box-border overflow-hidden mb-0" data-v-8478726f>`);
      if (showBookDetail.value) {
        _push(`<div${ssrRenderAttrs(mergeProps({ class: "flex box-border flex-col h-full" }, ssrGetDirectiveProps(_ctx, _directive_loading, unref(loading))))} data-v-8478726f><div class="dict-header flex justify-between items-center relative" data-v-8478726f><div class="flex gap-space" data-v-8478726f>`);
        _push(ssrRenderComponent(BackIcon, { class: "dict-back z-2" }, null, _parent));
        _push(`<div class="dict-title text-2xl text-align-center" data-v-8478726f>${ssrInterpolate(unref(runtimeStore).editDict.name)}</div></div><div class="dict-actions flex" data-v-8478726f>`);
        if (unref(runtimeStore).editDict.custom && unref(runtimeStore).editDict.url) {
          _push(ssrRenderComponent(BaseButton, {
            type: "info",
            onClick: reset
          }, {
            default: withCtx((_, _push2, _parent2, _scopeId) => {
              if (_push2) {
                _push2(`${ssrInterpolate(_ctx.$t("restore_default"))}`);
              } else {
                return [
                  createTextVNode(toDisplayString(_ctx.$t("restore_default")), 1)
                ];
              }
            }),
            _: 1
          }, _parent));
        } else {
          _push(`<!---->`);
        }
        _push(ssrRenderComponent(BaseButton, {
          loading: unref(studyLoading) || unref(loading),
          type: "info",
          onClick: ($event) => isRef(isEdit) ? isEdit.value = true : isEdit = true
        }, {
          default: withCtx((_, _push2, _parent2, _scopeId) => {
            if (_push2) {
              _push2(`${ssrInterpolate(_ctx.$t("edit"))}`);
            } else {
              return [
                createTextVNode(toDisplayString(_ctx.$t("edit")), 1)
              ];
            }
          }),
          _: 1
        }, _parent));
        _push(ssrRenderComponent(BaseButton, {
          type: "info",
          onClick: ($event) => unref(router).push("/batch-edit-article")
        }, {
          default: withCtx((_, _push2, _parent2, _scopeId) => {
            if (_push2) {
              _push2(`${ssrInterpolate(_ctx.$t("article_management"))}`);
            } else {
              return [
                createTextVNode(toDisplayString(_ctx.$t("article_management")), 1)
              ];
            }
          }),
          _: 1
        }, _parent));
        _push(ssrRenderComponent(BaseButton, {
          loading: unref(studyLoading) || unref(loading),
          onClick: startPractice
        }, {
          default: withCtx((_, _push2, _parent2, _scopeId) => {
            if (_push2) {
              _push2(`${ssrInterpolate(_ctx.$t("learn"))}`);
            } else {
              return [
                createTextVNode(toDisplayString(_ctx.$t("learn")), 1)
              ];
            }
          }),
          _: 1
        }, _parent));
        _push(`</div></div><div class="flex flex-1 overflow-hidden mt-3" data-v-8478726f><div class="3xl:w-80 2xl:w-60 xl:w-55 lg:w-50 overflow-auto" data-v-8478726f>`);
        if (unref(list).length) {
          _push(ssrRenderComponent(ArticleList, {
            "show-desc": true,
            onClick: handleCheckedChange,
            list: unref(list),
            "active-id": unref(selectArticle).id
          }, null, _parent));
        } else {
          _push(ssrRenderComponent(Empty, null, null, _parent));
        }
        _push(`</div><div class="flex-1 shrink-0 pl-4 flex flex-col overflow-hidden" data-v-8478726f>`);
        if (unref(selectArticle).id) {
          _push(`<!--[-->`);
          if (unref(selectArticle).id === -1) {
            _push(`<!--[--><div class="flex gap-4 mt-2" data-v-8478726f>`);
            if ((_a = unref(runtimeStore).editDict) == null ? void 0 : _a.cover) {
              _push(ssrRenderComponent(_component_NuxtImg, {
                src: (_b = unref(runtimeStore).editDict) == null ? void 0 : _b.cover,
                class: "w-30 rounded-md",
                alt: ""
              }, null, _parent));
            } else {
              _push(`<!---->`);
            }
            _push(`<div class="text-lg" data-v-8478726f>${ssrInterpolate(unref(runtimeStore).editDict.description)}</div></div>`);
            if (unref(totalSpend)) {
              _push(`<div class="text-base mt-10" data-v-8478726f>${ssrInterpolate(_ctx.$t("total_study_time"))}\uFF1A${ssrInterpolate(unref(totalSpend))}</div>`);
            } else {
              _push(`<!---->`);
            }
            _push(`<!--]-->`);
          } else {
            _push(`<!--[--><div class="flex-1 overflow-auto pb-30" data-v-8478726f><div data-v-8478726f><div class="flex justify-between items-center relative" data-v-8478726f><span data-v-8478726f><span class="text-3xl" data-v-8478726f>${ssrInterpolate(unref(selectArticle).title)}</span>`);
            if (unref(showTranslate)) {
              _push(`<span class="ml-6 text-2xl" data-v-8478726f>${ssrInterpolate(unref(selectArticle).titleTranslate)}</span>`);
            } else {
              _push(`<!---->`);
            }
            _push(`</span><div class="flex items-center gap-2 mr-4" data-v-8478726f>`);
            _push(ssrRenderComponent(BaseIcon, {
              title: _ctx.$t("toggle_translation"),
              onClick: ($event) => isRef(showTranslate) ? showTranslate.value = !unref(showTranslate) : showTranslate = !unref(showTranslate)
            }, {
              default: withCtx((_, _push2, _parent2, _scopeId) => {
                if (_push2) {
                  if (unref(showTranslate)) {
                    _push2(ssrRenderComponent(_component_IconPhTranslate, null, null, _parent2, _scopeId));
                  } else {
                    _push2(ssrRenderComponent(_component_IconFluentTranslateOff16Regular, null, null, _parent2, _scopeId));
                  }
                } else {
                  return [
                    unref(showTranslate) ? (openBlock(), createBlock(_component_IconPhTranslate, { key: 0 })) : (openBlock(), createBlock(_component_IconFluentTranslateOff16Regular, { key: 1 }))
                  ];
                }
              }),
              _: 1
            }, _parent));
            _push(ssrRenderComponent(BaseIcon, {
              disabled: !unref(showTranslate),
              title: _ctx.$t("switch_display_mode"),
              onClick: ($event) => isRef(showDisplayMode) ? showDisplayMode.value = !unref(showDisplayMode) : showDisplayMode = !unref(showDisplayMode)
            }, {
              default: withCtx((_, _push2, _parent2, _scopeId) => {
                if (_push2) {
                  _push2(ssrRenderComponent(_component_IconFluentTextAlignLeft16Regular, null, null, _parent2, _scopeId));
                } else {
                  return [
                    createVNode(_component_IconFluentTextAlignLeft16Regular)
                  ];
                }
              }),
              _: 1
            }, _parent));
            _push(`</div></div>`);
            if (unref(showDisplayMode)) {
              _push(`<div class="flex gap-1 mr-4 justify-end" data-v-8478726f>`);
              _push(ssrRenderComponent(BaseIcon, {
                title: _ctx.$t("line_by_line"),
                onClick: ($event) => isRef(displayMode) ? displayMode.value = "inline" : displayMode = "inline"
              }, {
                default: withCtx((_, _push2, _parent2, _scopeId) => {
                  if (_push2) {
                    _push2(ssrRenderComponent(_component_IconFluentTextPositionThrough20Regular, null, null, _parent2, _scopeId));
                  } else {
                    return [
                      createVNode(_component_IconFluentTextPositionThrough20Regular)
                    ];
                  }
                }),
                _: 1
              }, _parent));
              _push(ssrRenderComponent(BaseIcon, {
                title: _ctx.$t("single_line"),
                onClick: ($event) => isRef(displayMode) ? displayMode.value = "line" : displayMode = "line"
              }, {
                default: withCtx((_, _push2, _parent2, _scopeId) => {
                  if (_push2) {
                    _push2(ssrRenderComponent(_component_IconFluentTextAlignLeft16Regular, null, null, _parent2, _scopeId));
                  } else {
                    return [
                      createVNode(_component_IconFluentTextAlignLeft16Regular)
                    ];
                  }
                }),
                _: 1
              }, _parent));
              _push(ssrRenderComponent(BaseIcon, {
                title: _ctx.$t("comparison"),
                onClick: ($event) => isRef(displayMode) ? displayMode.value = "card" : displayMode = "card"
              }, {
                default: withCtx((_, _push2, _parent2, _scopeId) => {
                  if (_push2) {
                    _push2(ssrRenderComponent(_component_IconFluentAlignSpaceFitVertical20Regular, null, null, _parent2, _scopeId));
                  } else {
                    return [
                      createVNode(_component_IconFluentAlignSpaceFitVertical20Regular)
                    ];
                  }
                }),
                _: 1
              }, _parent));
              _push(`</div>`);
            } else {
              _push(`<!---->`);
            }
            if ((_d = (_c = unref(selectArticle)) == null ? void 0 : _c.question) == null ? void 0 : _d.text) {
              _push(`<div class="mt-2 text-2xl" data-v-8478726f><div data-v-8478726f>Question: ${ssrInterpolate((_f = (_e = unref(selectArticle)) == null ? void 0 : _e.question) == null ? void 0 : _f.text)}</div>`);
              if (unref(showTranslate) && (unref(displayMode) !== "card" || unref(shouldShowInlineTranslation))) {
                _push(`<div class="text-xl color-translate-second" data-v-8478726f>${ssrInterpolate(_ctx.$t("question"))}: ${ssrInterpolate((_h = (_g = unref(selectArticle)) == null ? void 0 : _g.question) == null ? void 0 : _h.translate)}</div>`);
              } else {
                _push(`<!---->`);
              }
              _push(`</div>`);
            } else {
              _push(`<!---->`);
            }
            _push(`</div><div class="${ssrRenderClass([[unref(showTranslate) && unref(displayMode) !== "card" && "tall"], "article-content mt-6"])}" data-v-8478726f><article data-v-8478726f><!--[-->`);
            ssrRenderList(unref(selectArticle).text.split("\n\n"), (t, i) => {
              _push(`<!--[--><div class="article-row w-full mb-10" data-v-8478726f><!--[-->`);
              ssrRenderList(t.split("\n"), (w, j) => {
                _push(`<span class="${ssrRenderClass(unref(displayMode) === "line" && "block")}" data-v-8478726f><!--[-->`);
                ssrRenderList(w.split(" ").filter(Boolean), (s, n) => {
                  _push(`<span class="${ssrRenderClass(`inline-block word-${i}-${j}-${n}`)}" data-v-8478726f><span data-v-8478726f>${ssrInterpolate(s)}</span><span class="space" data-v-8478726f></span></span>`);
                });
                _push(`<!--]--></span>`);
              });
              _push(`<!--]--></div>`);
              if (unref(shouldShowInlineTranslation) && unref(showTranslate) && unref(selectArticle).textTranslate) {
                _push(`<div class="trans-row text-xl color-translate-second -mt-7 mb-10" data-v-8478726f>`);
                if (unref(selectArticle).textTranslate.split("\n\n")[i]) {
                  _push(`<div data-v-8478726f>${ssrInterpolate(unref(selectArticle).textTranslate.split("\n\n")[i])}</div>`);
                } else {
                  _push(`<!---->`);
                }
                _push(`</div>`);
              } else {
                _push(`<!---->`);
              }
              _push(`<!--]-->`);
            });
            _push(`<!--]--><div class="text-right italic" data-v-8478726f>`);
            if ((_j = (_i = unref(selectArticle)) == null ? void 0 : _i.quote) == null ? void 0 : _j.text) {
              _push(`<div class="text-2xl" data-v-8478726f>${ssrInterpolate((_l = (_k = unref(selectArticle)) == null ? void 0 : _k.quote) == null ? void 0 : _l.text)}</div>`);
            } else {
              _push(`<!---->`);
            }
            if (((_n = (_m = unref(selectArticle)) == null ? void 0 : _m.quote) == null ? void 0 : _n.translate) && unref(showTranslate) && (unref(displayMode) !== "card" || unref(shouldShowInlineTranslation))) {
              _push(`<div class="trans-row text-xl color-translate-second" data-v-8478726f>${ssrInterpolate((_p = (_o = unref(selectArticle)) == null ? void 0 : _o.quote) == null ? void 0 : _p.translate)}</div>`);
            } else {
              _push(`<!---->`);
            }
            _push(`</div></article>`);
            if (unref(showTranslate) && unref(selectArticle).textTranslate) {
              _push(`<!--[-->`);
              if (unref(displayMode) !== "card") {
                _push(`<div class="translate color-translate-second" data-v-8478726f><!--[-->`);
                ssrRenderList(unref(selectArticle).textTranslate.split("\n\n"), (t, i) => {
                  _push(`<div class="break-words w-full section" data-v-8478726f><!--[-->`);
                  ssrRenderList(t.split("\n"), (w, j) => {
                    _push(`<div class="${ssrRenderClass(`row translate-${i}-${j}`)}" data-v-8478726f><span class="space" data-v-8478726f></span><span data-v-8478726f>${ssrInterpolate(w)}</span></div>`);
                  });
                  _push(`<!--]--></div>`);
                });
                _push(`<!--]--></div>`);
              } else {
                _push(`<!--[-->`);
                if (!unref(shouldShowInlineTranslation)) {
                  _push(`<!--[--><div class="line my-10" data-v-8478726f></div><div class="text-xl line-height-normal space-y-5" data-v-8478726f>`);
                  if ((_r = (_q = unref(selectArticle)) == null ? void 0 : _q.question) == null ? void 0 : _r.translate) {
                    _push(`<div class="mt-2" data-v-8478726f> \u95EE\u9898: ${ssrInterpolate((_t = (_s = unref(selectArticle)) == null ? void 0 : _s.question) == null ? void 0 : _t.translate)}</div>`);
                  } else {
                    _push(`<!---->`);
                  }
                  _push(`<!--[-->`);
                  ssrRenderList(unref(selectArticle).textTranslate.split("\n\n"), (t) => {
                    _push(`<div class="trans-row" data-v-8478726f>${ssrInterpolate(t)}</div>`);
                  });
                  _push(`<!--]--><div class="trans-row text-right italic" data-v-8478726f>${ssrInterpolate((_v = (_u = unref(selectArticle)) == null ? void 0 : _u.quote) == null ? void 0 : _v.translate)}</div></div><!--]-->`);
                } else {
                  _push(`<!---->`);
                }
                _push(`<!--]-->`);
              }
              _push(`<!--]-->`);
            } else {
              _push(`<!---->`);
            }
            _push(`</div>`);
            if (unref(currentPractice).length) {
              _push(`<!--[--><div class="line my-10" data-v-8478726f></div><div class="font-family text-base pr-2" data-v-8478726f><div class="text-2xl font-bold" data-v-8478726f>${ssrInterpolate(_ctx.$t("study_record"))}</div><div class="mt-1 mb-3" data-v-8478726f>${ssrInterpolate(_ctx.$t("total_study_time"))}\uFF1A${ssrInterpolate(unref(msToHourMinute)(unref(total)(unref(currentPractice), "spend")))}</div><!--[-->`);
              ssrRenderList(unref(currentPractice), (i) => {
                _push(`<div class="item border border-item border-solid mt-2 p-2 bg-[var(--bg-history)] rounded-md flex justify-between" data-v-8478726f><span class="color-gray" data-v-8478726f>${ssrInterpolate(unref(_dateFormat)(i.startDate))}</span><span data-v-8478726f>${ssrInterpolate(unref(msToHourMinute)(i.spend))}</span></div>`);
              });
              _push(`<!--]--></div><!--]-->`);
            } else {
              _push(`<!---->`);
            }
            _push(`</div>`);
            if (unref(selectArticle).audioSrc || unref(selectArticle).audioFileId) {
              _push(`<div class="border-t-1 border-t-gray-300 border-solid border-0 center gap-2 pt-4" data-v-8478726f>`);
              _push(ssrRenderComponent(ArticleAudio, {
                article: unref(selectArticle),
                onUpdateSpeed: handleSpeedUpdate,
                onUpdateVolume: handleVolumeUpdate,
                autoplay: unref(settingStore).articleAutoPlayNext && unref(startPlay),
                onEnded: next
              }, null, _parent));
              _push(`<div class="flex items-center gap-1" data-v-8478726f><span data-v-8478726f>${ssrInterpolate(_ctx.$t("play_next_after_end"))}</span>`);
              _push(ssrRenderComponent(Switch, {
                modelValue: unref(settingStore).articleAutoPlayNext,
                "onUpdate:modelValue": ($event) => unref(settingStore).articleAutoPlayNext = $event
              }, null, _parent));
              _push(`</div></div>`);
            } else {
              _push(`<!---->`);
            }
            _push(`<!--]-->`);
          }
          _push(`<!--]-->`);
        } else {
          _push(ssrRenderComponent(Empty, null, null, _parent));
        }
        _push(`</div></div></div>`);
      } else {
        _push(`<div class="" data-v-8478726f><div class="dict-header flex justify-between items-center relative" data-v-8478726f>`);
        _push(ssrRenderComponent(BackIcon, {
          class: "dict-back z-2",
          onClick: ($event) => unref(isAdd) ? _ctx.$router.back() : isRef(isEdit) ? isEdit.value = false : isEdit = false
        }, null, _parent));
        _push(`<div class="dict-title absolute text-2xl text-align-center w-full" data-v-8478726f>${ssrInterpolate(unref(runtimeStore).editDict.id ? _ctx.$t("edit_book") : _ctx.$t("create_book"))}</div></div><div class="center" data-v-8478726f>`);
        _push(ssrRenderComponent(EditBook, {
          "is-add": unref(isAdd),
          "is-book": true,
          onClose: formClose,
          onSubmit: ($event) => isRef(isEdit) ? isEdit.value = isRef(isAdd) ? isAdd.value = false : isAdd = false : isEdit = isRef(isAdd) ? isAdd.value = false : isAdd = false
        }, null, _parent));
        _push(`</div></div>`);
      }
      _push(`</div></div>`);
    };
  }
});
const _sfc_setup = _sfc_main.setup;
_sfc_main.setup = (props, ctx) => {
  const ssrContext = useSSRContext();
  (ssrContext.modules || (ssrContext.modules = /* @__PURE__ */ new Set())).add("pages/(articles)/book/[id].vue");
  return _sfc_setup ? _sfc_setup(props, ctx) : void 0;
};
const _id_ = /* @__PURE__ */ _export_sfc(_sfc_main, [["__scopeId", "data-v-8478726f"]]);

export { _id_ as default };
//# sourceMappingURL=_id_-BZOaKl6z.mjs.map
