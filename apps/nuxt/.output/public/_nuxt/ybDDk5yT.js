import{B as h}from"./B55v04t5.js";import{d as v,W as b,o as _,h as C,k as t,w as x,b as w,t as y,i as d,aI as I,a5 as u}from"./Dbiv707D.js";import{s as L}from"./S7Ir0EnR.js";const l={codeLength:6,sendInterval:60,phoneRegex:/^1[2-9]\d{9}$/},R={emailRegex:/^[^\s@]+@[^\s@]+\.[^\s@]+$/},i={minLength:9,maxLength:20},c=r=>R.emailRegex.test(r),g=r=>l.phoneRegex.test(r),q=[{required:!0,message:"请输入验证码",trigger:"blur"},{min:l.codeLength,message:`请输入 ${l.codeLength} 位验证码`,trigger:"blur"}],B=[{required:!0,message:"请输入手机号/邮箱地址",trigger:"blur"},{validator:(r,e)=>{if(!g(e)&&!c(e))throw new Error("请输入有效的手机号或邮箱地址")},trigger:"blur"}],N=[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{validator:(r,e)=>{if(!c(e))throw new Error("请输入有效的邮箱地址")},trigger:"blur"}],S=[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:(r,e)=>{if(!g(e))throw new Error("请输入有效的手机号")},trigger:"blur"}],k=[{required:!0,message:"请输入密码",trigger:"blur"},{min:i.minLength,max:i.maxLength,message:`密码长度为 ${i.minLength}-${i.maxLength} 位`,trigger:"blur"}],$=v({__name:"Code",props:{validateField:{type:Function},type:null,val:null,size:{default:"large"}},setup(r){const{t:e}=b();let n=d(!1),s=d(0);const o=r;async function m(){if(o.validateField())try{n.value=!0;const a=await I({val:o.val,type:o.type});if(a.success){s.value=l.sendInterval;const f=L(()=>{s.value--,s.value<=0&&clearInterval(f)},1e3)}else u.error(a.msg||e("send_failed"))}catch(a){console.error("Send code error:",a),u.error(e("send_code_failed"))}finally{n.value=!1}}return(p,a)=>(_(),C(h,{onClick:m,disabled:t(n)||t(s)>0,type:"info",size:o.size,style:{border:"1px solid var(--color-input-border)"}},{default:x(()=>[w(y(t(s)>0?`${t(s)}s`:t(n)?t(e)("sending"):t(e)("send_code")),1)]),_:1},8,["disabled","size"]))}}),z=Object.assign($,{__name:"Code"});export{z as C,l as P,S as a,i as b,q as c,B as d,N as e,k as p};
