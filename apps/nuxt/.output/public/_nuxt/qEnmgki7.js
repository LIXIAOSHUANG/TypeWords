import{Z as a,V as p,bS as S,i as s,c5 as y,b7 as m,bn as g}from"./CL2Zm6Gn.js";function d(e,o){let u=s([]),n=s(1),t=s(0);p(()=>{e&&l(e,o)});function l(i,c){c&&(n.value=c),u.value=[];for(let f=0;f<n.value;f++)i.map(v=>u.value.push(new Audio(m.RESOURCE_URL+v)));t.value=0}function r(i=100){t.value++,u.value.length>1&&u.value.length!==n.value?(u.value[t.value%u.value.length].volume=i/100,u.value[t.value%u.value.length].play()):(u.value[t.value%n.value].volume=i/100,u.value[t.value%n.value].play())}return{play:r,setAudio:l}}function k(){const e=a(),{play:o,setAudio:u}=d();S(()=>{g.find(l=>l.label===e.keyboardSoundFile)||(e.keyboardSoundFile="机械键盘2");let t=A(e.keyboardSoundFile);u(t,t.length===1?4:1)});function n(){e.keyboardSound&&o(e.keyboardSoundVolume)}return n}function P(){const e=a(),{play:o}=d(["/sound/beep.wav"],1);function u(){e.effectSound&&o(e.effectSoundVolume)}return u}function w(){const e=a(),{play:o}=d(["/sound/correct.wav"],1);function u(){e.effectSound&&o(e.effectSoundVolume)}return u}function V(){const e=a();let o=s(null);p(()=>{o.value=new Audio});function u(n){if(!n)return;let t=`${y}${n}&type=2`;e.soundType==="uk"&&(t=`${y}${n}&type=1`),o.value.src=t,o.value.volume=e.wordSoundVolume/100,o.value.playbackRate=e.wordSoundSpeed,o.value.play(),o.value.onerror=l=>{h()(n)}}return u}function h(){const e=a();function o(u){speechSynthesis.cancel();let n=new SpeechSynthesisUtterance(u);n.rate=e.wordSoundSpeed,n.volume=e.wordSoundVolume/100,n.pitch=1,n.lang="en-US";let t=speechSynthesis.getVoices().filter(l=>l.lang==="en-US");t&&t.length&&(n.voice=t.find(l=>l.name.includes("Emma "))||t[0]),speechSynthesis.speak(n)}return o}function x(e){new Audio(e).play().then(o=>{})}function A(e){return e==="机械键盘"?["/sound/key-sounds/jixie/机械0.mp3","/sound/key-sounds/jixie/机械1.mp3","/sound/key-sounds/jixie/机械2.mp3","/sound/key-sounds/jixie/机械3.mp3"]:[`/sound/key-sounds/${e}.mp3`]}export{w as a,V as b,x as c,k as d,h as e,A as g,P as u};
