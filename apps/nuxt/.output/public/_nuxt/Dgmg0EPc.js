import{d as F,y as _,V as j,b5 as R,f as m,b as x,i as b,j as V,X as M,bj as d,o as B,c as I,m as O,a2 as A,K as C}from"./CL2Zm6Gn.js";const N=F({__name:"FormItem",props:{prop:String,label:String},setup(g){const n=g,f=b("");let r=b("");const v=_("formModel"),c=_("registerField"),h=_("formRules",{}),a=V(()=>h?.[n.prop]||[]),s=(e,o=!1)=>{r.value="";const l=v.value[n.prop];if(o&&l.trim()==="")return!0;for(const t of e){if(t.required&&(!l||!l.toString().trim())||t.max&&l&&l.toString().length>t.max||t.min&&l&&l.toString().length<t.min||t.max&&l&&l.toString().length>t.max)return r.value=t.message,!1;if(t.validator)try{t.validator(t,l)}catch(S){return r.value=S.message,!1}}return!0};function i(){const e=a.value.filter(o=>o.trigger==="blur");e.length&&s(e,!0)}function u(){r.value=""}j(()=>{c&&c({prop:n.prop,modelValue:f,validate:s})});let p=R();function y(e,o){return e&&(e.type&&e.type.name?o(e):(Array.isArray(e.children)&&(e.children=e.children.map(l=>y(l,o))),e))}return()=>{let e=p.default()[0];return e=y(e,o=>({...o,props:{...o.props,error:!!r.value,onBlur:i,onChange:u}})),m("div",{class:"form-item   flex gap-space"},[n.label&&m("label",{class:"w-20 flex items-start mt-1 justify-end"},[a.value.length?m("span",{class:"form-error"},[x("*")]):null,x(" "),n.label]),m("div",{class:"flex-1 relative"},[m(e,null,null),m("div",{class:"form-error my-0.5 anim",style:{opacity:r.value?1:0}},[r.value,x(" Â ")])])])}}}),E=Object.assign(M(N,[["__scopeId","data-v-85817323"]]),{__name:"FormItem"}),k=F({__name:"Form",props:{model:Object,rules:Object},setup(g,{expose:n}){const f=g,r=b([]),v=a=>{r.value.push(a)};function c(a){let s=!0;r.value.forEach(i=>{const u=f.rules?.[i.prop]||[];i.validate(u)||(s=!1)}),a(s)}function h(a,s){const i=r.value.find(u=>u.prop===a);if(i){const u=f.rules?.[a]||[],p=i.validate(u);return s&&s(p),p}return s&&s(!0),!0}return d("registerField",v),d("formModel",C(f,"model")),d("formValidate",c),d("formRules",f.rules),n({validate:c,validateField:h}),(a,s)=>(B(),I("form",{onSubmit:s[0]||(s[0]=A(()=>{},["prevent"]))},[O(a.$slots,"default")],32))}}),$=Object.assign(k,{__name:"Form"});export{$ as F,E as a};
