import{_ as D}from"./BqBkRU00.js";import{d as C,b5 as F,i as m,z as x,V as q,aq as M,o as p,c as _,a as B,n as g,t as S,f as N,h as T,bf as P,w as W,bo as L,m as E,e as $,bg as U,j as H,I as R,bj as I,X as O,y as j,as as X,bZ as Y}from"./CL2Zm6Gn.js";import{c as Z}from"./BIONxxX3.js";const G=C({__name:"Select",props:{modelValue:null,placeholder:null,disabled:{type:Boolean},options:null},emits:["update:modelValue","toggle"],setup(a,{emit:d}){const l=a,c=d,t=m(!1),r=m(!1),f=m({}),u=m(null),v=m(null),o=m(null),s=F(),h=H(()=>u.value?u.value.label:l.placeholder||"请选择"),w=async()=>{if(!v.value||!o.value)return;await R(),await new Promise(requestAnimationFrame);const e=v.value.getBoundingClientRect(),n=o.value.offsetHeight,i=window.innerHeight-e.bottom,k=e.top;r.value=i<n&&k>i,f.value={position:"fixed",left:e.left+"px",width:e.width+"px",top:r.value?"auto":e.bottom+5+"px",bottom:r.value?window.innerHeight-e.top+5+"px":"auto",zIndex:9999}},y=async()=>{l.disabled||(t.value=!t.value,c("toggle",t.value),t.value&&(await R(),await new Promise(requestAnimationFrame),await w()))},V=(e,n)=>{u.value={value:e,label:n},c("update:modelValue",e),t.value=!1,c("toggle",t.value)};let b=m(l.modelValue);I("selectValue",b),I("selectHandler",V),Z(e=>{e&&v.value&&!v.value.contains(e.target)&&o.value&&!o.value.contains(e.target)&&(t.value=!1,c("toggle",t.value))}),x(()=>l.modelValue,e=>{if(b.value=e,s.default){let n=s.default(),i=[];n.length===1?i=Array.from(n[0].children):i=n;const k=i.find(A=>A.props.value===e);k&&(u.value=k.props);return}if(l.options){const n=l.options.find(i=>i.value===e);n&&(u.value=n)}},{immediate:!0}),x(()=>l.options,e=>{if(e&&l.modelValue){const n=e.find(i=>i.value===l.modelValue);n&&(u.value=n)}},{immediate:!0});const z=()=>{t.value&&w()};return q(()=>{window.addEventListener("scroll",z,!0),window.addEventListener("resize",z)}),M(()=>{window.removeEventListener("scroll",z,!0),window.removeEventListener("resize",z)}),(e,n)=>{const i=D;return p(),_("div",{class:"select",ref_key:"selectRef",ref:v},[B("div",{class:g(["select__wrapper",{disabled:a.disabled,active:t.value}]),onClick:y},[B("div",{class:g(["select__label",{"is-placeholder":!u.value}])},S(h.value),3),N(i,{class:g(["select__arrow",{"is-reverse":t.value}]),width:"16"},null,8,["class"])],2),(p(),T(U,{to:"body"},[(p(),T(P,{name:r.value?"zoom-in-bottom":"zoom-in-top",key:r.value?"bottom":"top"},{default:W(()=>[t.value?(p(),_("div",{key:0,class:"select__dropdown",ref_key:"dropdownRef",ref:o,style:L(f.value)},[E(e.$slots,"default",{},void 0,!0)],4)):$("",!0)]),_:3},8,["name"]))]))],512)}}}),se=Object.assign(O(G,[["__scopeId","data-v-d5389803"]]),{__name:"Select"}),J={class:"option__label"},K=C({__name:"Option",props:{label:null,value:null,disabled:{type:Boolean}},setup(a){const d=a,l=j("selectValue",null),c=j("selectHandler",null),t=H(()=>l.value===d.value),r=()=>{d.disabled||c&&c(d.value,d.label)};return x(()=>d.value,()=>{},{immediate:!0}),(f,u)=>(p(),_("li",{class:g(["option",{"is-selected":t.value,"is-disabled":a.disabled}]),onClick:r},[E(f.$slots,"default",{},()=>[B("span",J,S(a.label),1)],!0)],2))}}),ne=Object.assign(O(K,[["__scopeId","data-v-6a3169d0"]]),{__name:"Option"}),Q=["placeholder","maxlength","rows","disabled"],ee={key:0,class:"absolute bottom-1 right-2 text-xs text-gray-400 select-none"},te=C({__name:"Textarea",props:{modelValue:null,placeholder:null,maxlength:null,rows:null,autosize:{type:Boolean},showWordLimit:{type:Boolean},disabled:{type:Boolean}},emits:["update:modelValue"],setup(a,{emit:d}){const l=a,c=d,t=m(l.modelValue??"");x(()=>l.modelValue,o=>t.value=o??"");const r=m(),f=H(()=>l.autosize?{height:"auto"}:{}),u=o=>{const s=o.target.value;t.value=s,c("update:modelValue",s),l.autosize&&R(v)},v=()=>{if(!r.value)return;const o=r.value;o.style.height="auto";let s=o.scrollHeight,h="hidden";if(typeof l.autosize=="object"){const{minRows:w,maxRows:y}=l.autosize,V=24;if(w&&(s=Math.max(s,w*V)),y){const b=y*V;s>b&&(s=b,h="auto")}}o.style.height=s+"px",o.style.overflowY=h};return x(t,()=>{l.autosize&&R(v)},{immediate:!0}),(o,s)=>(p(),_("div",{class:g(["inline-flex w-full relative",[a.disabled&&"disabled"]])},[X(B("textarea",{ref_key:"textareaRef",ref:r,"onUpdate:modelValue":s[0]||(s[0]=h=>t.value=h),placeholder:a.placeholder,maxlength:a.maxlength,rows:a.rows,disabled:a.disabled,style:L(f.value),class:"w-full px-3 py-2 border border-gray-300 rounded-md outline-none resize-none transition-colors duration-200 box-border",onInput:u},null,44,Q),[[Y,t.value]]),a.showWordLimit&&a.maxlength?(p(),_("span",ee,S(t.value.length)+" / "+S(a.maxlength),1)):$("",!0)],2))}}),ie=Object.assign(O(te,[["__scopeId","data-v-182780c4"]]),{__name:"Textarea"});export{ne as O,se as S,ie as T};
